var qd=Object.defineProperty;var Vd=(t,e,n)=>e in t?qd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var wt=(t,e,n)=>Vd(t,typeof e!="symbol"?e+"":e,n);import{j as a,S as Tn,O as Ur,C as qr,a as Vr,T as zr,D as Yr,P as qa,R as Va,b as za,u as ie,c as Vt,d as Gr,e as J,f as V,g as tn,h as Ln,i as _s,k as Ce,l as Ya,W as zd,m as Yd,n as Ga,o as Ka,p as Ja,F as Xa,q as Qa,r as Za}from"./ui-_X73GvqJ.js";import{a as js,r as g,g as Gd,c as be,d as Ve}from"./vendor-BpbxbJep.js";import{u as nn,a as ei,L as os,b as Kd,B as Jd,R as Xd,c as St}from"./router-DfhNaIFb.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var ti,Vo=js;ti=Vo.createRoot,Vo.hydrateRoot;/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ni=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:o,iconNode:i,...l},c)=>g.createElement("svg",{ref:c,...Zd,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:ni("lucide",r),...l},[...i.map(([u,d])=>g.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=(t,e)=>{const n=g.forwardRef(({className:s,...r},o)=>g.createElement(eu,{ref:o,iconNode:e,className:ni(`lucide-${Qd(t)}`,s),...r}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=G("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=G("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=G("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=G("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=G("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=G("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=G("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=G("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=G("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=G("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=G("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=G("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=G("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=G("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=G("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=G("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=G("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=G("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=G("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=G("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=G("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=G("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=G("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=G("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=G("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=G("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function di(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=di(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function ui(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=di(t))&&(s&&(s+=" "),s+=e);return s}const Go=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Ko=ui,Ps=(t,e)=>n=>{var s;if((e==null?void 0:e.variants)==null)return Ko(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:o}=e,i=Object.keys(r).map(u=>{const d=n==null?void 0:n[u],h=o==null?void 0:o[u];if(d===null)return null;const m=Go(d)||Go(h);return r[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:m,...f}=d;return Object.entries(f).every(p=>{let[y,v]=p;return Array.isArray(v)?v.includes({...o,...l}[y]):{...o,...l}[y]===v})?[...u,h,m]:u},[]);return Ko(t,i,c,n==null?void 0:n.class,n==null?void 0:n.className)},Xr="-",fu=t=>{const e=pu(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:i=>{const l=i.split(Xr);return l[0]===""&&l.length!==1&&l.shift(),hi(l,e)||mu(i)},getConflictingClassGroupIds:(i,l)=>{const c=n[i]||[];return l&&s[i]?[...c,...s[i]]:c}}},hi=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const n=t[0],s=e.nextPart.get(n),r=s?hi(t.slice(1),s):void 0;if(r)return r;if(e.validators.length===0)return;const o=t.join(Xr);return(i=e.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},Jo=/^\[(.+)\]$/,mu=t=>{if(Jo.test(t)){const e=Jo.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},pu=t=>{const{theme:e,prefix:n}=t,s={nextPart:new Map,validators:[]};return yu(Object.entries(t.classGroups),n).forEach(([o,i])=>{pr(i,s,o,e)}),s},pr=(t,e,n,s)=>{t.forEach(r=>{if(typeof r=="string"){const o=r===""?e:Xo(e,r);o.classGroupId=n;return}if(typeof r=="function"){if(gu(r)){pr(r(s),e,n,s);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([o,i])=>{pr(i,Xo(e,o),n,s)})})},Xo=(t,e)=>{let n=t;return e.split(Xr).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},gu=t=>t.isThemeGetter,yu=(t,e)=>e?t.map(([n,s])=>{const r=s.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[e+i,l])):o);return[n,r]}):t,vu=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,s=new Map;const r=(o,i)=>{n.set(o,i),e++,e>t&&(e=0,s=n,n=new Map)};return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=s.get(o))!==void 0)return r(o,i),i},set(o,i){n.has(o)?n.set(o,i):r(o,i)}}},fi="!",xu=t=>{const{separator:e,experimentalParseClassName:n}=t,s=e.length===1,r=e[0],o=e.length,i=l=>{const c=[];let u=0,d=0,h;for(let v=0;v<l.length;v++){let w=l[v];if(u===0){if(w===r&&(s||l.slice(v,v+o)===e)){c.push(l.slice(d,v)),d=v+o;continue}if(w==="/"){h=v;continue}}w==="["?u++:w==="]"&&u--}const m=c.length===0?l:l.substring(d),f=m.startsWith(fi),p=f?m.substring(1):m,y=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:y}};return n?l=>n({className:l,parseClassName:i}):i},bu=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(s=>{s[0]==="["?(e.push(...n.sort(),s),n=[]):n.push(s)}),e.push(...n.sort()),e},wu=t=>({cache:vu(t.cacheSize),parseClassName:xu(t),...fu(t)}),Su=/\s+/,_u=(t,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r}=e,o=[],i=t.trim().split(Su);let l="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:f}=n(u);let p=!!f,y=s(p?m.substring(0,f):m);if(!y){if(!p){l=u+(l.length>0?" "+l:l);continue}if(y=s(m),!y){l=u+(l.length>0?" "+l:l);continue}p=!1}const v=bu(d).join(":"),w=h?v+fi:v,x=w+y;if(o.includes(x))continue;o.push(x);const b=r(y,p);for(let S=0;S<b.length;++S){const _=b[S];o.push(w+_)}l=u+(l.length>0?" "+l:l)}return l};function ju(){let t=0,e,n,s="";for(;t<arguments.length;)(e=arguments[t++])&&(n=mi(e))&&(s&&(s+=" "),s+=n);return s}const mi=t=>{if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=mi(t[s]))&&(n&&(n+=" "),n+=e);return n};function Nu(t,...e){let n,s,r,o=i;function i(c){const u=e.reduce((d,h)=>h(d),t());return n=wu(u),s=n.cache.get,r=n.cache.set,o=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=_u(c,n);return r(c,d),d}return function(){return o(ju.apply(null,arguments))}}const re=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},pi=/^\[(?:([a-z-]+):)?(.+)\]$/i,Cu=/^\d+\/\d+$/,ku=new Set(["px","full","screen"]),Pu=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Au=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Eu=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ou=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Tu=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,He=t=>Ht(t)||ku.has(t)||Cu.test(t),nt=t=>sn(t,"length",Bu),Ht=t=>!!t&&!Number.isNaN(Number(t)),Ks=t=>sn(t,"number",Ht),vn=t=>!!t&&Number.isInteger(Number(t)),Iu=t=>t.endsWith("%")&&Ht(t.slice(0,-1)),B=t=>pi.test(t),st=t=>Pu.test(t),Mu=new Set(["length","size","percentage"]),Ru=t=>sn(t,Mu,gi),Du=t=>sn(t,"position",gi),Fu=new Set(["image","url"]),$u=t=>sn(t,Fu,Hu),Lu=t=>sn(t,"",Wu),xn=()=>!0,sn=(t,e,n)=>{const s=pi.exec(t);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):n(s[2]):!1},Bu=t=>Au.test(t)&&!Eu.test(t),gi=()=>!1,Wu=t=>Ou.test(t),Hu=t=>Tu.test(t),Uu=()=>{const t=re("colors"),e=re("spacing"),n=re("blur"),s=re("brightness"),r=re("borderColor"),o=re("borderRadius"),i=re("borderSpacing"),l=re("borderWidth"),c=re("contrast"),u=re("grayscale"),d=re("hueRotate"),h=re("invert"),m=re("gap"),f=re("gradientColorStops"),p=re("gradientColorStopPositions"),y=re("inset"),v=re("margin"),w=re("opacity"),x=re("padding"),b=re("saturate"),S=re("scale"),_=re("sepia"),j=re("skew"),k=re("space"),A=re("translate"),P=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",B,e],E=()=>[B,e],W=()=>["",He,nt],$=()=>["auto",Ht,B],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],T=()=>["solid","dashed","dotted","double","none"],C=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],N=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",B],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>[Ht,B];return{cacheSize:500,separator:":",theme:{colors:[xn],spacing:[He,nt],blur:["none","",st,B],brightness:ee(),borderColor:[t],borderRadius:["none","","full",st,B],borderSpacing:E(),borderWidth:W(),contrast:ee(),grayscale:F(),hueRotate:ee(),invert:F(),gap:E(),gradientColorStops:[t],gradientColorStopPositions:[Iu,nt],inset:O(),margin:O(),opacity:ee(),padding:E(),saturate:ee(),scale:ee(),sepia:F(),skew:ee(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",B]}],container:["container"],columns:[{columns:[st]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),B]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vn,B]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",B]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",vn,B]}],"grid-cols":[{"grid-cols":[xn]}],"col-start-end":[{col:["auto",{span:["full",vn,B]},B]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[xn]}],"row-start-end":[{row:["auto",{span:[vn,B]},B]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",B]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",B]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...N()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...N(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...N(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",B,e]}],"min-w":[{"min-w":[B,e,"min","max","fit"]}],"max-w":[{"max-w":[B,e,"none","full","min","max","fit","prose",{screen:[st]},st]}],h:[{h:[B,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[B,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[B,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[B,e,"auto","min","max","fit"]}],"font-size":[{text:["base",st,nt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ks]}],"font-family":[{font:[xn]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",B]}],"line-clamp":[{"line-clamp":["none",Ht,Ks]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",He,B]}],"list-image":[{"list-image":["none",B]}],"list-style-type":[{list:["none","disc","decimal",B]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...T(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",He,nt]}],"underline-offset":[{"underline-offset":["auto",He,B]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",B]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",B]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),Du]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ru]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},$u]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...T(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:T()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...T()]}],"outline-offset":[{"outline-offset":[He,B]}],"outline-w":[{outline:[He,nt]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[He,nt]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",st,Lu]}],"shadow-color":[{shadow:[xn]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...C(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":C()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",st,B]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",B]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",B]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",B]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[vn,B]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",B]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",B]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",B]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[He,nt,Ks]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},qu=Nu(Uu);function D(...t){return qu(ui(t))}const In=Ps("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),U=g.forwardRef(({className:t,variant:e,size:n,asChild:s=!1,...r},o)=>{const i=s?Tn:"button";return a.jsx(i,{className:D(In({variant:e,size:n,className:t})),ref:o,...r})});U.displayName="Button";const Ge=g.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:D("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Ge.displayName="Card";const Ke=g.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:D("flex flex-col space-y-1.5 p-6",t),...e}));Ke.displayName="CardHeader";const Je=g.forwardRef(({className:t,...e},n)=>a.jsx("h3",{ref:n,className:D("text-2xl font-semibold leading-none tracking-tight",t),...e}));Je.displayName="CardTitle";const hs=g.forwardRef(({className:t,...e},n)=>a.jsx("p",{ref:n,className:D("text-sm text-muted-foreground",t),...e}));hs.displayName="CardDescription";const Xe=g.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:D("p-6 pt-0",t),...e}));Xe.displayName="CardContent";const Vu=g.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:D("flex items-center p-6 pt-0",t),...e}));Vu.displayName="CardFooter";const zu="modulepreload",Yu=function(t){return"/mia-consent-offline-form/"+t},Qo={},rn=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=Yu(c),c in Qo)return;Qo[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":zu,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,f)=>{h.addEventListener("load",m),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return r.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},Gu=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>rn(async()=>{const{default:s}=await Promise.resolve().then(()=>on);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)};class Qr extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class Ku extends Qr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ju extends Qr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Xu extends Qr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var gr;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(gr||(gr={}));var Qu=function(t,e,n,s){function r(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(s.next(d))}catch(h){i(h)}}function c(d){try{u(s.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):r(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};class Zu{constructor(e,{headers:n={},customFetch:s,region:r=gr.Any}={}){this.url=e,this.headers=n,this.region=r,this.fetch=Gu(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var s;return Qu(this,void 0,void 0,function*(){try{const{headers:r,method:o,body:i}=n;let l={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;i&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=i):typeof i=="string"?(l["Content-Type"]="text/plain",u=i):typeof FormData<"u"&&i instanceof FormData?u=i:(l["Content-Type"]="application/json",u=JSON.stringify(i)));const d=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:u}).catch(p=>{throw new Ku(p)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Ju(d);if(!d.ok)throw new Xu(d);let m=((s=d.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),f;return m==="application/json"?f=yield d.json():m==="application/octet-stream"?f=yield d.blob():m==="text/event-stream"?f=d:m==="multipart/form-data"?f=yield d.formData():f=yield d.text(),{data:f,error:null}}catch(r){return{data:null,error:r}}})}}var he={},Zr={},As={},Bn={},Es={},Os={},eh=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},zt=eh();const th=zt.fetch,yi=zt.fetch.bind(zt),vi=zt.Headers,nh=zt.Request,sh=zt.Response,on=Object.freeze(Object.defineProperty({__proto__:null,Headers:vi,Request:nh,Response:sh,default:yi,fetch:th},Symbol.toStringTag,{value:"Module"})),rh=Gd(on);var Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});let oh=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ts.default=oh;var xi=be&&be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Os,"__esModule",{value:!0});const ah=xi(rh),ih=xi(Ts);let lh=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=ah.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,l,c;let u=null,d=null,h=null,m=o.status,f=o.statusText;if(o.ok){if(this.method!=="HEAD"){const w=await o.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=w:d=JSON.parse(w))}const y=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),v=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&v&&v.length>1&&(h=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,f="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await o.text();try{u=JSON.parse(y),Array.isArray(u)&&o.status===404&&(d=[],u=null,m=200,f="OK")}catch{o.status===404&&y===""?(m=204,f="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,f="OK"),u&&this.shouldThrowOnError)throw new ih.default(u)}return{error:u,data:d,count:h,status:m,statusText:f}});return this.shouldThrowOnError||(r=r.catch(o=>{var i,l,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,n)}returns(){return this}overrideTypes(){return this}};Os.default=lh;var ch=be&&be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Es,"__esModule",{value:!0});const dh=ch(Os);let uh=class extends dh.default{select(e){let n=!1;const s=(e??"*").split("").map(r=>/\s/.test(r)&&!n?"":(r==='"'&&(n=!n),r)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:s,foreignTable:r,referencedTable:o=r}={}){const i=o?`${o}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:s=n}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,n,{foreignTable:s,referencedTable:r=s}={}){const o=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(i,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:s=!1,buffers:r=!1,wal:o=!1,format:i="text"}={}){var l;const c=[e?"analyze":null,n?"verbose":null,s?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${u}"; options=${c};`,i==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Es.default=uh;var hh=be&&be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bn,"__esModule",{value:!0});const fh=hh(Es);let mh=class extends fh.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const s=Array.from(new Set(n)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:s,type:r}={}){let o="";r==="plain"?o="pl":r==="phrase"?o="ph":r==="websearch"&&(o="w");const i=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${o}fts${i}.${n}`),this}match(e){return Object.entries(e).forEach(([n,s])=>{this.url.searchParams.append(n,`eq.${s}`)}),this}not(e,n,s){return this.url.searchParams.append(e,`not.${n}.${s}`),this}or(e,{foreignTable:n,referencedTable:s=n}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,n,s){return this.url.searchParams.append(e,`${n}.${s}`),this}};Bn.default=mh;var ph=be&&be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(As,"__esModule",{value:!0});const bn=ph(Bn);let gh=class{constructor(e,{headers:n={},schema:s,fetch:r}){this.url=e,this.headers=n,this.schema=s,this.fetch=r}select(e,{head:n=!1,count:s}={}){const r=n?"HEAD":"GET";let o=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),s&&(this.headers.Prefer=`count=${s}`),new bn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:s=!0}={}){const r="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const i=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new bn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:s=!1,count:r,defaultToNull:o=!0}={}){const i="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new bn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const s="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),n&&r.push(`count=${n}`),this.headers.Prefer=r.join(","),new bn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new bn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};As.default=gh;var Is={},Ms={};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.version=void 0;Ms.version="0.0.0-automated";Object.defineProperty(Is,"__esModule",{value:!0});Is.DEFAULT_HEADERS=void 0;const yh=Ms;Is.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${yh.version}`};var bi=be&&be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zr,"__esModule",{value:!0});const vh=bi(As),xh=bi(Bn),bh=Is;let wh=class wi{constructor(e,{headers:n={},schema:s,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},bh.DEFAULT_HEADERS),n),this.schemaName=s,this.fetch=r}from(e){const n=new URL(`${this.url}/${e}`);return new vh.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new wi(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:s=!1,get:r=!1,count:o}={}){let i;const l=new URL(`${this.url}/rpc/${e}`);let c;s||r?(i=s?"HEAD":"GET",Object.entries(n).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(i="POST",c=n);const u=Object.assign({},this.headers);return o&&(u.Prefer=`count=${o}`),new xh.default({method:i,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Zr.default=wh;var an=be&&be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(he,"__esModule",{value:!0});he.PostgrestError=he.PostgrestBuilder=he.PostgrestTransformBuilder=he.PostgrestFilterBuilder=he.PostgrestQueryBuilder=he.PostgrestClient=void 0;const Si=an(Zr);he.PostgrestClient=Si.default;const _i=an(As);he.PostgrestQueryBuilder=_i.default;const ji=an(Bn);he.PostgrestFilterBuilder=ji.default;const Ni=an(Es);he.PostgrestTransformBuilder=Ni.default;const Ci=an(Os);he.PostgrestBuilder=Ci.default;const ki=an(Ts);he.PostgrestError=ki.default;var Sh=he.default={PostgrestClient:Si.default,PostgrestQueryBuilder:_i.default,PostgrestFilterBuilder:ji.default,PostgrestTransformBuilder:Ni.default,PostgrestBuilder:Ci.default,PostgrestError:ki.default};const{PostgrestClient:_h,PostgrestQueryBuilder:qw,PostgrestFilterBuilder:Vw,PostgrestTransformBuilder:zw,PostgrestBuilder:Yw,PostgrestError:Gw}=Sh;function jh(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Nh=jh(),Ch="2.11.15",kh=`realtime-js/${Ch}`,Ph="1.0.0",Pi=1e4,Ah=1e3;var Cn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Cn||(Cn={}));var ce;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ce||(ce={}));var je;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(je||(je={}));var yr;(function(t){t.websocket="websocket"})(yr||(yr={}));var Ct;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ct||(Ct={}));class Eh{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const r=n.getUint8(1),o=n.getUint8(2);let i=this.HEADER_LENGTH+2;const l=s.decode(e.slice(i,i+r));i=i+r;const c=s.decode(e.slice(i,i+o));i=i+o;const u=JSON.parse(s.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Ai{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ne;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ne||(ne={}));const Zo=(t,e,n={})=>{var s;const r=(s=n.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((o,i)=>(o[i]=Oh(i,t,e,r),o),{})},Oh=(t,e,n,s)=>{const r=e.find(l=>l.name===t),o=r==null?void 0:r.type,i=n[t];return o&&!s.includes(o)?Ei(o,i):vr(i)},Ei=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Rh(e,n)}switch(t){case ne.bool:return Th(e);case ne.float4:case ne.float8:case ne.int2:case ne.int4:case ne.int8:case ne.numeric:case ne.oid:return Ih(e);case ne.json:case ne.jsonb:return Mh(e);case ne.timestamp:return Dh(e);case ne.abstime:case ne.date:case ne.daterange:case ne.int4range:case ne.int8range:case ne.money:case ne.reltime:case ne.text:case ne.time:case ne.timestamptz:case ne.timetz:case ne.tsrange:case ne.tstzrange:return vr(e);default:return vr(e)}},vr=t=>t,Th=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Ih=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Mh=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Rh=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let o;const i=t.slice(1,n);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>Ei(e,l))}return t},Dh=t=>typeof t=="string"?t.replace(" ","T"):t,Oi=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Js{constructor(e,n,s={},r=Pi){this.channel=e,this.event=n,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ea;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ea||(ea={}));class kn{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kn.syncState(this.state,r,o,i),this.pendingDiffs.forEach(c=>{this.state=kn.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},r=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=kn.syncDiff(this.state,r,o,i),l())}),this.onJoin((r,o,i)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:o,newPresences:i})}),this.onLeave((r,o,i)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,r){const o=this.cloneDeep(e),i=this.transformState(n),l={},c={};return this.map(o,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const h=o[u];if(h){const m=d.map(v=>v.presence_ref),f=h.map(v=>v.presence_ref),p=d.filter(v=>f.indexOf(v.presence_ref)<0),y=h.filter(v=>m.indexOf(v.presence_ref)<0);p.length>0&&(l[u]=p),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(o,{joins:l,leaves:c},s,r)}static syncDiff(e,n,s,r){const{joins:o,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(o,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(f=>f.presence_ref),m=d.filter(f=>h.indexOf(f.presence_ref)<0);e[l].unshift(...m)}s(l,d,c)}),this.map(i,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,r(l,u,c),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const r=e[s];return"metas"in r?n[s]=r.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[s]=r,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ta;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ta||(ta={}));var na;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(na||(na={}));var ze;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ze||(ze={}));class eo{constructor(e,n={config:{}},s){this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Js(this,je.join,this.params,this.timeout),this.rejoinTimer=new Ai(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ce.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(je.reply,{},(r,o)=>{this._trigger(this._replyEventName(o),r)}),this.presence=new kn(this),this.broadcastEndpointURL=Oi(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==ce.closed){const{config:{broadcast:o,presence:i,private:l}}=this.params;this._onError(d=>e==null?void 0:e(ze.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(ze.CLOSED));const c={},u={broadcast:o,presence:i,postgres_changes:(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(d=>d.filter))!==null&&r!==void 0?r:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(ze.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,f=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,p=[];for(let y=0;y<f;y++){const v=m[y],{filter:{event:w,schema:x,table:b,filter:S}}=v,_=d&&d[y];if(_&&_.event===w&&_.schema===x&&_.table===b&&_.filter===S)p.push(Object.assign(Object.assign({},v),{id:_.id}));else{this.unsubscribe(),this.state=ce.errored,e==null||e(ze.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(ze.SUBSCRIBED);return}}).receive("error",d=>{this.state=ce.errored,e==null||e(ze.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ze.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this._on(e,n,s)}async send(e,n={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ce.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(je.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new Js(this,je.leave,{},e),s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,s){const r=new AbortController,o=setTimeout(()=>r.abort(),s),i=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(o),i}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Js(this,e,n,s);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var r,o;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=je;if(s&&[l,c,u,d].indexOf(i)>=0&&s!==this._joinRef())return;let m=this._onMessage(i,n,s);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(f=>{var p,y,v;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((v=(y=f.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===i}).map(f=>f.callback(m,s)):(o=this.bindings[i])===null||o===void 0||o.filter(f=>{var p,y,v,w,x,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in f){const S=f.id,_=(p=f.filter)===null||p===void 0?void 0:p.event;return S&&((y=n.ids)===null||y===void 0?void 0:y.includes(S))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const S=(x=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return S==="*"||S===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===i}).map(f=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:y,table:v,commit_timestamp:w,type:x,errors:b}=p;m=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:w,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(p))}f.callback(m,s)})}_isClosed(){return this.state===ce.closed}_isJoined(){return this.state===ce.joined}_isJoining(){return this.state===ce.joining}_isLeaving(){return this.state===ce.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const r=e.toLocaleLowerCase(),o={type:r,filter:n,callback:s};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(r=>{var o;return!(((o=r.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&eo.isEqual(r.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(je.close,{},e)}_onError(e){this._on(je.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ce.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Zo(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Zo(e.columns,e.old_record)),n}}const sa=()=>{},Fh=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $h{constructor(e,n){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Pi,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=sa,this.ref=0,this.logger=sa,this.conn=null,this.sendBuffer=[],this.serializer=new Eh,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...l)=>rn(async()=>{const{default:c}=await Promise.resolve().then(()=>on);return{default:c}},void 0).then(({default:c})=>c(...l)):i=fetch,(...l)=>i(...l)},this.endPoint=`${e}/${yr.websocket}`,this.httpEndpoint=Oi(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const r=(s=n==null?void 0:n.params)===null||s===void 0?void 0:s.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,i)=>i(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ai(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Nh),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ph}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Cn.connecting:return Ct.Connecting;case Cn.open:return Ct.Open;case Cn.closing:return Ct.Closing;default:return Ct.Closed}}isConnected(){return this.connectionState()===Ct.Open}channel(e,n={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(o=>o.topic===s);if(r)return r;{const o=new eo(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:s,payload:r,ref:o}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${s} (${o})`,r),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const r={access_token:n,version:kh};n&&s.updateJoinPayload(r),s.joinedOnce&&s._isJoined()&&s._push(je.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Ah,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:s,event:r,payload:o,ref:i}=n;s==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${s} ${r} ${i&&"("+i+")"||""}`,o),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(r,o,i)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(je.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${e}${s}${r}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([Fh],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}}class to extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function le(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Lh extends to{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class xr extends to{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Bh=function(t,e,n,s){function r(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(s.next(d))}catch(h){i(h)}}function c(d){try{u(s.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):r(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const Ti=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>rn(async()=>{const{default:s}=await Promise.resolve().then(()=>on);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},Wh=()=>Bh(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield rn(()=>Promise.resolve().then(()=>on),void 0)).Response:Response}),br=t=>{if(Array.isArray(t))return t.map(n=>br(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const r=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[r]=br(s)}),e};var Mt=function(t,e,n,s){function r(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(s.next(d))}catch(h){i(h)}}function c(d){try{u(s.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):r(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const Xs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Hh=(t,e,n)=>Mt(void 0,void 0,void 0,function*(){const s=yield Wh();t instanceof s&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{e(new Lh(Xs(r),t.status||500))}).catch(r=>{e(new xr(Xs(r),r))}):e(new xr(Xs(t),t))}),Uh=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(r.body=JSON.stringify(s)),Object.assign(Object.assign({},r),n))};function Wn(t,e,n,s,r,o){return Mt(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(n,Uh(e,s,r,o)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Hh(c,l,s))})})}function fs(t,e,n,s){return Mt(this,void 0,void 0,function*(){return Wn(t,"GET",e,n,s)})}function at(t,e,n,s,r){return Mt(this,void 0,void 0,function*(){return Wn(t,"POST",e,s,r,n)})}function qh(t,e,n,s,r){return Mt(this,void 0,void 0,function*(){return Wn(t,"PUT",e,s,r,n)})}function Vh(t,e,n,s){return Mt(this,void 0,void 0,function*(){return Wn(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function Ii(t,e,n,s,r){return Mt(this,void 0,void 0,function*(){return Wn(t,"DELETE",e,s,r,n)})}var ue=function(t,e,n,s){function r(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(s.next(d))}catch(h){i(h)}}function c(d){try{u(s.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):r(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const zh={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ra={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Yh{constructor(e,n={},s,r){this.url=e,this.headers=n,this.bucketId=s,this.fetch=Ti(r)}uploadOrUpdate(e,n,s,r){return ue(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},ra),r);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=s,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:o,headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{})),m=yield h.json();return h.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(o){if(le(o))return{data:null,error:o};throw o}})}upload(e,n,s){return ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,r){return ue(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:ra.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),m=yield h.json();return h.ok?{data:{path:o,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(le(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return ue(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);n!=null&&n.upsert&&(r["x-upsert"]="true");const o=yield at(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new to("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}})}update(e,n,s){return ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return ue(this,void 0,void 0,function*(){try{return{data:yield at(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}})}copy(e,n,s){return ue(this,void 0,void 0,function*(){try{return{data:{path:(yield at(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}})}createSignedUrl(e,n,s){return ue(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),o=yield at(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}})}createSignedUrls(e,n,s){return ue(this,void 0,void 0,function*(){try{const r=yield at(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}})}download(e,n){return ue(this,void 0,void 0,function*(){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=o?`?${o}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield fs(this.fetch,`${this.url}/${r}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(le(l))return{data:null,error:l};throw l}})}info(e){return ue(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield fs(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:br(s),error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}})}exists(e){return ue(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Vh(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(le(s)&&s instanceof xr){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),r=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&r.push(o);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&r.push(c);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${u}`)}}}remove(e){return ue(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}})}list(e,n,s){return ue(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},zh),n),{prefix:e||""});return{data:yield at(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Gh="2.7.1",Kh={"X-Client-Info":`storage-js/${Gh}`};var Rt=function(t,e,n,s){function r(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(s.next(d))}catch(h){i(h)}}function c(d){try{u(s.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):r(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};class Jh{constructor(e,n={},s){this.url=e,this.headers=Object.assign(Object.assign({},Kh),n),this.fetch=Ti(s)}listBuckets(){return Rt(this,void 0,void 0,function*(){try{return{data:yield fs(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(le(e))return{data:null,error:e};throw e}})}getBucket(e){return Rt(this,void 0,void 0,function*(){try{return{data:yield fs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Rt(this,void 0,void 0,function*(){try{return{data:yield at(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return Rt(this,void 0,void 0,function*(){try{return{data:yield qh(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Rt(this,void 0,void 0,function*(){try{return{data:yield at(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Rt(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}})}}class Xh extends Jh{constructor(e,n={},s){super(e,n,s)}from(e){return new Yh(this.url,this.headers,e,this.fetch)}}const Qh="2.50.2";let _n="";typeof Deno<"u"?_n="deno":typeof document<"u"?_n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_n="react-native":_n="node";const Zh={"X-Client-Info":`supabase-js-${_n}/${Qh}`},ef={headers:Zh},tf={schema:"public"},nf={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sf={};var rf=function(t,e,n,s){function r(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(s.next(d))}catch(h){i(h)}}function c(d){try{u(s.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):r(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const of=t=>{let e;return t?e=t:typeof fetch>"u"?e=yi:e=fetch,(...n)=>e(...n)},af=()=>typeof Headers>"u"?vi:Headers,lf=(t,e,n)=>{const s=of(n),r=af();return(o,i)=>rf(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new r(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(o,Object.assign(Object.assign({},i),{headers:u}))})};var cf=function(t,e,n,s){function r(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(s.next(d))}catch(h){i(h)}}function c(d){try{u(s.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):r(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};function df(t){return t.endsWith("/")?t:t+"/"}function uf(t,e){var n,s;const{db:r,auth:o,realtime:i,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,m={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},d),i),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>cf(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const Mi="2.70.0",Bt=30*1e3,wr=3,Qs=wr*Bt,hf="http://localhost:9999",ff="supabase.auth.token",mf={"X-Client-Info":`gotrue-js/${Mi}`},Sr="X-Supabase-Api-Version",Ri={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},pf=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,gf=6e5;class no extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function L(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class yf extends no{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function vf(t){return L(t)&&t.name==="AuthApiError"}class Di extends no{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class pt extends no{constructor(e,n,s,r){super(e,s,r),this.name=n,this.status=s}}class ot extends pt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xf(t){return L(t)&&t.name==="AuthSessionMissingError"}class Qn extends pt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zn extends pt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class es extends pt{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function bf(t){return L(t)&&t.name==="AuthImplicitGrantRedirectError"}class oa extends pt{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _r extends pt{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Zs(t){return L(t)&&t.name==="AuthRetryableFetchError"}class aa extends pt{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class Pn extends pt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ms="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ia=` 	
\r=`.split(""),wf=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ia.length;e+=1)t[ia[e].charCodeAt(0)]=-2;for(let e=0;e<ms.length;e+=1)t[ms[e].charCodeAt(0)]=e;return t})();function la(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(ms[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(ms[s]),e.queuedBits-=6}}function Fi(t,e,n){const s=wf[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function ca(t){const e=[],n=i=>{e.push(String.fromCodePoint(i))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},o=i=>{jf(i,s,n)};for(let i=0;i<t.length;i+=1)Fi(t.charCodeAt(i),r,o);return e.join("")}function Sf(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function _f(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}Sf(s,e)}}function jf(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Nf(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)Fi(t.charCodeAt(r),n,s);return new Uint8Array(e)}function Cf(t){const e=[];return _f(t,n=>e.push(n)),new Uint8Array(e)}function kf(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};return t.forEach(r=>la(r,n,s)),la(null,n,s),e.join("")}function Pf(t){return Math.round(Date.now()/1e3)+t}function Af(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const we=()=>typeof window<"u"&&typeof document<"u",_t={tested:!1,writable:!1},An=()=>{if(!we())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_t.tested)return _t.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),_t.tested=!0,_t.writable=!0}catch{_t.tested=!0,_t.writable=!1}return _t.writable};function Ef(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,o)=>{e[o]=r})}catch{}return n.searchParams.forEach((s,r)=>{e[r]=s}),e}const $i=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>rn(async()=>{const{default:s}=await Promise.resolve().then(()=>on);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},Of=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Li=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ts=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ns=async(t,e)=>{await t.removeItem(e)};class Rs{constructor(){this.promise=new Rs.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Rs.promiseConstructor=Promise;function er(t){const e=t.split(".");if(e.length!==3)throw new Pn("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!pf.test(e[s]))throw new Pn("JWT not in base64url format");return{header:JSON.parse(ca(e[0])),payload:JSON.parse(ca(e[1])),signature:Nf(e[2]),raw:{header:e[0],payload:e[1]}}}async function Tf(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function If(t,e){return new Promise((s,r)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await t(o);if(!e(o,null,i)){s(i);return}}catch(i){if(!e(o,i)){r(i);return}}})()})}function Mf(t){return("0"+t.toString(16)).substr(-2)}function Rf(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let r="";for(let o=0;o<56;o++)r+=n.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,Mf).join("")}async function Df(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(s);return Array.from(r).map(o=>String.fromCharCode(o)).join("")}async function Ff(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Df(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dt(t,e,n=!1){const s=Rf();let r=s;n&&(r+="/PASSWORD_RECOVERY"),await Li(t,`${e}-code-verifier`,r);const o=await Ff(s);return[o,s===o?"plain":"s256"]}const $f=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Lf(t){const e=t.headers.get(Sr);if(!e||!e.match($f))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Bf(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Wf(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Hf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ft(t){if(!Hf.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Uf=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};const jt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),qf=[502,503,504];async function da(t){var e;if(!Of(t))throw new _r(jt(t),0);if(qf.includes(t.status))throw new _r(jt(t),t.status);let n;try{n=await t.json()}catch(o){throw new Di(jt(o),o)}let s;const r=Lf(t);if(r&&r.getTime()>=Ri["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new aa(jt(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new ot}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new aa(jt(n),t.status,n.weak_password.reasons);throw new yf(jt(n),t.status||500,s)}const Vf=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};async function H(t,e,n,s){var r;const o=Object.assign({},s==null?void 0:s.headers);o[Sr]||(o[Sr]=Ri["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const i=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(i.redirect_to=s.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await zf(t,e,n+l,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function zf(t,e,n,s,r,o){const i=Vf(e,s,r,o);let l;try{l=await t(n,Object.assign({},i))}catch(c){throw console.error(c),new _r(jt(c),0)}if(l.ok||await da(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await da(c)}}function qe(t){var e;let n=null;Jf(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Pf(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function ua(t){const e=qe(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function it(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Yf(t){return{data:t,error:null}}function Gf(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:o}=t,i=Uf(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function Kf(t){return t}function Jf(t){return t.access_token&&t.refresh_token&&t.expires_in}const tr=["global","local","others"];var Xf=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};class Qf{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=$i(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=tr[0]){if(tr.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tr.join(", ")}`);try{return await H(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(L(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await H(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:it})}catch(s){if(L(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=Xf(e,["options"]),r=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await H(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Gf,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(L(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await H(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:it})}catch(n){if(L(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,r,o,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await H(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(o=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:""},xform:Kf});if(d.error)throw d.error;const h=await d.json(),m=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,f=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(p.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(L(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Ft(e);try{return await H(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:it})}catch(n){if(L(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ft(e);try{return await H(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:it})}catch(s){if(L(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){Ft(e);try{return await H(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:it})}catch(s){if(L(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Ft(e.userId);try{const{data:n,error:s}=await H(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:s}}catch(n){if(L(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ft(e.userId),Ft(e.id);try{return{data:await H(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(L(n))return{data:null,error:n};throw n}}}const Zf={getItem:t=>An()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{An()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{An()&&globalThis.localStorage.removeItem(t)}};function ha(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function em(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const $t={debug:!!(globalThis&&An()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bi extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class tm extends Bi{}async function nm(t,e,n){$t.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),$t.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){$t.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await n()}finally{$t.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw $t.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new tm(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if($t.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}em();const sm={url:hf,storageKey:ff,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mf,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function fa(t,e,n){return await n()}class Mn{constructor(e){var n,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mn.nextInstanceID,Mn.nextInstanceID+=1,this.instanceID>0&&we()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},sm),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Qf({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=$i(r.fetch),this.lock=r.lock||fa,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:we()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=nm:this.lock=fa,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:An()?this.storage=Zf:(this.memoryStorage={},this.storage=ha(this.memoryStorage)):(this.memoryStorage={},this.storage=ha(this.memoryStorage)),we()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Mi}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Ef(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),we()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:o}=await this._getSessionFromURL(n,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),bf(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return L(n)?{error:n}:{error:new Di("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,r;try{const o=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:qe}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(L(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,s,r;try{let o;if("email"in e){const{email:d,password:h,options:m}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Dt(this.storage,this.storageKey)),o=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:p},xform:qe})}else if("phone"in e){const{phone:d,password:h,options:m}=e;o=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(r=m==null?void 0:m.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:qe})}else throw new Zn("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(L(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:i,options:l}=e;n=await H(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ua})}else if("phone"in e){const{phone:o,password:i,options:l}=e;n=await H(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ua})}else throw new Zn("You must provide either an email or phone number and a password");const{data:s,error:r}=n;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Qn}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(n){if(L(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,s,r,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,s,r,o,i,l,c,u,d,h,m,f;let p,y;if("message"in e)p=e.message,y=e.signature;else{const{chain:v,wallet:w,statement:x,options:b}=e;let S;if(we())if(typeof w=="object")S=w;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))S=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=w}const _=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const j=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),x?{statement:x}:null));let k;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")k=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)k=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)p=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),y=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${_.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(r=(s=b==null?void 0:b.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const j=await S.signMessage(new TextEncoder().encode(p),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=j}}try{const{data:v,error:w}=await H(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:kf(y)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:qe});if(w)throw w;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Qn}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:w})}catch(v){if(L(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const n=await ts(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(n??"").split("/");try{const{data:o,error:i}=await H(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:qe});if(await ns(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Qn}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:r??null}),error:i})}catch(o){if(L(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:s,token:r,access_token:o,nonce:i}=e,l=await H(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:qe}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Qn}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(L(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,s,r,o,i;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Dt(this.storage,this.storageKey));const{error:h}=await H(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await H(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Zn("You must provide either an email or phone number.")}catch(l){if(L(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,s;try{let r,o;"options"in e&&(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:i,error:l}=await H(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:r,xform:qe});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(r){if(L(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var n,s,r;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Dt(this.storage,this.storageKey)),await H(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:Yf})}catch(o){if(L(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new ot;const{error:r}=await H(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(L(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:o}=e,{error:i}=await H(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:s,type:r,options:o}=e,{data:i,error:l}=await H(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new Zn("You must provide either an email or phone number and a type")}catch(n){if(L(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ts(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Qs:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await H(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:it}):await this._useSession(async n=>{var s,r,o;const{data:i,error:l}=n;if(l)throw l;return!(!((s=i.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ot}:await H(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0,xform:it})})}catch(n){if(L(n))return xf(n)&&(await this._removeSession(),await ns(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:r,error:o}=s;if(o)throw o;if(!r.session)throw new ot;const i=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Dt(this.storage,this.storageKey));const{data:u,error:d}=await H(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:it});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(s){if(L(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ot;const n=Date.now()/1e3;let s=n,r=!0,o=null;const{payload:i}=er(e.access_token);if(i.exp&&(s=i.exp,r=s<=n),r){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(L(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:i,error:l}=n;if(l)throw l;e=(s=i.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new ot;const{session:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(L(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!we())throw new es("No browser detected.");if(e.error||e.error_description||e.error_code)throw new es(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new oa("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new es("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new oa("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=e;if(!o||!l||!i||!u)throw new es("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const f=m-d;f*1e3<=Bt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const p=m-h;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,m,d);const{data:y,error:v}=await this._getUser(o);if(v)throw v;const w={provider_token:s,provider_refresh_token:r,access_token:o,expires_in:h,expires_at:m,refresh_token:i,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(s){if(L(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ts(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:r,error:o}=n;if(o)return{error:o};const i=(s=r.session)===null||s===void 0?void 0:s.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(vf(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await ns(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Af(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,r;try{const{data:{session:o},error:i}=n;if(i)throw i;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await Dt(this.storage,this.storageKey,!0));try{return await H(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(L(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(L(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:s,error:r}=await this._useSession(async o=>{var i,l,c,u,d;const{data:h,error:m}=o;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await H(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return we()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(L(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,r;const{data:o,error:i}=n;if(i)throw i;return await H(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(L(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await If(async r=>(r>0&&await Tf(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await H(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:qe})),(r,o)=>{const i=200*Math.pow(2,r);return o&&Zs(o)&&Date.now()+i-s<Bt})}catch(s){if(this._debug(n,"error",s),L(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),we()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await ts(this.storage,this.storageKey);if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const r=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Qs;if(this._debug(n,`session has${r?"":" not"} expired with margin of ${Qs}s`),r){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Zs(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new ot;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Rs;const{data:o,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!o.session)throw new ot;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(r,"error",o),L(o)){const i={session:null,error:o};return Zs(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,n,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Li(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ns(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&we()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Bt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Bt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Bt}ms, refresh threshold is ${wr} ticks`),r<=wr&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Bi)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!we()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const r=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,i]=await Dt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});r.push(l.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);r.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:r,error:o}=n;return o?{data:null,error:o}:await H(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(L(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,r;const{data:o,error:i}=n;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await H(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(L(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:o}=n;if(o)return{data:null,error:o};const{data:i,error:l}=await H(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(n){if(L(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:o}=n;return o?{data:null,error:o}:await H(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(L(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const s=(e==null?void 0:e.factors)||[],r=s.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=s.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:s,totp:r,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,s;const{data:{session:r},error:o}=e;if(o)return{data:null,error:o};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=er(r.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((s=(n=r.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(i=>i.kid===e);if(s||(s=this.jwks.keys.find(i=>i.kid===e),s&&this.jwks_cached_at+gf>Date.now()))return s;const{data:r,error:o}=await H(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!r.keys||r.keys.length===0)throw new Pn("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),s=r.keys.find(i=>i.kid===e),!s)throw new Pn("No matching signing key found in JWKS");return s}async getClaims(e,n={keys:[]}){try{let s=e;if(!s){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};s=f.session.access_token}const{header:r,payload:o,signature:i,raw:{header:l,payload:c}}=er(s);if(Bf(o.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(s);if(f)throw f;return{data:{claims:o,header:r,signature:i},error:null}}const u=Wf(r.alg),d=await this.fetchJwk(r.kid,n),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,i,Cf(`${l}.${c}`)))throw new Pn("Invalid JWT signature");return{data:{claims:o,header:r,signature:i},error:null}}catch(s){if(L(s))return{data:null,error:s};throw s}}}Mn.nextInstanceID=0;const rm=Mn;class om extends rm{constructor(e){super(e)}}var am=function(t,e,n,s){function r(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(s.next(d))}catch(h){i(h)}}function c(d){try{u(s.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):r(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};class im{constructor(e,n,s){var r,o,i;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=df(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:tf,realtime:sf,auth:Object.assign(Object.assign({},nf),{storageKey:u}),global:ef},h=uf(s??{},d);this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=h.auth)!==null&&i!==void 0?i:{},this.headers,h.global.fetch),this.fetch=lf(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new _h(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Zu(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Xh(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return am(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:r,storageKey:o,flowType:i,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new om({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:r,flowType:i,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new $h(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lm=(t,e,n)=>new im(t,e,n),jr="https://jofuqlexuxzamltxxzuq.supabase.co",Nr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpvZnVxbGV4dXh6YW1sdHh4enVxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxMDA2NjAsImV4cCI6MjA2NDY3NjY2MH0.Fq_Sx7NUeZF2k-erwrj_V-2npReXum9Cmuufsco3Cmw",cm=async(t=5e3)=>{try{const e=new AbortController,n=setTimeout(()=>e.abort(),t);if((await fetch(`${jr}/auth/v1/health`,{method:"GET",signal:e.signal,cache:"no-cache"})).ok)return clearTimeout(n),console.log("Supabase Auth health check: SUCCESS"),!0;const r=new AbortController,o=setTimeout(()=>r.abort(),t),i=await fetch(`${jr}/rest/v1/`,{method:"OPTIONS",signal:r.signal,cache:"no-cache",headers:{apikey:Nr,Authorization:`Bearer ${Nr}`}});clearTimeout(o);const l=i.ok;return console.log(`Supabase REST preflight connectivity: ${l?"SUCCESS":"FAILED"} (status: ${i.status})`),l}catch(e){return console.error("Supabase availability check failed:",e),!1}},Ds=lm(jr,Nr),Yt=async()=>await cm();function Wi(){window.addEventListener("online",()=>console.log("🔌 Online")),window.addEventListener("offline",()=>console.log("❌ Offline"))}const dm=Object.freeze(Object.defineProperty({__proto__:null,checkServerConnectivity:Yt,initConnectivityMonitoring:Wi},Symbol.toStringTag,{value:"Module"})),so=()=>{const[t,e]=g.useState(navigator.onLine);return g.useEffect(()=>{const n=async()=>{console.log("Browser came online, checking server connectivity...");const r=await Yt();e(r)},s=()=>{console.log("Browser went offline"),e(!1)};return Yt().then(e),window.addEventListener("online",n),window.addEventListener("offline",s),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}},[]),{isOnline:t}},um=async()=>{console.log("Testing Supabase connection via health/preflight checks...");const t=await Yt();return t?console.log("Supabase connection test successful"):console.error("Supabase connection test failed"),t},Hi=async(t,e)=>{try{const n=e?"form_drafts":"consent_forms",{data:s,error:r}=await Ds.from(n).insert([{patient_name:t.patientName,age:t.age?parseInt(t.age):null,birth_date:t.birthDate,id_number:t.idNumber,marital_status:t.maritalStatus,gender:t.gender,employer_school:t.employerSchool,occupation_grade:t.occupationGrade,cell_phone:t.cellPhone,whatsapp_number:t.whatsappNumber,same_as_contact_number:t.sameAsContactNumber||!1,email:t.email,address:t.address,postal_code:t.postalCode,responsible_for_payment:t.responsibleForPayment||"",account_holder_name:t.accountHolderName,account_holder_age:t.accountHolderAge?parseInt(t.accountHolderAge):null,emergency_name:t.emergencyName||"",emergency_relationship:t.emergencyRelationship||"",emergency_phone:t.emergencyPhone||"",gp_name:t.gpName,gp_contact:t.gpContact,chronic_conditions:Array.isArray(t.chronicConditions)?t.chronicConditions:[],allergies:t.allergies||"",medication:t.medication||"",payment_preference:t.paymentPreference,medical_aid_name:t.medicalAidName,medical_aid_no:t.medicalAidNo,medical_aid_plan:t.medicalAidPlan,main_member:t.mainMember,dependant_code:t.dependantCode,signature:t.signature||"",region_code:t.regionCode||"",doctor:t.doctor,practice_number:t.practiceNumber,consent_agreement:e?t.consentAgreement||!1:!0,status:e?"draft":"completed",encrypted:!0,timestamp:new Date().toISOString(),last_modified:new Date().toISOString()}]).select().single();if(r)throw console.error("Error saving form to Supabase:",r),new Error(`Failed to save form: ${r.message}`);return{...t,id:s.id,timestamp:s.timestamp,lastModified:s.last_modified}}catch(n){throw console.error("Save form error:",n),n}},hm=async(t,e,n)=>{try{const s=n?"form_drafts":"consent_forms",{data:r,error:o}=await Ds.from(s).update({patient_name:e.patientName,age:e.age?parseInt(e.age):null,birth_date:e.birthDate,id_number:e.idNumber,marital_status:e.maritalStatus,gender:e.gender,employer_school:e.employerSchool,occupation_grade:e.occupationGrade,cell_phone:e.cellPhone,whatsapp_number:e.whatsappNumber,same_as_contact_number:e.sameAsContactNumber||!1,email:e.email,address:e.address,postal_code:e.postalCode,responsible_for_payment:e.responsibleForPayment||"",account_holder_name:e.accountHolderName,account_holder_age:e.accountHolderAge?parseInt(e.accountHolderAge):null,emergency_name:e.emergencyName||"",emergency_relationship:e.emergencyRelationship||"",emergency_phone:e.emergencyPhone||"",gp_name:e.gpName,gp_contact:e.gpContact,chronic_conditions:Array.isArray(e.chronicConditions)?e.chronicConditions:[],allergies:e.allergies||"",medication:e.medication||"",payment_preference:e.paymentPreference,medical_aid_name:e.medicalAidName,medical_aid_no:e.medicalAidNo,medical_aid_plan:e.medicalAidPlan,main_member:e.mainMember,dependant_code:e.dependantCode,signature:e.signature||"",region_code:e.regionCode||"",doctor:e.doctor,practice_number:e.practiceNumber,consent_agreement:n?e.consentAgreement||!1:!0,status:n?"draft":"completed",last_modified:new Date().toISOString()}).eq("id",t).select().single();if(o)throw console.error("Error updating form in Supabase:",o),new Error(`Failed to update form: ${o.message}`);return{...e,id:r.id,timestamp:r.timestamp,lastModified:r.last_modified}}catch(s){throw console.error("Update form error:",s),s}},Ui=async t=>{try{const e=t?"form_drafts":"consent_forms",{data:n,error:s}=await Ds.from(e).select("*").order("created_at",{ascending:!1});if(s)throw console.error("Error fetching forms from Supabase:",s),new Error(`Failed to fetch forms: ${s.message}`);return(n||[]).map(r=>{var o,i;return{id:r.id,patientName:r.patient_name,age:(o=r.age)==null?void 0:o.toString(),birthDate:r.birth_date,idNumber:r.id_number,maritalStatus:r.marital_status,gender:r.gender,employerSchool:r.employer_school,occupationGrade:r.occupation_grade,cellPhone:r.cell_phone,whatsappNumber:r.whatsapp_number,sameAsContactNumber:r.same_as_contact_number||!1,email:r.email,address:r.address,postalCode:r.postal_code,responsibleForPayment:r.responsible_for_payment,accountHolderName:r.account_holder_name,accountHolderAge:(i=r.account_holder_age)==null?void 0:i.toString(),emergencyName:r.emergency_name,emergencyRelationship:r.emergency_relationship,emergencyPhone:r.emergency_phone,gpName:r.gp_name,gpContact:r.gp_contact,chronicConditions:Array.isArray(r.chronic_conditions)?r.chronic_conditions.map(l=>String(l)):r.chronic_conditions?[String(r.chronic_conditions)]:[],allergies:r.allergies,medication:r.medication,paymentPreference:r.payment_preference,medicalAidName:r.medical_aid_name,medicalAidNo:r.medical_aid_no,medicalAidPlan:r.medical_aid_plan,mainMember:r.main_member,dependantCode:r.dependant_code,signature:r.signature,regionCode:r.region_code,doctor:r.doctor,practiceNumber:r.practice_number,consentAgreement:r.consent_agreement,status:r.status,timestamp:r.timestamp,lastModified:r.last_modified,createdAt:r.created_at}})}catch(e){throw console.error("Get forms error:",e),e}},fm=async(t,e)=>{try{const n=e?"form_drafts":"consent_forms",{error:s}=await Ds.from(n).delete().eq("id",t);if(s)throw console.error("Error deleting form from Supabase:",s),new Error(`Failed to delete form: ${s.message}`)}catch(n){throw console.error("Delete form error:",n),n}},mm=async()=>{try{if(!window.indexedDB)return!1;const t=window.indexedDB.open("test",1);return new Promise(e=>{t.onsuccess=()=>{t.result.close(),e(!0)},t.onerror=()=>e(!1)})}catch{return!1}};let At={supabase:!1,indexedDB:!1};const ma=async()=>{try{const[t,e]=await Promise.all([um(),mm()]);return At={supabase:t,indexedDB:e},console.log("Storage capabilities initialized:",At),At}catch(t){return console.error("Error initializing storage:",t),At}},Fs=()=>({...At}),En=t=>{At={...At,...t}},pm="consentFormDB",gm=2,Gt="forms",Fe="drafts",ln=()=>new Promise((t,e)=>{const n=indexedDB.open(pm,gm);n.onerror=()=>{e(new Error("Failed to open IndexedDB"))},n.onsuccess=()=>{const s=n.result;t(s)},n.onupgradeneeded=s=>{const r=s.target.result;if(!r.objectStoreNames.contains(Gt)){const o=r.createObjectStore(Gt,{keyPath:"id",autoIncrement:!0});o.createIndex("timestamp","timestamp",{unique:!1}),o.createIndex("synced","synced",{unique:!1}),o.createIndex("regionCode","regionCode",{unique:!1}),o.createIndex("status","status",{unique:!1})}if(!r.objectStoreNames.contains(Fe)){const o=r.createObjectStore(Fe,{keyPath:"id",autoIncrement:!0});o.createIndex("lastModified","lastModified",{unique:!1}),o.createIndex("regionCode","regionCode",{unique:!1})}}}),ym=async t=>{const s=(await ln()).transaction([Gt],"readwrite").objectStore(Gt);return await new Promise((o,i)=>{const l=s.add(t);l.onsuccess=()=>o(l.result),l.onerror=()=>i(l.error)})},qi=async()=>{const n=(await ln()).transaction([Gt],"readonly").objectStore(Gt);return new Promise((s,r)=>{const o=n.getAll();o.onsuccess=()=>s(o.result),o.onerror=()=>r(o.error)})},vm=async t=>{const s=(await ln()).transaction([Fe],"readwrite").objectStore(Fe);return await new Promise((o,i)=>{const l=s.add(t);l.onsuccess=()=>o(l.result),l.onerror=()=>i(l.error)})},Cr=async()=>{const n=(await ln()).transaction([Fe],"readonly").objectStore(Fe);return new Promise((s,r)=>{const o=n.getAll();o.onsuccess=()=>s(o.result),o.onerror=()=>r(o.error)})},xm=async t=>{const s=(await ln()).transaction([Fe],"readwrite").objectStore(Fe);return new Promise((r,o)=>{const i=s.delete(t);i.onsuccess=()=>r(),i.onerror=()=>o(i.error)})},pa=async(t,e)=>{const r=(await ln()).transaction([Fe],"readwrite").objectStore(Fe);return new Promise((o,i)=>{const l=r.put({...e,id:t});l.onsuccess=()=>o(),l.onerror=()=>i(l.error)})},bm=async(t,e=!1)=>{const n=Fs();let s=null,r=null;if(e&&(t.patientName||t.idNumber)&&n.indexedDB)try{const i=(await Cr()).find(l=>t.patientName&&l.patientName===t.patientName||t.idNumber&&l.idNumber===t.idNumber);if(i&&i.id!==t.id){const l={...i,...t,id:i.id};return await pa(i.id,l),console.log("Updated existing draft to prevent duplicate"),l}}catch(o){console.error("Error checking for duplicate drafts:",o)}if(e&&t.id){if(n.indexedDB)try{if((await Cr()).find(l=>l.id===t.id))return await pa(t.id,t),r={...t},console.log("Updated existing draft in IndexedDB"),r}catch(o){console.error("IndexedDB update failed:",o)}if(n.supabase&&!e)try{if((await Ui(!1)).find(l=>l.id===t.id))return s=await hm(t.id,t,e),console.log("Updated existing form in Supabase"),s}catch(o){console.error("Supabase update check failed:",o),En({supabase:!1})}}if(!e&&n.supabase)try{return s=await Hi(t,e),console.log("Form saved to Supabase successfully"),s}catch(o){console.error("Supabase save failed, trying IndexedDB:",o),En({supabase:!1})}if(n.indexedDB)try{const o=e?await vm(t):await ym(t);return r={...t,id:o},console.log(`${e?"Draft":"Form"} saved to IndexedDB`),r}catch(o){console.error("IndexedDB save also failed:",o),En({indexedDB:!1})}throw new Error("All storage methods failed")},wm=async(t=!1)=>{const e=Fs();if(!t&&e.supabase)try{const n=await Ui(t);return console.log(`Retrieved ${n.length} forms from Supabase`),n}catch(n){console.error("Supabase fetch failed, trying IndexedDB:",n),En({supabase:!1})}if(e.indexedDB)try{const n=t?await Cr():await qi();return console.log(`Retrieved ${n.length} ${t?"drafts":"forms"} from IndexedDB`),n}catch(n){console.error("IndexedDB fetch also failed:",n),En({indexedDB:!1})}return console.warn("No storage methods available, returning empty array"),[]},Sm=async(t,e=!1)=>{const n=Fs();let s=!1,r=!1,o=null;if(console.log(`Attempting to delete ${e?"draft":"form"} with ID:`,t,typeof t),!e&&n.supabase&&typeof t=="string")try{await fm(t,e),s=!0,console.log("Form deleted from Supabase")}catch(i){console.error("Supabase delete failed:",i),o=i}if(n.indexedDB)try{const i=typeof t=="string"?parseInt(t,10):t;if(isNaN(i))throw new Error(`Invalid ID for IndexedDB deletion: ${t}`);e?(await xm(i),r=!0,console.log(`Draft deleted from IndexedDB with ID: ${i}`)):(console.warn("Delete completed form from IndexedDB not fully implemented"),r=!0)}catch(i){console.error("IndexedDB delete failed:",i),o=i}if(!s&&!r)throw o||new Error("Failed to delete form from all storage methods")},_m=async()=>{const t=Fs();if(!t.indexedDB||!t.supabase)return console.log("Sync skipped: required storage not available"),{success:0,failed:0,syncedForms:[]};const e={success:0,failed:0},n=[];try{console.log("Starting sync of completed forms only (drafts will remain local)");const r=(await qi()).filter(o=>!o.synced&&o.status!=="draft");console.log(`Found ${r.length} unsynced completed forms to sync`);for(const o of r)try{await Hi(o,!1),e.success++,n.push(o),console.log(`Successfully synced completed form: ${o.id}`)}catch(i){console.error("Failed to sync completed form:",o.id,i),e.failed++}console.log(`Sync completed: ${e.success} success, ${e.failed} failed`),console.log("Note: Draft forms were not synced and remain local-only")}catch(s){console.error("Sync process error:",s)}return{...e,syncedForms:n}},jm=1,Nm=1e6;let nr=0;function Cm(){return nr=(nr+1)%Number.MAX_SAFE_INTEGER,nr.toString()}const sr=new Map,ga=t=>{if(sr.has(t))return;const e=setTimeout(()=>{sr.delete(t),On({type:"REMOVE_TOAST",toastId:t})},Nm);sr.set(t,e)},km=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,jm)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?ga(n):t.toasts.forEach(s=>{ga(s.id)}),{...t,toasts:t.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},as=[];let is={toasts:[]};function On(t){is=km(is,t),as.forEach(e=>{e(is)})}function Pm({...t}){const e=Cm(),n=r=>On({type:"UPDATE_TOAST",toast:{...r,id:e}}),s=()=>On({type:"DISMISS_TOAST",toastId:e});return On({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:r=>{r||s()}}}),{id:e,dismiss:s,update:n}}function gt(){const[t,e]=g.useState(is);return g.useEffect(()=>(as.push(e),()=>{const n=as.indexOf(e);n>-1&&as.splice(n,1)}),[t]),{...t,toast:Pm,dismiss:n=>On({type:"DISMISS_TOAST",toastId:n})}}const Hn=()=>{const[t,e]=g.useState(!1),[n,s]=g.useState({supabase:!1,indexedDB:!1}),[r,o]=g.useState(navigator.onLine),{toast:i}=gt();g.useEffect(()=>{(async()=>{try{const m=await ma();s(m),e(!0),!m.supabase&&!m.indexedDB?i({title:"Storage Warning",description:"No storage methods available. Data may be lost.",variant:"destructive"}):m.supabase||i({title:"Offline Mode",description:"Using local storage only. Data will sync when online.",variant:"default"})}catch(m){console.error("Storage initialization failed:",m),i({title:"Storage Error",description:"Failed to initialize storage systems.",variant:"destructive"})}})()},[i]),g.useEffect(()=>{const h=async()=>{o(!0);const f=await ma();if(s(f),f.supabase){i({title:"Back Online",description:"Connected to cloud storage. Syncing data..."});try{const p=await d();p.success>0&&i({title:"Sync Complete",description:`Successfully synced ${p.success} items.`})}catch(p){console.error("Auto-sync failed:",p)}}},m=()=>{o(!1),s(f=>({...f,supabase:!1})),i({title:"Offline Mode",description:"Using local storage only."})};return window.addEventListener("online",h),window.addEventListener("offline",m),()=>{window.removeEventListener("online",h),window.removeEventListener("offline",m)}},[i]);const l=async(h,m=!1)=>{try{const f=await bm(h,m);return!n.supabase&&n.indexedDB&&i({title:"Saved Locally",description:"Data saved to local storage. Will sync when online."}),f}catch(f){throw console.error("Save failed:",f),i({title:"Save Failed",description:"Unable to save form data.",variant:"destructive"}),f}},c=async(h=!1)=>{try{return await wm(h)}catch(m){return console.error("Get forms failed:",m),i({title:"Load Failed",description:"Unable to load form data.",variant:"destructive"}),[]}},u=async(h,m=!1)=>{try{await Sm(h,m),i({title:"Deleted",description:"Form deleted successfully."})}catch(f){throw console.error("Delete failed:",f),i({title:"Delete Failed",description:"Unable to delete form.",variant:"destructive"}),f}},d=async()=>{try{return await _m()}catch(h){return console.error("Sync failed:",h),i({title:"Sync Failed",description:"Unable to sync data to cloud storage.",variant:"destructive"}),{success:0,failed:0,syncedForms:[]}}};return{isInitialized:t,capabilities:n,saveForm:l,getForms:c,deleteForm:u,syncData:d,isOnline:r}},Un=Va,Am=za,Em=qa,Vi=g.forwardRef(({className:t,...e},n)=>a.jsx(Ur,{ref:n,className:D("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));Vi.displayName=Ur.displayName;const cn=g.forwardRef(({className:t,children:e,...n},s)=>a.jsxs(Em,{children:[a.jsx(Vi,{}),a.jsxs(qr,{ref:s,className:D("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,a.jsxs(Vr,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(hu,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));cn.displayName=qr.displayName;const dn=({className:t,...e})=>a.jsx("div",{className:D("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});dn.displayName="DialogHeader";const un=g.forwardRef(({className:t,...e},n)=>a.jsx(zr,{ref:n,className:D("text-lg font-semibold leading-none tracking-tight",t),...e}));un.displayName=zr.displayName;const ro=g.forwardRef(({className:t,...e},n)=>a.jsx(Yr,{ref:n,className:D("text-sm text-muted-foreground",t),...e}));ro.displayName=Yr.displayName;const Om=({onRefresh:t,size:e="default"})=>a.jsxs(U,{onClick:t,variant:"outline",size:e,children:[a.jsx(lt,{className:"w-4 h-4 mr-2"}),"Refresh"]}),Tm=({onRefresh:t})=>a.jsx(dn,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(un,{className:"text-xl font-bold text-gray-900",children:"Form Management Center"}),a.jsx(ro,{className:"text-sm text-gray-500",children:"Manage saved drafts, monitor submission queue, and handle pending forms"})]}),a.jsx(Om,{onRefresh:t,size:"sm"})]})});function Im(t,e=[]){let n=[];function s(o,i){const l=g.createContext(i),c=n.length;n=[...n,i];function u(h){const{scope:m,children:f,...p}=h,y=(m==null?void 0:m[t][c])||l,v=g.useMemo(()=>p,Object.values(p));return a.jsx(y.Provider,{value:v,children:f})}function d(h,m){const f=(m==null?void 0:m[t][c])||l,p=g.useContext(f);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,d]}const r=()=>{const o=n.map(i=>g.createContext(i));return function(l){const c=(l==null?void 0:l[t])||o;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return r.scopeName=t,[s,Mm(r,...e)]}function Mm(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const i=s.reduce((l,{useScope:c,scopeName:u})=>{const h=c(o)[`__scope${u}`];return{...l,...h}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}function zi(t){const e=t+"CollectionProvider",[n,s]=Im(e),[r,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),i=f=>{const{scope:p,children:y}=f,v=Ve.useRef(null),w=Ve.useRef(new Map).current;return a.jsx(r,{scope:p,itemMap:w,collectionRef:v,children:y})};i.displayName=e;const l=t+"CollectionSlot",c=Ve.forwardRef((f,p)=>{const{scope:y,children:v}=f,w=o(l,y),x=ie(p,w.collectionRef);return a.jsx(Tn,{ref:x,children:v})});c.displayName=l;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=Ve.forwardRef((f,p)=>{const{scope:y,children:v,...w}=f,x=Ve.useRef(null),b=ie(p,x),S=o(u,y);return Ve.useEffect(()=>(S.itemMap.set(x,{ref:x,...w}),()=>void S.itemMap.delete(x))),a.jsx(Tn,{[d]:"",ref:b,children:v})});h.displayName=u;function m(f){const p=o(t+"CollectionConsumer",f);return Ve.useCallback(()=>{const v=p.collectionRef.current;if(!v)return[];const w=Array.from(v.querySelectorAll(`[${d}]`));return Array.from(p.itemMap.values()).sort((S,_)=>w.indexOf(S.ref.current)-w.indexOf(_.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:i,Slot:c,ItemSlot:h},m,s]}function Rm(t,e=[]){let n=[];function s(o,i){const l=g.createContext(i),c=n.length;n=[...n,i];function u(h){const{scope:m,children:f,...p}=h,y=(m==null?void 0:m[t][c])||l,v=g.useMemo(()=>p,Object.values(p));return a.jsx(y.Provider,{value:v,children:f})}function d(h,m){const f=(m==null?void 0:m[t][c])||l,p=g.useContext(f);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,d]}const r=()=>{const o=n.map(i=>g.createContext(i));return function(l){const c=(l==null?void 0:l[t])||o;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return r.scopeName=t,[s,Dm(r,...e)]}function Dm(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const i=s.reduce((l,{useScope:c,scopeName:u})=>{const h=c(o)[`__scope${u}`];return{...l,...h}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var Fm=g.createContext(void 0);function oo(t){const e=g.useContext(Fm);return t||e||"ltr"}var rr="rovingFocusGroup.onEntryFocus",$m={bubbles:!1,cancelable:!0},$s="RovingFocusGroup",[kr,Yi,Lm]=zi($s),[Bm,Gi]=Rm($s,[Lm]),[Wm,Hm]=Bm($s),Ki=g.forwardRef((t,e)=>a.jsx(kr.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(kr.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Um,{...t,ref:e})})}));Ki.displayName=$s;var Um=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:r=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,m=g.useRef(null),f=ie(e,m),p=oo(o),[y=null,v]=Vt({prop:i,defaultProp:l,onChange:c}),[w,x]=g.useState(!1),b=Gr(u),S=Yi(n),_=g.useRef(!1),[j,k]=g.useState(0);return g.useEffect(()=>{const A=m.current;if(A)return A.addEventListener(rr,b),()=>A.removeEventListener(rr,b)},[b]),a.jsx(Wm,{scope:n,orientation:s,dir:p,loop:r,currentTabStopId:y,onItemFocus:g.useCallback(A=>v(A),[v]),onItemShiftTab:g.useCallback(()=>x(!0),[]),onFocusableItemAdd:g.useCallback(()=>k(A=>A+1),[]),onFocusableItemRemove:g.useCallback(()=>k(A=>A-1),[]),children:a.jsx(J.div,{tabIndex:w||j===0?-1:0,"data-orientation":s,...h,ref:f,style:{outline:"none",...t.style},onMouseDown:V(t.onMouseDown,()=>{_.current=!0}),onFocus:V(t.onFocus,A=>{const P=!_.current;if(A.target===A.currentTarget&&P&&!w){const I=new CustomEvent(rr,$m);if(A.currentTarget.dispatchEvent(I),!I.defaultPrevented){const O=S().filter(T=>T.focusable),E=O.find(T=>T.active),W=O.find(T=>T.id===y),Y=[E,W,...O].filter(Boolean).map(T=>T.ref.current);Qi(Y,d)}}_.current=!1}),onBlur:V(t.onBlur,()=>x(!1))})})}),Ji="RovingFocusGroupItem",Xi=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:r=!1,tabStopId:o,...i}=t,l=tn(),c=o||l,u=Hm(Ji,n),d=u.currentTabStopId===c,h=Yi(n),{onFocusableItemAdd:m,onFocusableItemRemove:f}=u;return g.useEffect(()=>{if(s)return m(),()=>f()},[s,m,f]),a.jsx(kr.ItemSlot,{scope:n,id:c,focusable:s,active:r,children:a.jsx(J.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...i,ref:e,onMouseDown:V(t.onMouseDown,p=>{s?u.onItemFocus(c):p.preventDefault()}),onFocus:V(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:V(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){u.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const y=zm(p,u.orientation,u.dir);if(y!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let w=h().filter(x=>x.focusable).map(x=>x.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const x=w.indexOf(p.currentTarget);w=u.loop?Ym(w,x+1):w.slice(x+1)}setTimeout(()=>Qi(w))}})})})});Xi.displayName=Ji;var qm={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Vm(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function zm(t,e,n){const s=Vm(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return qm[s]}function Qi(t,e=!1){const n=document.activeElement;for(const s of t)if(s===n||(s.focus({preventScroll:e}),document.activeElement!==n))return}function Ym(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var Gm=Ki,Km=Xi,ao="Tabs",[Jm,Kw]=Ln(ao,[Gi]),Zi=Gi(),[Xm,io]=Jm(ao),el=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:s,onValueChange:r,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=oo(l),[h,m]=Vt({prop:s,onChange:r,defaultProp:o});return a.jsx(Xm,{scope:n,baseId:tn(),value:h,onValueChange:m,orientation:i,dir:d,activationMode:c,children:a.jsx(J.div,{dir:d,"data-orientation":i,...u,ref:e})})});el.displayName=ao;var tl="TabsList",nl=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:s=!0,...r}=t,o=io(tl,n),i=Zi(n);return a.jsx(Gm,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:s,children:a.jsx(J.div,{role:"tablist","aria-orientation":o.orientation,...r,ref:e})})});nl.displayName=tl;var sl="TabsTrigger",rl=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:s,disabled:r=!1,...o}=t,i=io(sl,n),l=Zi(n),c=il(i.baseId,s),u=ll(i.baseId,s),d=s===i.value;return a.jsx(Km,{asChild:!0,...l,focusable:!r,active:d,children:a.jsx(J.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:c,...o,ref:e,onMouseDown:V(t.onMouseDown,h=>{!r&&h.button===0&&h.ctrlKey===!1?i.onValueChange(s):h.preventDefault()}),onKeyDown:V(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(s)}),onFocus:V(t.onFocus,()=>{const h=i.activationMode!=="manual";!d&&!r&&h&&i.onValueChange(s)})})})});rl.displayName=sl;var ol="TabsContent",al=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:s,forceMount:r,children:o,...i}=t,l=io(ol,n),c=il(l.baseId,s),u=ll(l.baseId,s),d=s===l.value,h=g.useRef(d);return g.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(_s,{present:r||d,children:({present:m})=>a.jsx(J.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...i,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&o})})});al.displayName=ol;function il(t,e){return`${t}-trigger-${e}`}function ll(t,e){return`${t}-content-${e}`}var Qm=el,cl=nl,dl=rl,ul=al;const Zm=Qm,hl=g.forwardRef(({className:t,...e},n)=>a.jsx(cl,{ref:n,className:D("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));hl.displayName=cl.displayName;const ls=g.forwardRef(({className:t,...e},n)=>a.jsx(dl,{ref:n,className:D("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));ls.displayName=dl.displayName;const cs=g.forwardRef(({className:t,...e},n)=>a.jsx(ul,{ref:n,className:D("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));cs.displayName=ul.displayName;function fl(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function ml(t){const[e,n]=g.useState(void 0);return Ce(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const o=r[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=t.offsetWidth,l=t.offsetHeight;n({width:i,height:l})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}var lo="Checkbox",[ep,Jw]=Ln(lo),[tp,np]=ep(lo),pl=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:s,checked:r,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[m,f]=g.useState(null),p=ie(e,S=>f(S)),y=g.useRef(!1),v=m?d||!!m.closest("form"):!0,[w=!1,x]=Vt({prop:r,defaultProp:o,onChange:u}),b=g.useRef(w);return g.useEffect(()=>{const S=m==null?void 0:m.form;if(S){const _=()=>x(b.current);return S.addEventListener("reset",_),()=>S.removeEventListener("reset",_)}},[m,x]),a.jsxs(tp,{scope:n,state:w,disabled:l,children:[a.jsx(J.button,{type:"button",role:"checkbox","aria-checked":ct(w)?"mixed":w,"aria-required":i,"data-state":vl(w),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:p,onKeyDown:V(t.onKeyDown,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:V(t.onClick,S=>{x(_=>ct(_)?!0:!_),v&&(y.current=S.isPropagationStopped(),y.current||S.stopPropagation())})}),v&&a.jsx(sp,{control:m,bubbles:!y.current,name:s,value:c,checked:w,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"},defaultChecked:ct(o)?!1:o})]})});pl.displayName=lo;var gl="CheckboxIndicator",yl=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:s,...r}=t,o=np(gl,n);return a.jsx(_s,{present:s||ct(o.state)||o.state===!0,children:a.jsx(J.span,{"data-state":vl(o.state),"data-disabled":o.disabled?"":void 0,...r,ref:e,style:{pointerEvents:"none",...t.style}})})});yl.displayName=gl;var sp=t=>{const{control:e,checked:n,bubbles:s=!0,defaultChecked:r,...o}=t,i=g.useRef(null),l=fl(n),c=ml(e);g.useEffect(()=>{const d=i.current,h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&f){const p=new Event("click",{bubbles:s});d.indeterminate=ct(n),f.call(d,ct(n)?!1:n),d.dispatchEvent(p)}},[l,n,s]);const u=g.useRef(ct(n)?!1:n);return a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r??u.current,...o,tabIndex:-1,ref:i,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ct(t){return t==="indeterminate"}function vl(t){return ct(t)?"indeterminate":t?"checked":"unchecked"}var xl=pl,rp=yl;const _e=g.forwardRef(({className:t,...e},n)=>a.jsx(xl,{ref:n,className:D("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:a.jsx(rp,{className:D("flex items-center justify-center text-current"),children:a.jsx(ri,{className:"h-4 w-4"})})}));_e.displayName=xl.displayName;var bl="AlertDialog",[op,Xw]=Ln(bl,[Ya]),et=Ya(),wl=t=>{const{__scopeAlertDialog:e,...n}=t,s=et(e);return a.jsx(Va,{...s,...n,modal:!0})};wl.displayName=bl;var ap="AlertDialogTrigger",Sl=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,r=et(n);return a.jsx(za,{...r,...s,ref:e})});Sl.displayName=ap;var ip="AlertDialogPortal",_l=t=>{const{__scopeAlertDialog:e,...n}=t,s=et(e);return a.jsx(qa,{...s,...n})};_l.displayName=ip;var lp="AlertDialogOverlay",jl=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,r=et(n);return a.jsx(Ur,{...r,...s,ref:e})});jl.displayName=lp;var Ut="AlertDialogContent",[cp,dp]=op(Ut),Nl=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:s,...r}=t,o=et(n),i=g.useRef(null),l=ie(e,i),c=g.useRef(null);return a.jsx(zd,{contentName:Ut,titleName:Cl,docsSlug:"alert-dialog",children:a.jsx(cp,{scope:n,cancelRef:c,children:a.jsxs(qr,{role:"alertdialog",...o,...r,ref:l,onOpenAutoFocus:V(r.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(Yd,{children:s}),a.jsx(hp,{contentRef:i})]})})})});Nl.displayName=Ut;var Cl="AlertDialogTitle",kl=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,r=et(n);return a.jsx(zr,{...r,...s,ref:e})});kl.displayName=Cl;var Pl="AlertDialogDescription",Al=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,r=et(n);return a.jsx(Yr,{...r,...s,ref:e})});Al.displayName=Pl;var up="AlertDialogAction",El=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,r=et(n);return a.jsx(Vr,{...r,...s,ref:e})});El.displayName=up;var Ol="AlertDialogCancel",Tl=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,{cancelRef:r}=dp(Ol,n),o=et(n),i=ie(e,r);return a.jsx(Vr,{...o,...s,ref:i})});Tl.displayName=Ol;var hp=({contentRef:t})=>{const e=`\`${Ut}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ut}\` by passing a \`${Pl}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ut}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{var s;document.getElementById((s=t.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},fp=wl,mp=Sl,pp=_l,Il=jl,Ml=Nl,Rl=El,Dl=Tl,Fl=kl,$l=Al;const Ll=fp,Bl=mp,gp=pp,Wl=g.forwardRef(({className:t,...e},n)=>a.jsx(Il,{className:D("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Wl.displayName=Il.displayName;const co=g.forwardRef(({className:t,...e},n)=>a.jsxs(gp,{children:[a.jsx(Wl,{}),a.jsx(Ml,{ref:n,className:D("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));co.displayName=Ml.displayName;const uo=({className:t,...e})=>a.jsx("div",{className:D("flex flex-col space-y-2 text-center sm:text-left",t),...e});uo.displayName="AlertDialogHeader";const ho=({className:t,...e})=>a.jsx("div",{className:D("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ho.displayName="AlertDialogFooter";const fo=g.forwardRef(({className:t,...e},n)=>a.jsx(Fl,{ref:n,className:D("text-lg font-semibold",t),...e}));fo.displayName=Fl.displayName;const mo=g.forwardRef(({className:t,...e},n)=>a.jsx($l,{ref:n,className:D("text-sm text-muted-foreground",t),...e}));mo.displayName=$l.displayName;const po=g.forwardRef(({className:t,...e},n)=>a.jsx(Rl,{ref:n,className:D(In(),t),...e}));po.displayName=Rl.displayName;const go=g.forwardRef(({className:t,...e},n)=>a.jsx(Dl,{ref:n,className:D(In({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));go.displayName=Dl.displayName;const yp=({totalDrafts:t,selectedCount:e,isSelectAll:n,onToggleSelectAll:s,onBulkDelete:r,isBulkDeleting:o,onClearSelection:i})=>t===0?null:a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(_e,{id:"select-all",checked:n||e===t,onCheckedChange:s,className:"h-4 w-4"}),a.jsxs("label",{htmlFor:"select-all",className:"text-sm font-medium text-gray-700 cursor-pointer",children:["Select All (",t,")"]}),e>0&&a.jsxs("span",{className:"text-sm text-gray-500",children:[e," selected"]})]}),e>0&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(U,{variant:"outline",size:"sm",onClick:i,disabled:o,children:"Clear Selection"}),a.jsxs(Ll,{children:[a.jsx(Bl,{asChild:!0,children:a.jsxs(U,{variant:"destructive",size:"sm",disabled:o,className:"flex items-center space-x-1",children:[a.jsx(Kr,{className:"w-4 h-4"}),a.jsxs("span",{children:["Delete ",e," Selected"]})]})}),a.jsxs(co,{children:[a.jsxs(uo,{children:[a.jsx(fo,{children:"Delete Selected Drafts"}),a.jsxs(mo,{children:["Are you sure you want to delete ",e," selected draft",e!==1?"s":"","? This action cannot be undone."]})]}),a.jsxs(ho,{children:[a.jsx(go,{children:"Cancel"}),a.jsx(po,{onClick:r,className:"bg-red-600 hover:bg-red-700",children:o?"Deleting...":"Delete Selected"})]})]})]})]})]}),Kt={PTA:{code:"PTA",name:"Pretoria",doctor:"Dr Vorster",practiceNumber:"1227831"},JHB:{code:"JHB",name:"Johannesburg",doctor:"Dr Essop",practiceNumber:"1182609"},CPT:{code:"CPT",name:"Cape Town",doctor:"Dr Soni",practiceNumber:"1030817"},NAM:{code:"NAM",name:"Namibia",doctor:"MIA Healthcare Mobile Clinic",practiceNumber:"087 5201"}},vp=async()=>Kt.PTA,xp=["top","right","bottom","left"],dt=Math.min,ge=Math.max,ps=Math.round,ss=Math.floor,ut=t=>({x:t,y:t}),bp={left:"right",right:"left",bottom:"top",top:"bottom"},wp={start:"end",end:"start"};function Pr(t,e,n){return ge(t,dt(e,n))}function Qe(t,e){return typeof t=="function"?t(e):t}function Ze(t){return t.split("-")[0]}function hn(t){return t.split("-")[1]}function yo(t){return t==="x"?"y":"x"}function vo(t){return t==="y"?"height":"width"}function ht(t){return["top","bottom"].includes(Ze(t))?"y":"x"}function xo(t){return yo(ht(t))}function Sp(t,e,n){n===void 0&&(n=!1);const s=hn(t),r=xo(t),o=vo(r);let i=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(i=gs(i)),[i,gs(i)]}function _p(t){const e=gs(t);return[Ar(t),e,Ar(e)]}function Ar(t){return t.replace(/start|end/g,e=>wp[e])}function jp(t,e,n){const s=["left","right"],r=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(t){case"top":case"bottom":return n?e?r:s:e?s:r;case"left":case"right":return e?o:i;default:return[]}}function Np(t,e,n,s){const r=hn(t);let o=jp(Ze(t),n==="start",s);return r&&(o=o.map(i=>i+"-"+r),e&&(o=o.concat(o.map(Ar)))),o}function gs(t){return t.replace(/left|right|bottom|top/g,e=>bp[e])}function Cp(t){return{top:0,right:0,bottom:0,left:0,...t}}function Hl(t){return typeof t!="number"?Cp(t):{top:t,right:t,bottom:t,left:t}}function ys(t){const{x:e,y:n,width:s,height:r}=t;return{width:s,height:r,top:n,left:e,right:e+s,bottom:n+r,x:e,y:n}}function ya(t,e,n){let{reference:s,floating:r}=t;const o=ht(e),i=xo(e),l=vo(i),c=Ze(e),u=o==="y",d=s.x+s.width/2-r.width/2,h=s.y+s.height/2-r.height/2,m=s[l]/2-r[l]/2;let f;switch(c){case"top":f={x:d,y:s.y-r.height};break;case"bottom":f={x:d,y:s.y+s.height};break;case"right":f={x:s.x+s.width,y:h};break;case"left":f={x:s.x-r.width,y:h};break;default:f={x:s.x,y:s.y}}switch(hn(e)){case"start":f[i]-=m*(n&&u?-1:1);break;case"end":f[i]+=m*(n&&u?-1:1);break}return f}const kp=async(t,e,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:o=[],platform:i}=n,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(e));let u=await i.getElementRects({reference:t,floating:e,strategy:r}),{x:d,y:h}=ya(u,s,c),m=s,f={},p=0;for(let y=0;y<l.length;y++){const{name:v,fn:w}=l[y],{x,y:b,data:S,reset:_}=await w({x:d,y:h,initialPlacement:s,placement:m,strategy:r,middlewareData:f,rects:u,platform:i,elements:{reference:t,floating:e}});d=x??d,h=b??h,f={...f,[v]:{...f[v],...S}},_&&p<=50&&(p++,typeof _=="object"&&(_.placement&&(m=_.placement),_.rects&&(u=_.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:r}):_.rects),{x:d,y:h}=ya(u,m,c)),y=-1)}return{x:d,y:h,placement:m,strategy:r,middlewareData:f}};async function Rn(t,e){var n;e===void 0&&(e={});const{x:s,y:r,platform:o,rects:i,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:f=0}=Qe(e,t),p=Hl(f),v=l[m?h==="floating"?"reference":"floating":h],w=ys(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(v)))==null||n?v:v.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),x=h==="floating"?{x:s,y:r,width:i.floating.width,height:i.floating.height}:i.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),S=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},_=ys(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:b,strategy:c}):x);return{top:(w.top-_.top+p.top)/S.y,bottom:(_.bottom-w.bottom+p.bottom)/S.y,left:(w.left-_.left+p.left)/S.x,right:(_.right-w.right+p.right)/S.x}}const Pp=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:r,rects:o,platform:i,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=Qe(t,e)||{};if(u==null)return{};const h=Hl(d),m={x:n,y:s},f=xo(r),p=vo(f),y=await i.getDimensions(u),v=f==="y",w=v?"top":"left",x=v?"bottom":"right",b=v?"clientHeight":"clientWidth",S=o.reference[p]+o.reference[f]-m[f]-o.floating[p],_=m[f]-o.reference[f],j=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let k=j?j[b]:0;(!k||!await(i.isElement==null?void 0:i.isElement(j)))&&(k=l.floating[b]||o.floating[p]);const A=S/2-_/2,P=k/2-y[p]/2-1,I=dt(h[w],P),O=dt(h[x],P),E=I,W=k-y[p]-O,$=k/2-y[p]/2+A,Y=Pr(E,$,W),T=!c.arrow&&hn(r)!=null&&$!==Y&&o.reference[p]/2-($<E?I:O)-y[p]/2<0,C=T?$<E?$-E:$-W:0;return{[f]:m[f]+C,data:{[f]:Y,centerOffset:$-Y-C,...T&&{alignmentOffset:C}},reset:T}}}),Ap=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:r,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:y=!0,...v}=Qe(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const w=Ze(r),x=ht(l),b=Ze(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),_=m||(b||!y?[gs(l)]:_p(l)),j=p!=="none";!m&&j&&_.push(...Np(l,y,p,S));const k=[l,..._],A=await Rn(e,v),P=[];let I=((s=o.flip)==null?void 0:s.overflows)||[];if(d&&P.push(A[w]),h){const $=Sp(r,i,S);P.push(A[$[0]],A[$[1]])}if(I=[...I,{placement:r,overflows:P}],!P.every($=>$<=0)){var O,E;const $=(((O=o.flip)==null?void 0:O.index)||0)+1,Y=k[$];if(Y)return{data:{index:$,overflows:I},reset:{placement:Y}};let T=(E=I.filter(C=>C.overflows[0]<=0).sort((C,N)=>C.overflows[1]-N.overflows[1])[0])==null?void 0:E.placement;if(!T)switch(f){case"bestFit":{var W;const C=(W=I.filter(N=>{if(j){const F=ht(N.placement);return F===x||F==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(F=>F>0).reduce((F,oe)=>F+oe,0)]).sort((N,F)=>N[1]-F[1])[0])==null?void 0:W[0];C&&(T=C);break}case"initialPlacement":T=l;break}if(r!==T)return{reset:{placement:T}}}return{}}}};function va(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function xa(t){return xp.some(e=>t[e]>=0)}const Ep=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:s="referenceHidden",...r}=Qe(t,e);switch(s){case"referenceHidden":{const o=await Rn(e,{...r,elementContext:"reference"}),i=va(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:xa(i)}}}case"escaped":{const o=await Rn(e,{...r,altBoundary:!0}),i=va(o,n.floating);return{data:{escapedOffsets:i,escaped:xa(i)}}}default:return{}}}}};async function Op(t,e){const{placement:n,platform:s,elements:r}=t,o=await(s.isRTL==null?void 0:s.isRTL(r.floating)),i=Ze(n),l=hn(n),c=ht(n)==="y",u=["left","top"].includes(i)?-1:1,d=o&&c?-1:1,h=Qe(e,t);let{mainAxis:m,crossAxis:f,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof p=="number"&&(f=l==="end"?p*-1:p),c?{x:f*d,y:m*u}:{x:m*u,y:f*d}}const Tp=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:r,y:o,placement:i,middlewareData:l}=e,c=await Op(e,t);return i===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:r+c.x,y:o+c.y,data:{...c,placement:i}}}}},Ip=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:s,placement:r}=e,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:v=>{let{x:w,y:x}=v;return{x:w,y:x}}},...c}=Qe(t,e),u={x:n,y:s},d=await Rn(e,c),h=ht(Ze(r)),m=yo(h);let f=u[m],p=u[h];if(o){const v=m==="y"?"top":"left",w=m==="y"?"bottom":"right",x=f+d[v],b=f-d[w];f=Pr(x,f,b)}if(i){const v=h==="y"?"top":"left",w=h==="y"?"bottom":"right",x=p+d[v],b=p-d[w];p=Pr(x,p,b)}const y=l.fn({...e,[m]:f,[h]:p});return{...y,data:{x:y.x-n,y:y.y-s,enabled:{[m]:o,[h]:i}}}}}},Mp=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:s,placement:r,rects:o,middlewareData:i}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Qe(t,e),d={x:n,y:s},h=ht(r),m=yo(h);let f=d[m],p=d[h];const y=Qe(l,e),v=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const b=m==="y"?"height":"width",S=o.reference[m]-o.floating[b]+v.mainAxis,_=o.reference[m]+o.reference[b]-v.mainAxis;f<S?f=S:f>_&&(f=_)}if(u){var w,x;const b=m==="y"?"width":"height",S=["top","left"].includes(Ze(r)),_=o.reference[h]-o.floating[b]+(S&&((w=i.offset)==null?void 0:w[h])||0)+(S?0:v.crossAxis),j=o.reference[h]+o.reference[b]+(S?0:((x=i.offset)==null?void 0:x[h])||0)-(S?v.crossAxis:0);p<_?p=_:p>j&&(p=j)}return{[m]:f,[h]:p}}}},Rp=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,s;const{placement:r,rects:o,platform:i,elements:l}=e,{apply:c=()=>{},...u}=Qe(t,e),d=await Rn(e,u),h=Ze(r),m=hn(r),f=ht(r)==="y",{width:p,height:y}=o.floating;let v,w;h==="top"||h==="bottom"?(v=h,w=m===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(w=h,v=m==="end"?"top":"bottom");const x=y-d.top-d.bottom,b=p-d.left-d.right,S=dt(y-d[v],x),_=dt(p-d[w],b),j=!e.middlewareData.shift;let k=S,A=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=b),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(k=x),j&&!m){const I=ge(d.left,0),O=ge(d.right,0),E=ge(d.top,0),W=ge(d.bottom,0);f?A=p-2*(I!==0||O!==0?I+O:ge(d.left,d.right)):k=y-2*(E!==0||W!==0?E+W:ge(d.top,d.bottom))}await c({...e,availableWidth:A,availableHeight:k});const P=await i.getDimensions(l.floating);return p!==P.width||y!==P.height?{reset:{rects:!0}}:{}}}};function Ls(){return typeof window<"u"}function fn(t){return Ul(t)?(t.nodeName||"").toLowerCase():"#document"}function ye(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Be(t){var e;return(e=(Ul(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Ul(t){return Ls()?t instanceof Node||t instanceof ye(t).Node:!1}function Pe(t){return Ls()?t instanceof Element||t instanceof ye(t).Element:!1}function $e(t){return Ls()?t instanceof HTMLElement||t instanceof ye(t).HTMLElement:!1}function ba(t){return!Ls()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ye(t).ShadowRoot}function qn(t){const{overflow:e,overflowX:n,overflowY:s,display:r}=Ae(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!["inline","contents"].includes(r)}function Dp(t){return["table","td","th"].includes(fn(t))}function Bs(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function bo(t){const e=wo(),n=Pe(t)?Ae(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function Fp(t){let e=ft(t);for(;$e(e)&&!Jt(e);){if(bo(e))return e;if(Bs(e))return null;e=ft(e)}return null}function wo(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Jt(t){return["html","body","#document"].includes(fn(t))}function Ae(t){return ye(t).getComputedStyle(t)}function Ws(t){return Pe(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ft(t){if(fn(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ba(t)&&t.host||Be(t);return ba(e)?e.host:e}function ql(t){const e=ft(t);return Jt(e)?t.ownerDocument?t.ownerDocument.body:t.body:$e(e)&&qn(e)?e:ql(e)}function Dn(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=ql(t),o=r===((s=t.ownerDocument)==null?void 0:s.body),i=ye(r);if(o){const l=Er(i);return e.concat(i,i.visualViewport||[],qn(r)?r:[],l&&n?Dn(l):[])}return e.concat(r,Dn(r,[],n))}function Er(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Vl(t){const e=Ae(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=$e(t),o=r?t.offsetWidth:n,i=r?t.offsetHeight:s,l=ps(n)!==o||ps(s)!==i;return l&&(n=o,s=i),{width:n,height:s,$:l}}function So(t){return Pe(t)?t:t.contextElement}function qt(t){const e=So(t);if(!$e(e))return ut(1);const n=e.getBoundingClientRect(),{width:s,height:r,$:o}=Vl(e);let i=(o?ps(n.width):n.width)/s,l=(o?ps(n.height):n.height)/r;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const $p=ut(0);function zl(t){const e=ye(t);return!wo()||!e.visualViewport?$p:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Lp(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ye(t)?!1:e}function Ot(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),o=So(t);let i=ut(1);e&&(s?Pe(s)&&(i=qt(s)):i=qt(t));const l=Lp(o,n,s)?zl(o):ut(0);let c=(r.left+l.x)/i.x,u=(r.top+l.y)/i.y,d=r.width/i.x,h=r.height/i.y;if(o){const m=ye(o),f=s&&Pe(s)?ye(s):s;let p=m,y=Er(p);for(;y&&s&&f!==p;){const v=qt(y),w=y.getBoundingClientRect(),x=Ae(y),b=w.left+(y.clientLeft+parseFloat(x.paddingLeft))*v.x,S=w.top+(y.clientTop+parseFloat(x.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,h*=v.y,c+=b,u+=S,p=ye(y),y=Er(p)}}return ys({width:d,height:h,x:c,y:u})}function Bp(t){let{elements:e,rect:n,offsetParent:s,strategy:r}=t;const o=r==="fixed",i=Be(s),l=e?Bs(e.floating):!1;if(s===i||l&&o)return n;let c={scrollLeft:0,scrollTop:0},u=ut(1);const d=ut(0),h=$e(s);if((h||!h&&!o)&&((fn(s)!=="body"||qn(i))&&(c=Ws(s)),$e(s))){const m=Ot(s);u=qt(s),d.x=m.x+s.clientLeft,d.y=m.y+s.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x,y:n.y*u.y-c.scrollTop*u.y+d.y}}function Wp(t){return Array.from(t.getClientRects())}function Or(t,e){const n=Ws(t).scrollLeft;return e?e.left+n:Ot(Be(t)).left+n}function Hp(t){const e=Be(t),n=Ws(t),s=t.ownerDocument.body,r=ge(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),o=ge(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let i=-n.scrollLeft+Or(t);const l=-n.scrollTop;return Ae(s).direction==="rtl"&&(i+=ge(e.clientWidth,s.clientWidth)-r),{width:r,height:o,x:i,y:l}}function Up(t,e){const n=ye(t),s=Be(t),r=n.visualViewport;let o=s.clientWidth,i=s.clientHeight,l=0,c=0;if(r){o=r.width,i=r.height;const u=wo();(!u||u&&e==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:o,height:i,x:l,y:c}}function qp(t,e){const n=Ot(t,!0,e==="fixed"),s=n.top+t.clientTop,r=n.left+t.clientLeft,o=$e(t)?qt(t):ut(1),i=t.clientWidth*o.x,l=t.clientHeight*o.y,c=r*o.x,u=s*o.y;return{width:i,height:l,x:c,y:u}}function wa(t,e,n){let s;if(e==="viewport")s=Up(t,n);else if(e==="document")s=Hp(Be(t));else if(Pe(e))s=qp(e,n);else{const r=zl(t);s={...e,x:e.x-r.x,y:e.y-r.y}}return ys(s)}function Yl(t,e){const n=ft(t);return n===e||!Pe(n)||Jt(n)?!1:Ae(n).position==="fixed"||Yl(n,e)}function Vp(t,e){const n=e.get(t);if(n)return n;let s=Dn(t,[],!1).filter(l=>Pe(l)&&fn(l)!=="body"),r=null;const o=Ae(t).position==="fixed";let i=o?ft(t):t;for(;Pe(i)&&!Jt(i);){const l=Ae(i),c=bo(i);!c&&l.position==="fixed"&&(r=null),(o?!c&&!r:!c&&l.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||qn(i)&&!c&&Yl(t,i))?s=s.filter(d=>d!==i):r=l,i=ft(i)}return e.set(t,s),s}function zp(t){let{element:e,boundary:n,rootBoundary:s,strategy:r}=t;const i=[...n==="clippingAncestors"?Bs(e)?[]:Vp(e,this._c):[].concat(n),s],l=i[0],c=i.reduce((u,d)=>{const h=wa(e,d,r);return u.top=ge(h.top,u.top),u.right=dt(h.right,u.right),u.bottom=dt(h.bottom,u.bottom),u.left=ge(h.left,u.left),u},wa(e,l,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Yp(t){const{width:e,height:n}=Vl(t);return{width:e,height:n}}function Gp(t,e,n){const s=$e(e),r=Be(e),o=n==="fixed",i=Ot(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const c=ut(0);if(s||!s&&!o)if((fn(e)!=="body"||qn(r))&&(l=Ws(e)),s){const f=Ot(e,!0,o,e);c.x=f.x+e.clientLeft,c.y=f.y+e.clientTop}else r&&(c.x=Or(r));let u=0,d=0;if(r&&!s&&!o){const f=r.getBoundingClientRect();d=f.top+l.scrollTop,u=f.left+l.scrollLeft-Or(r,f)}const h=i.left+l.scrollLeft-c.x-u,m=i.top+l.scrollTop-c.y-d;return{x:h,y:m,width:i.width,height:i.height}}function or(t){return Ae(t).position==="static"}function Sa(t,e){if(!$e(t)||Ae(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Be(t)===n&&(n=n.ownerDocument.body),n}function Gl(t,e){const n=ye(t);if(Bs(t))return n;if(!$e(t)){let r=ft(t);for(;r&&!Jt(r);){if(Pe(r)&&!or(r))return r;r=ft(r)}return n}let s=Sa(t,e);for(;s&&Dp(s)&&or(s);)s=Sa(s,e);return s&&Jt(s)&&or(s)&&!bo(s)?n:s||Fp(t)||n}const Kp=async function(t){const e=this.getOffsetParent||Gl,n=this.getDimensions,s=await n(t.floating);return{reference:Gp(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Jp(t){return Ae(t).direction==="rtl"}const Xp={convertOffsetParentRelativeRectToViewportRelativeRect:Bp,getDocumentElement:Be,getClippingRect:zp,getOffsetParent:Gl,getElementRects:Kp,getClientRects:Wp,getDimensions:Yp,getScale:qt,isElement:Pe,isRTL:Jp};function Qp(t,e){let n=null,s;const r=Be(t);function o(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const{left:u,top:d,width:h,height:m}=t.getBoundingClientRect();if(l||e(),!h||!m)return;const f=ss(d),p=ss(r.clientWidth-(u+h)),y=ss(r.clientHeight-(d+m)),v=ss(u),x={rootMargin:-f+"px "+-p+"px "+-y+"px "+-v+"px",threshold:ge(0,dt(1,c))||1};let b=!0;function S(_){const j=_[0].intersectionRatio;if(j!==c){if(!b)return i();j?i(!1,j):s=setTimeout(()=>{i(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(S,{...x,root:r.ownerDocument})}catch{n=new IntersectionObserver(S,x)}n.observe(t)}return i(!0),o}function Zp(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,u=So(t),d=r||o?[...u?Dn(u):[],...Dn(e)]:[];d.forEach(w=>{r&&w.addEventListener("scroll",n,{passive:!0}),o&&w.addEventListener("resize",n)});const h=u&&l?Qp(u,n):null;let m=-1,f=null;i&&(f=new ResizeObserver(w=>{let[x]=w;x&&x.target===u&&f&&(f.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=f)==null||b.observe(e)})),n()}),u&&!c&&f.observe(u),f.observe(e));let p,y=c?Ot(t):null;c&&v();function v(){const w=Ot(t);y&&(w.x!==y.x||w.y!==y.y||w.width!==y.width||w.height!==y.height)&&n(),y=w,p=requestAnimationFrame(v)}return n(),()=>{var w;d.forEach(x=>{r&&x.removeEventListener("scroll",n),o&&x.removeEventListener("resize",n)}),h==null||h(),(w=f)==null||w.disconnect(),f=null,c&&cancelAnimationFrame(p)}}const eg=Tp,tg=Ip,ng=Ap,sg=Rp,rg=Ep,_a=Pp,og=Mp,ag=(t,e,n)=>{const s=new Map,r={platform:Xp,...n},o={...r.platform,_c:s};return kp(t,e,{...r,platform:o})};var ds=typeof document<"u"?g.useLayoutEffect:g.useEffect;function vs(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,s,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!vs(t[s],e[s]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=n;s--!==0;){const o=r[s];if(!(o==="_owner"&&t.$$typeof)&&!vs(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function Kl(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ja(t,e){const n=Kl(t);return Math.round(e*n)/n}function ar(t){const e=g.useRef(t);return ds(()=>{e.current=t}),e}function ig(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,f]=g.useState(s);vs(m,s)||f(s);const[p,y]=g.useState(null),[v,w]=g.useState(null),x=g.useCallback(N=>{N!==j.current&&(j.current=N,y(N))},[]),b=g.useCallback(N=>{N!==k.current&&(k.current=N,w(N))},[]),S=o||p,_=i||v,j=g.useRef(null),k=g.useRef(null),A=g.useRef(d),P=c!=null,I=ar(c),O=ar(r),E=ar(u),W=g.useCallback(()=>{if(!j.current||!k.current)return;const N={placement:e,strategy:n,middleware:m};O.current&&(N.platform=O.current),ag(j.current,k.current,N).then(F=>{const oe={...F,isPositioned:E.current!==!1};$.current&&!vs(A.current,oe)&&(A.current=oe,js.flushSync(()=>{h(oe)}))})},[m,e,n,O,E]);ds(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(N=>({...N,isPositioned:!1})))},[u]);const $=g.useRef(!1);ds(()=>($.current=!0,()=>{$.current=!1}),[]),ds(()=>{if(S&&(j.current=S),_&&(k.current=_),S&&_){if(I.current)return I.current(S,_,W);W()}},[S,_,W,I,P]);const Y=g.useMemo(()=>({reference:j,floating:k,setReference:x,setFloating:b}),[x,b]),T=g.useMemo(()=>({reference:S,floating:_}),[S,_]),C=g.useMemo(()=>{const N={position:n,left:0,top:0};if(!T.floating)return N;const F=ja(T.floating,d.x),oe=ja(T.floating,d.y);return l?{...N,transform:"translate("+F+"px, "+oe+"px)",...Kl(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:oe}},[n,l,T.floating,d.x,d.y]);return g.useMemo(()=>({...d,update:W,refs:Y,elements:T,floatingStyles:C}),[d,W,Y,T,C])}const lg=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:r}=typeof t=="function"?t(n):t;return s&&e(s)?s.current!=null?_a({element:s.current,padding:r}).fn(n):{}:s?_a({element:s,padding:r}).fn(n):{}}}},cg=(t,e)=>({...eg(t),options:[t,e]}),dg=(t,e)=>({...tg(t),options:[t,e]}),ug=(t,e)=>({...og(t),options:[t,e]}),hg=(t,e)=>({...ng(t),options:[t,e]}),fg=(t,e)=>({...sg(t),options:[t,e]}),mg=(t,e)=>({...rg(t),options:[t,e]}),pg=(t,e)=>({...lg(t),options:[t,e]});var gg="Arrow",Jl=g.forwardRef((t,e)=>{const{children:n,width:s=10,height:r=5,...o}=t;return a.jsx(J.svg,{...o,ref:e,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});Jl.displayName=gg;var yg=Jl;function vg(t,e=[]){let n=[];function s(o,i){const l=g.createContext(i),c=n.length;n=[...n,i];function u(h){const{scope:m,children:f,...p}=h,y=(m==null?void 0:m[t][c])||l,v=g.useMemo(()=>p,Object.values(p));return a.jsx(y.Provider,{value:v,children:f})}function d(h,m){const f=(m==null?void 0:m[t][c])||l,p=g.useContext(f);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,d]}const r=()=>{const o=n.map(i=>g.createContext(i));return function(l){const c=(l==null?void 0:l[t])||o;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return r.scopeName=t,[s,xg(r,...e)]}function xg(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const i=s.reduce((l,{useScope:c,scopeName:u})=>{const h=c(o)[`__scope${u}`];return{...l,...h}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var _o="Popper",[Xl,Hs]=vg(_o),[bg,Ql]=Xl(_o),Zl=t=>{const{__scopePopper:e,children:n}=t,[s,r]=g.useState(null);return a.jsx(bg,{scope:e,anchor:s,onAnchorChange:r,children:n})};Zl.displayName=_o;var ec="PopperAnchor",tc=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:s,...r}=t,o=Ql(ec,n),i=g.useRef(null),l=ie(e,i);return g.useEffect(()=>{o.onAnchorChange((s==null?void 0:s.current)||i.current)}),s?null:a.jsx(J.div,{...r,ref:l})});tc.displayName=ec;var jo="PopperContent",[wg,Sg]=Xl(jo),nc=g.forwardRef((t,e)=>{var R,te,ae,X,Q,Z;const{__scopePopper:n,side:s="bottom",sideOffset:r=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:f="optimized",onPlaced:p,...y}=t,v=Ql(jo,n),[w,x]=g.useState(null),b=ie(e,pe=>x(pe)),[S,_]=g.useState(null),j=ml(S),k=(j==null?void 0:j.width)??0,A=(j==null?void 0:j.height)??0,P=s+(o!=="center"?"-"+o:""),I=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},O=Array.isArray(u)?u:[u],E=O.length>0,W={padding:I,boundary:O.filter(jg),altBoundary:E},{refs:$,floatingStyles:Y,placement:T,isPositioned:C,middlewareData:N}=ig({strategy:"fixed",placement:P,whileElementsMounted:(...pe)=>Zp(...pe,{animationFrame:f==="always"}),elements:{reference:v.anchor},middleware:[cg({mainAxis:r+A,alignmentAxis:i}),c&&dg({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?ug():void 0,...W}),c&&hg({...W}),fg({...W,apply:({elements:pe,rects:Me,availableWidth:pn,availableHeight:gn})=>{const{width:yn,height:Ud}=Me.reference,Xn=pe.floating.style;Xn.setProperty("--radix-popper-available-width",`${pn}px`),Xn.setProperty("--radix-popper-available-height",`${gn}px`),Xn.setProperty("--radix-popper-anchor-width",`${yn}px`),Xn.setProperty("--radix-popper-anchor-height",`${Ud}px`)}}),S&&pg({element:S,padding:l}),Ng({arrowWidth:k,arrowHeight:A}),m&&mg({strategy:"referenceHidden",...W})]}),[F,oe]=oc(T),ee=Gr(p);Ce(()=>{C&&(ee==null||ee())},[C,ee]);const xe=(R=N.arrow)==null?void 0:R.x,Te=(te=N.arrow)==null?void 0:te.y,Ie=((ae=N.arrow)==null?void 0:ae.centerOffset)!==0,[tt,We]=g.useState();return Ce(()=>{w&&We(window.getComputedStyle(w).zIndex)},[w]),a.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:C?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:tt,"--radix-popper-transform-origin":[(X=N.transformOrigin)==null?void 0:X.x,(Q=N.transformOrigin)==null?void 0:Q.y].join(" "),...((Z=N.hide)==null?void 0:Z.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(wg,{scope:n,placedSide:F,onArrowChange:_,arrowX:xe,arrowY:Te,shouldHideArrow:Ie,children:a.jsx(J.div,{"data-side":F,"data-align":oe,...y,ref:b,style:{...y.style,animation:C?void 0:"none"}})})})});nc.displayName=jo;var sc="PopperArrow",_g={top:"bottom",right:"left",bottom:"top",left:"right"},rc=g.forwardRef(function(e,n){const{__scopePopper:s,...r}=e,o=Sg(sc,s),i=_g[o.placedSide];return a.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:a.jsx(yg,{...r,ref:n,style:{...r.style,display:"block"}})})});rc.displayName=sc;function jg(t){return t!==null}var Ng=t=>({name:"transformOrigin",options:t,fn(e){var v,w,x;const{placement:n,rects:s,middlewareData:r}=e,i=((v=r.arrow)==null?void 0:v.centerOffset)!==0,l=i?0:t.arrowWidth,c=i?0:t.arrowHeight,[u,d]=oc(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((w=r.arrow)==null?void 0:w.x)??0)+l/2,f=(((x=r.arrow)==null?void 0:x.y)??0)+c/2;let p="",y="";return u==="bottom"?(p=i?h:`${m}px`,y=`${-c}px`):u==="top"?(p=i?h:`${m}px`,y=`${s.floating.height+c}px`):u==="right"?(p=`${-c}px`,y=i?h:`${f}px`):u==="left"&&(p=`${s.floating.width+c}px`,y=i?h:`${f}px`),{data:{x:p,y}}}});function oc(t){const[e,n="center"]=t.split("-");return[e,n]}var ac=Zl,No=tc,ic=nc,lc=rc,Co="Popover",[cc,Qw]=Ln(Co,[Hs]),Vn=Hs(),[Cg,yt]=cc(Co),dc=t=>{const{__scopePopover:e,children:n,open:s,defaultOpen:r,onOpenChange:o,modal:i=!1}=t,l=Vn(e),c=g.useRef(null),[u,d]=g.useState(!1),[h=!1,m]=Vt({prop:s,defaultProp:r,onChange:o});return a.jsx(ac,{...l,children:a.jsx(Cg,{scope:e,contentId:tn(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:g.useCallback(()=>m(f=>!f),[m]),hasCustomAnchor:u,onCustomAnchorAdd:g.useCallback(()=>d(!0),[]),onCustomAnchorRemove:g.useCallback(()=>d(!1),[]),modal:i,children:n})})};dc.displayName=Co;var uc="PopoverAnchor",kg=g.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,r=yt(uc,n),o=Vn(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=r;return g.useEffect(()=>(i(),()=>l()),[i,l]),a.jsx(No,{...o,...s,ref:e})});kg.displayName=uc;var hc="PopoverTrigger",fc=g.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,r=yt(hc,n),o=Vn(n),i=ie(e,r.triggerRef),l=a.jsx(J.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":vc(r.open),...s,ref:i,onClick:V(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?l:a.jsx(No,{asChild:!0,...o,children:l})});fc.displayName=hc;var ko="PopoverPortal",[Pg,Ag]=cc(ko,{forceMount:void 0}),mc=t=>{const{__scopePopover:e,forceMount:n,children:s,container:r}=t,o=yt(ko,e);return a.jsx(Pg,{scope:e,forceMount:n,children:a.jsx(_s,{present:n||o.open,children:a.jsx(Za,{asChild:!0,container:r,children:s})})})};mc.displayName=ko;var Xt="PopoverContent",pc=g.forwardRef((t,e)=>{const n=Ag(Xt,t.__scopePopover),{forceMount:s=n.forceMount,...r}=t,o=yt(Xt,t.__scopePopover);return a.jsx(_s,{present:s||o.open,children:o.modal?a.jsx(Eg,{...r,ref:e}):a.jsx(Og,{...r,ref:e})})});pc.displayName=Xt;var Eg=g.forwardRef((t,e)=>{const n=yt(Xt,t.__scopePopover),s=g.useRef(null),r=ie(e,s),o=g.useRef(!1);return g.useEffect(()=>{const i=s.current;if(i)return Ga(i)},[]),a.jsx(Ka,{as:Tn,allowPinchZoom:!0,children:a.jsx(gc,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:V(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:V(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;o.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:V(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Og=g.forwardRef((t,e)=>{const n=yt(Xt,t.__scopePopover),s=g.useRef(!1),r=g.useRef(!1);return a.jsx(gc,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,o),o.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:o=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const i=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&r.current&&o.preventDefault()}})}),gc=g.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=t,m=yt(Xt,n),f=Vn(n);return Ja(),a.jsx(Xa,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:o,children:a.jsx(Qa,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:a.jsx(ic,{"data-state":vc(m.open),role:"dialog",id:m.contentId,...f,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),yc="PopoverClose",Tg=g.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,r=yt(yc,n);return a.jsx(J.button,{type:"button",...s,ref:e,onClick:V(t.onClick,()=>r.onOpenChange(!1))})});Tg.displayName=yc;var Ig="PopoverArrow",Mg=g.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,r=Vn(n);return a.jsx(lc,{...r,...s,ref:e})});Mg.displayName=Ig;function vc(t){return t?"open":"closed"}var Rg=dc,Dg=fc,Fg=mc,xc=pc;const bc=Rg,wc=Dg,Po=g.forwardRef(({className:t,align:e="center",sideOffset:n=4,...s},r)=>a.jsx(Fg,{children:a.jsx(xc,{ref:r,align:e,sideOffset:n,className:D("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));Po.displayName=xc.displayName;const Sc=({currentRegion:t,onRegionSelect:e,isFromDraft:n=!1,isDetected:s=!1})=>{const[r,o]=g.useState(!1);if(!t)return null;const i=u=>{e(u),o(!1)},l=()=>n?"bg-purple-100 text-purple-800":s?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800",c=()=>n?"From Draft":s?"Auto-detected":"Manual";return a.jsxs(bc,{open:r,onOpenChange:o,children:[a.jsx(wc,{asChild:!0,children:a.jsxs(U,{variant:"ghost",size:"sm",className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${l()} hover:opacity-80 transition-opacity cursor-pointer`,children:[a.jsx(ii,{className:"w-3 h-3 mr-1"}),t.code," - ",t.name,a.jsx(Ns,{className:"w-3 h-3 ml-1"})]})}),a.jsxs(Po,{className:"w-80 p-0",align:"start",children:[a.jsxs("div",{className:"p-3 border-b bg-gray-50",children:[a.jsx("h4",{className:"font-medium text-sm text-gray-900",children:"Select Region & Doctor"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current: ",c()]})]}),a.jsx("div",{className:"p-3 space-y-2",children:Object.values(Kt).map(u=>a.jsxs("button",{onClick:()=>i(u),className:`w-full text-left p-3 rounded-lg border transition-colors ${t.code===u.code?"border-[#ef4805] bg-orange-50 text-[#ef4805]":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[a.jsx("div",{className:"font-medium text-sm",children:u.name}),a.jsx("div",{className:"text-sm text-gray-600",children:u.doctor}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Practice: ",u.practiceNumber]})]},u.code))})]})]})},$g=({onDelete:t,disabled:e=!1,patientName:n="this draft",isDeleting:s=!1})=>{const[r,o]=g.useState(!1),i=()=>{t(),o(!1)};return a.jsxs(Ll,{open:r,onOpenChange:o,children:[a.jsx(Bl,{asChild:!0,children:a.jsx(U,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:e||s,children:a.jsx(Kr,{className:"w-4 h-4"})})}),a.jsxs(co,{children:[a.jsxs(uo,{children:[a.jsx(fo,{children:"Delete Draft"}),a.jsxs(mo,{children:["Are you sure you want to delete the draft for ",n,"? This action cannot be undone."]})]}),a.jsxs(ho,{children:[a.jsx(go,{children:"Cancel"}),a.jsx(po,{onClick:i,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})},Lg=()=>{const[t,e]=g.useState(new Set),[n,s]=g.useState(!1);return gt(),{selectedDrafts:t,isSelectAll:n,toggleDraftSelection:u=>{const d=new Set(t);d.has(u)?d.delete(u):d.add(u),e(d),s(!1)},toggleSelectAll:u=>{n||t.size===u.length?(e(new Set),s(!1)):(e(new Set(u)),s(!0))},clearSelection:()=>{e(new Set),s(!1)},getSelectedCount:()=>t.size,getSelectedDrafts:()=>Array.from(t)}},Bg=Ps("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Qt=g.forwardRef(({className:t,variant:e,...n},s)=>a.jsx("div",{ref:s,role:"alert",className:D(Bg({variant:e}),t),...n}));Qt.displayName="Alert";const Wg=g.forwardRef(({className:t,...e},n)=>a.jsx("h5",{ref:n,className:D("mb-1 font-medium leading-none tracking-tight",t),...e}));Wg.displayName="AlertTitle";const Zt=g.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:D("text-sm [&_p]:leading-relaxed",t),...e}));Zt.displayName="AlertDescription";const Hg=({drafts:t,isLoading:e,error:n,onRetry:s,onDeleteDraft:r,onBulkDeleteDrafts:o,onDoctorChange:i,formatDate:l,getDoctorOptions:c,onContinue:u,isBulkDeleting:d,onEmergencyCleanup:h,onManualCleanup:m})=>{const{selectedDrafts:f,isSelectAll:p,toggleDraftSelection:y,toggleSelectAll:v,clearSelection:w,getSelectedCount:x,getSelectedDrafts:b}=Lg();if(e)return a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-gray-500",children:"Loading drafts..."})});if(n)return a.jsxs("div",{className:"space-y-4 p-4",children:[a.jsxs(Qt,{variant:"destructive",children:[a.jsx(Cs,{className:"h-4 w-4"}),a.jsx(Zt,{children:n})]}),a.jsxs("div",{className:"text-center space-x-2",children:[a.jsx(U,{onClick:s,variant:"outline",children:"Try Again"}),h&&a.jsxs(U,{onClick:h,variant:"outline",className:"text-red-600 border-red-300",children:[a.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Emergency Cleanup"]})]})]});if(t.length===0)return a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-gray-500",children:"No saved drafts found"}),a.jsxs("div",{className:"mt-4 space-x-2",children:[m&&a.jsx(U,{onClick:m,variant:"outline",size:"sm",children:"Clean Up Old Drafts"}),h&&a.jsxs(U,{onClick:h,variant:"outline",size:"sm",className:"text-red-600 border-red-300",children:[a.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Emergency Cleanup"]})]})]});const S=t.map(P=>String(P.id)),_=()=>{const P=b();o(P),w()},j=(P,I)=>{i(String(P.id),I.code)},k=P=>{const I=c(),O=I.find(E=>E.code===P.regionCode)||I[0];return{code:P.regionCode||(O==null?void 0:O.code)||"PTA",name:P.region||(O==null?void 0:O.name)||"Pretoria",doctor:P.doctor||(O==null?void 0:O.doctor)||"Dr. Unknown",practiceNumber:P.practiceNumber||(O==null?void 0:O.practiceNumber)||"0123456"}},A=P=>{r(P,{preventDefault:()=>{},stopPropagation:()=>{}})};return a.jsxs("div",{className:"space-y-0",children:[a.jsx(yp,{totalDrafts:t.length,selectedCount:x(),isSelectAll:p,onToggleSelectAll:()=>v(S),onBulkDelete:_,isBulkDeleting:d,onClearSelection:w}),t.length>5&&a.jsx("div",{className:"p-4 bg-yellow-50 border-l-4 border-yellow-400 space-y-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Wt,{className:"w-4 h-4 text-yellow-600 mr-2"}),a.jsx("p",{className:"text-sm text-yellow-800",children:"Manage your drafts with cleanup options"})]}),a.jsxs("div",{className:"space-x-2",children:[m&&a.jsx(U,{onClick:m,variant:"outline",size:"sm",children:"Clean Old Drafts"}),h&&a.jsx(U,{onClick:h,variant:"outline",size:"sm",className:"text-red-600 border-red-300",children:"Emergency Cleanup"})]})]})}),a.jsx("div",{className:"space-y-4 p-4",children:t.map(P=>{const I=P.autoSaved===!0;return a.jsx("div",{className:`border border-gray-200 rounded-lg p-4 transition-colors ${I?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[a.jsx(_e,{checked:f.has(String(P.id)),onCheckedChange:()=>y(String(P.id)),className:"mt-1",disabled:I}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(uu,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"font-medium text-gray-900 truncate",children:P.patientName||"Unnamed Patient"}),I&&a.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Auto-saving..."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600 mb-2",children:[P.cellPhone&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(cu,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{children:P.cellPhone})]}),P.timestamp&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(si,{className:"w-3 h-3 text-gray-400"}),a.jsxs("span",{children:["Saved: ",l(P.timestamp)]})]})]}),a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:a.jsxs("div",{children:["Draft ID: ",String(P.id).substring(0,20),"..."]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600 mb-2"}),(P.idNumber||P.email)&&a.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[P.idNumber&&a.jsxs("div",{children:["ID: ",P.idNumber]}),P.email&&a.jsxs("div",{children:["Email: ",P.email]})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx(ii,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Region:"}),a.jsx(Sc,{currentRegion:k(P),onRegionSelect:O=>j(P,O),isFromDraft:!0})]})]})]}),a.jsxs("div",{className:"flex gap-2 ml-4",children:[a.jsx(U,{onClick:()=>u(String(P.id)),size:"sm",className:"bg-[#ef4805] hover:bg-[#d63d04] text-white",disabled:I,children:"Continue"}),a.jsx($g,{onDelete:()=>A(String(P.id)),disabled:I,patientName:P.patientName||"this draft"})]})]})},P.id)})})]})},Ug=Ps("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ye({className:t,variant:e,...n}){return a.jsx("div",{className:D(Ug({variant:e}),t),...n})}function qg(t,e=[]){let n=[];function s(o,i){const l=g.createContext(i),c=n.length;n=[...n,i];function u(h){const{scope:m,children:f,...p}=h,y=(m==null?void 0:m[t][c])||l,v=g.useMemo(()=>p,Object.values(p));return a.jsx(y.Provider,{value:v,children:f})}function d(h,m){const f=(m==null?void 0:m[t][c])||l,p=g.useContext(f);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,d]}const r=()=>{const o=n.map(i=>g.createContext(i));return function(l){const c=(l==null?void 0:l[t])||o;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return r.scopeName=t,[s,Vg(r,...e)]}function Vg(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const i=s.reduce((l,{useScope:c,scopeName:u})=>{const h=c(o)[`__scope${u}`];return{...l,...h}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var Ao="Progress",Eo=100,[zg,Zw]=qg(Ao),[Yg,Gg]=zg(Ao),_c=g.forwardRef((t,e)=>{const{__scopeProgress:n,value:s=null,max:r,getValueLabel:o=Kg,...i}=t;(r||r===0)&&!Na(r)&&console.error(Jg(`${r}`,"Progress"));const l=Na(r)?r:Eo;s!==null&&!Ca(s,l)&&console.error(Xg(`${s}`,"Progress"));const c=Ca(s,l)?s:null,u=xs(c)?o(c,l):void 0;return a.jsx(Yg,{scope:n,value:c,max:l,children:a.jsx(J.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":xs(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":Cc(c,l),"data-value":c??void 0,"data-max":l,...i,ref:e})})});_c.displayName=Ao;var jc="ProgressIndicator",Nc=g.forwardRef((t,e)=>{const{__scopeProgress:n,...s}=t,r=Gg(jc,n);return a.jsx(J.div,{"data-state":Cc(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...s,ref:e})});Nc.displayName=jc;function Kg(t,e){return`${Math.round(t/e*100)}%`}function Cc(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function xs(t){return typeof t=="number"}function Na(t){return xs(t)&&!isNaN(t)&&t>0}function Ca(t,e){return xs(t)&&!isNaN(t)&&t<=e&&t>=0}function Jg(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Eo}\`.`}function Xg(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Eo} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var kc=_c,Qg=Nc;const Us=g.forwardRef(({className:t,value:e,...n},s)=>a.jsx(kc,{ref:s,className:D("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:a.jsx(Qg,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Us.displayName=kc.displayName;const Zg=({queuedSubmissions:t,isLoading:e,onForceRetry:n,onClearFailedSubmissions:s,onRefresh:r})=>{const[o,i]=g.useState(new Date);g.useEffect(()=>{const f=setInterval(()=>{i(new Date)},1e3);return()=>clearInterval(f)},[]);const l=()=>{const f=t.filter(w=>w.submissionStatus==="pending").length,p=t.filter(w=>w.submissionStatus==="retrying").length,y=t.filter(w=>w.submissionStatus==="failed"||w.retryCount>=w.maxRetries).length,v=t.length;return{pending:f,retrying:p,failed:y,total:v}},c=f=>{if(f.submissionStatus==="failed"||f.retryCount>=f.maxRetries)return"Failed";const y=new Date(f.nextRetry).getTime()-o.getTime();if(y<=0)return"Ready";const v=Math.floor(y/(1e3*60)),w=Math.floor(y%(1e3*60)/1e3);return v>0?`${v}m ${w}s`:`${w}s`},u=f=>f.retryCount/f.maxRetries*100,d=f=>f.submissionStatus==="failed"||f.retryCount>=f.maxRetries?a.jsx(au,{className:"w-4 h-4 text-red-500"}):f.submissionStatus==="retrying"?a.jsx(lt,{className:"w-4 h-4 text-yellow-500 animate-spin"}):c(f)==="Ready"?a.jsx(ke,{className:"w-4 h-4 text-green-500"}):a.jsx(Et,{className:"w-4 h-4 text-blue-500"}),h=l(),m=t.filter(f=>f.submissionStatus!=="failed"&&f.retryCount<f.maxRetries&&new Date(f.nextRetry)<=o);return e?a.jsxs(Ge,{children:[a.jsx(Ke,{children:a.jsxs(Je,{className:"flex items-center gap-2",children:[a.jsx(Nn,{className:"w-5 h-5"}),"Queue Status"]})}),a.jsx(Xe,{children:a.jsx("p",{className:"text-gray-500",children:"Loading queue status..."})})]}):a.jsxs(Ge,{children:[a.jsx(Ke,{children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs(Je,{className:"flex items-center gap-2",children:[a.jsx(Nn,{className:"w-5 h-5"}),"Queue Status Dashboard"]}),a.jsxs(U,{onClick:r,variant:"outline",size:"sm",children:[a.jsx(lt,{className:"w-4 h-4 mr-1"}),"Refresh"]})]})}),a.jsxs(Xe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.pending}),a.jsx("div",{className:"text-sm text-blue-600",children:"Pending"})]}),a.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:h.retrying}),a.jsx("div",{className:"text-sm text-yellow-600",children:"Retrying"})]}),a.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:h.failed}),a.jsx("div",{className:"text-sm text-red-600",children:"Failed"})]}),a.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-600",children:h.total}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]})]}),m.length>0&&a.jsxs(Qt,{children:[a.jsx(ke,{className:"h-4 w-4"}),a.jsxs(Zt,{children:[m.length," submission",m.length>1?"s are":" is"," ready for retry."]})]}),h.failed>0&&a.jsxs(Qt,{variant:"destructive",children:[a.jsx(Wt,{className:"h-4 w-4"}),a.jsxs(Zt,{className:"flex justify-between items-center",children:[a.jsxs("span",{children:[h.failed," submission",h.failed>1?"s have":" has"," permanently failed."]}),a.jsx(U,{onClick:s,variant:"outline",size:"sm",className:"ml-2",children:"Clear Failed"})]})]}),t.length>0?a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-medium",children:"Queue Details"}),t.map(f=>a.jsxs("div",{className:"border rounded-lg p-3 space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[d(f),a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium text-sm",children:f.data.patientName||"Unknown Patient"}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(f.createdAt).toLocaleString()]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Ye,{variant:f.submissionStatus==="failed"||f.retryCount>=f.maxRetries?"destructive":"secondary",children:[f.retryCount,"/",f.maxRetries]}),f.submissionStatus!=="failed"&&f.retryCount<f.maxRetries&&a.jsx(U,{onClick:()=>n(f.id),variant:"outline",size:"sm",disabled:f.submissionStatus==="retrying",children:f.submissionStatus==="retrying"?a.jsx(lt,{className:"w-3 h-3 animate-spin"}):"Force Retry"})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{children:"Retry Progress"}),a.jsxs("span",{children:[Math.round(u(f)),"%"]})]}),a.jsx(Us,{value:u(f),className:"h-2"})]}),f.submissionStatus!=="failed"&&f.retryCount<f.maxRetries&&a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Next retry:"}),a.jsx("span",{className:`font-mono ${c(f)==="Ready"?"text-green-600 font-bold":"text-blue-600"}`,children:c(f)})]})]},f.id))]}):a.jsxs("div",{className:"text-center py-6 text-gray-500",children:[a.jsx(Nn,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No items in submission queue"})]})]})]})},ey=({pendingSubmissions:t,onRetrySubmission:e,onDeleteSubmission:n,onForceRetry:s,isLoading:r})=>{const[o,i]=g.useState(new Date);g.useEffect(()=>{const p=setInterval(()=>{i(new Date)},1e3);return()=>clearInterval(p)},[]);const l=p=>p.submissionStatus==="failed"||p.retryCount>=p.maxRetries?"destructive":p.submissionStatus==="retrying"?"secondary":d(p)?"default":"outline",c=p=>p.submissionStatus==="failed"?"Failed":p.retryCount>=p.maxRetries?"Max retries exceeded":p.submissionStatus==="retrying"?"Retrying...":d(p)?"Ready to retry":"Pending",u=p=>{const y=o,w=new Date(p).getTime()-y.getTime();if(w<=0)return"Ready now";const x=Math.floor(w/(1e3*60)),b=Math.floor(w%(1e3*60)/1e3);return x>0?`${x}m ${b}s`:`${b}s`},d=p=>p.submissionStatus==="failed"||p.retryCount>=p.maxRetries?!1:new Date(p.nextRetry)<=o,h=p=>p.retryCount/p.maxRetries*100;if(r)return a.jsxs(Ge,{children:[a.jsx(Ke,{children:a.jsxs(Je,{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"w-5 h-5"}),"Enhanced Pending Submissions"]})}),a.jsx(Xe,{children:a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx(lt,{className:"w-6 h-6 animate-spin mr-2"}),a.jsx("p",{className:"text-gray-500",children:"Loading pending submissions..."})]})})]});if(t.length===0)return a.jsxs(Ge,{children:[a.jsx(Ke,{children:a.jsxs(Je,{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"w-5 h-5"}),"Enhanced Pending Submissions"]})}),a.jsx(Xe,{children:a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Nn,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-500",children:"No pending submissions"}),a.jsx("p",{className:"text-sm text-gray-400",children:"All submissions are up to date"})]})})]});const m=t.filter(p=>p.submissionStatus==="failed"||p.retryCount>=p.maxRetries),f=t.filter(d);return a.jsxs(Ge,{children:[a.jsx(Ke,{children:a.jsxs(Je,{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"w-5 h-5"}),"Enhanced Pending Submissions (",t.length,")"]})}),a.jsxs(Xe,{className:"space-y-4",children:[f.length>0&&a.jsxs(Qt,{children:[a.jsx(Yo,{className:"h-4 w-4"}),a.jsxs(Zt,{children:[f.length," submission",f.length>1?"s are":" is"," ready for retry."]})]}),m.length>0&&a.jsxs(Qt,{variant:"destructive",children:[a.jsx(Wt,{className:"h-4 w-4"}),a.jsxs(Zt,{children:[m.length," submission",m.length>1?"s":""," failed permanently. Consider deleting them to clean up your queue."]})]}),a.jsx("div",{className:"space-y-3",children:t.map(p=>a.jsxs("div",{className:"border rounded-lg p-4 space-y-3 bg-white shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-medium",children:p.data.patientName||"Unknown Patient"}),a.jsx(Ye,{variant:l(p),className:"text-xs",children:c(p)})]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Created: ",new Date(p.createdAt).toLocaleString()]}),p.lastAttempt&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Last attempt: ",new Date(p.lastAttempt).toLocaleString()]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(Ye,{variant:p.retryCount>=p.maxRetries?"destructive":"outline",className:"font-mono",children:[p.retryCount,"/",p.maxRetries]})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[a.jsx("span",{children:"Retry Progress"}),a.jsxs("span",{children:[Math.round(h(p)),"%"]})]}),a.jsx(Us,{value:h(p),className:"h-2"})]}),p.submissionStatus!=="failed"&&p.retryCount<p.maxRetries&&a.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nn,{className:"w-4 h-4 text-blue-600"}),a.jsx("span",{className:"text-sm text-blue-700",children:"Next retry:"})]}),a.jsx("span",{className:`font-mono text-sm font-bold ${d(p)?"text-green-600 animate-pulse":"text-blue-600"}`,children:u(p.nextRetry)})]}),a.jsx("div",{className:"flex gap-2 pt-2",children:p.submissionStatus==="failed"||p.retryCount>=p.maxRetries?a.jsxs(U,{onClick:()=>n(p.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[a.jsx(Kr,{className:"w-4 h-4 mr-1"}),"Delete"]}):a.jsxs(a.Fragment,{children:[a.jsxs(U,{onClick:()=>e(p.id),variant:"outline",size:"sm",disabled:p.submissionStatus==="retrying",children:[a.jsx(lt,{className:`w-4 h-4 mr-1 ${p.submissionStatus==="retrying"?"animate-spin":""}`}),p.submissionStatus==="retrying"?"Retrying...":"Retry Now"]}),a.jsxs(U,{onClick:()=>s(p.id),variant:"default",size:"sm",disabled:p.submissionStatus==="retrying",className:"bg-orange-500 hover:bg-orange-600",children:[a.jsx(Yo,{className:"w-4 h-4 mr-1"}),"Force Retry"]})]})})]},p.id))})]})]})},ty=({drafts:t,isLoading:e,error:n,isBulkDeleting:s,onRetryDrafts:r,onDeleteDraft:o,onBulkDeleteDrafts:i,onDoctorChange:l,onEmergencyCleanup:c,onManualCleanup:u,onContinue:d,formatDate:h,getDoctorOptions:m,pendingSubmissions:f,loadingPending:p,onRetrySubmission:y,onDeleteSubmission:v,onForceRetry:w,onClearFailedSubmissions:x,onRefreshPending:b})=>a.jsxs(Zm,{defaultValue:"drafts",className:"overflow-y-auto max-h-[70vh]",children:[a.jsxs(hl,{className:"grid w-full grid-cols-3",children:[a.jsx(ls,{value:"drafts",children:"Saved Drafts"}),a.jsx(ls,{value:"queue",children:"Queue Dashboard"}),a.jsx(ls,{value:"pending",children:"Pending Submissions"})]}),a.jsx(cs,{value:"drafts",className:"space-y-4",children:a.jsx(Hg,{drafts:t,isLoading:e,error:n,onRetry:r,onDeleteDraft:o,onBulkDeleteDrafts:i,onDoctorChange:l,onEmergencyCleanup:c,onManualCleanup:u,formatDate:h,getDoctorOptions:m,onContinue:d,isBulkDeleting:s})}),a.jsx(cs,{value:"queue",className:"space-y-4",children:a.jsx(Zg,{queuedSubmissions:f,isLoading:p,onForceRetry:w,onClearFailedSubmissions:x,onRefresh:b})}),a.jsx(cs,{value:"pending",className:"space-y-4",children:a.jsx(ey,{pendingSubmissions:f,onRetrySubmission:y,onDeleteSubmission:v,onForceRetry:w,isLoading:p})})]}),ny=t=>{const[e,n]=g.useState([]),[s,r]=g.useState(!1),[o,i]=g.useState(null),[l,c]=g.useState(!1),{getForms:u,deleteForm:d,saveForm:h}=Hn(),m=async()=>{if(t){r(!0),i(null);try{const b=await u(!0);n(b||[]),console.log(`Loaded ${(b==null?void 0:b.length)||0} drafts`)}catch(b){i("Failed to load drafts"),console.error("Error loading drafts:",b)}finally{r(!1)}}};return g.useEffect(()=>{t&&m()},[t]),{drafts:e,isLoading:s,error:o,isBulkDeleting:l,loadDrafts:m,handleDeleteDraft:async(b,S)=>{if(S.stopPropagation(),e.some(j=>String(j.id)===b&&j.autoSaved===!0)){i("Cannot delete draft while auto-save is in progress. Please wait a moment and try again.");return}try{console.log("Deleting draft with ID:",b,typeof b);const j=parseInt(b,10);if(isNaN(j))throw new Error(`Invalid draft ID: ${b}`);await d(j,!0),console.log("Draft deleted successfully"),n(k=>k.filter(A=>String(A.id)!==b)),setTimeout(()=>m(),500)}catch(j){console.error("Error deleting draft:",j),i(`Failed to delete draft: ${j instanceof Error?j.message:"Unknown error"}`)}},handleBulkDeleteDrafts:async b=>{if(b.length===0)return;c(!0),i(null);let S=0,_=0;try{for(const j of b)try{console.log("Bulk deleting draft with ID:",j,typeof j);const k=parseInt(j,10);if(isNaN(k))throw new Error(`Invalid draft ID: ${j}`);await d(k,!0),S++,console.log(`Successfully deleted draft ${j}`)}catch(k){_++,console.error(`Failed to delete draft ${j}:`,k)}_>0&&i(`Deleted ${S} drafts, but ${_} failed`),n(j=>j.filter(k=>!b.includes(String(k.id)))),setTimeout(()=>m(),1e3)}catch(j){console.error("Error in bulk delete:",j),i("Bulk delete operation failed")}finally{c(!1)}},handleDoctorChange:async(b,S)=>{try{console.log("Changing region for draft:",b,"to:",S);const _=e.find(A=>String(A.id)===b);if(!_)throw new Error(`Draft with ID ${b} not found`);const j=Kt[S];if(!j)throw new Error(`Invalid region code: ${S}`);const k={..._,regionCode:j.code,region:j.name,doctor:j.doctor,practiceNumber:j.practiceNumber,lastModified:new Date().toISOString()};await h(k,!0),console.log("Draft region updated successfully"),await m()}catch(_){console.error("Error updating draft region:",_),i(`Failed to update region: ${_ instanceof Error?_.message:"Unknown error"}`)}},handleEmergencyCleanup:async()=>{try{console.log("Starting emergency cleanup of all drafts"),r(!0);const b=await u(!0);let S=0;for(const _ of b)try{const j=typeof _.id=="string"?parseInt(_.id,10):_.id;isNaN(j)||(await d(j,!0),S++)}catch(j){console.error(`Failed to clean draft ${_.id}:`,j)}console.log(`Emergency cleanup completed: ${S} drafts removed`),n([]),await m()}catch(b){console.error("Emergency cleanup failed:",b),i("Emergency cleanup failed")}finally{r(!1)}},formatDate:b=>{try{return new Date(b).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(S){return console.error("Error formatting date:",S),"Invalid date"}},getDoctorOptions:()=>Object.values(Kt).map(b=>b.doctor)}},sy=({getForms:t,deleteForm:e,maxAgeDays:n=30,onCleanupComplete:s})=>{const{toast:r}=gt(),o=c=>{try{const u=new Date(c),h=Math.abs(new Date().getTime()-u.getTime());return Math.ceil(h/(1e3*60*60*24))>n}catch(u){return console.error("Error checking stale date:",u),!1}},i=async()=>{try{const c=await t(!0);let u=0;for(const d of c){const h=d.createdAt||d.timestamp,m=d.lastModified,f=h&&o(h),p=m&&o(m);if(f||p)try{await e(d.id,!0),u++,console.log(`Deleted stale draft: ${d.patientName||"Unknown"} (${d.id})`)}catch(y){console.error(`Failed to delete stale draft ${d.id}:`,y)}}return u}catch(c){return console.error("Failed to cleanup stale drafts:",c),0}},l=async()=>{try{const c=await i();c>0?r({title:"Cleanup Complete",description:`Deleted ${c} draft${c>1?"s":""} older than ${n} days.`}):r({title:"No Cleanup Needed",description:"No stale drafts found."}),s&&s(c)}catch(c){console.error("Manual cleanup failed:",c),r({title:"Cleanup Failed",description:"Unable to clean up old drafts.",variant:"destructive"})}};return g.useEffect(()=>{const u=setTimeout(async()=>{try{const d=await i();d>0&&(console.log(`Auto-cleanup: Deleted ${d} stale drafts`),r({title:"Auto Cleanup",description:`Cleaned up ${d} old draft${d>1?"s":""}.`,variant:"default"})),s&&s(d)}catch(d){console.error("Auto cleanup failed:",d)}},3e3);return()=>clearTimeout(u)},[]),{manualCleanup:l,cleanupStaleDrafts:i}},Pc="submission_queue",ry=5,ka=[1e3,2e3,5e3,1e4,3e4],oy=async t=>{const e=`queue_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n=new Date().toISOString(),s={id:e,data:t,submissionStatus:"pending",retryCount:0,lastAttempt:n,nextRetry:n,createdAt:n,maxRetries:ry},r=await mt();return r.push(s),await qs(r),console.log("Added to submission queue:",e),e},mt=async()=>{try{const t=localStorage.getItem(Pc);return t?JSON.parse(t):[]}catch(t){return console.error("Failed to get submission queue:",t),[]}},qs=async t=>{try{localStorage.setItem(Pc,JSON.stringify(t))}catch(e){console.error("Failed to save submission queue:",e)}},Ac=async(t,e)=>{const n=await mt(),s=n.findIndex(r=>r.id===t);s!==-1&&(n[s]={...n[s],...e},await qs(n))},Pa=async t=>{const n=(await mt()).filter(s=>s.id!==t);await qs(n),console.log("Removed from submission queue:",t)},ay=t=>{const e=ka[Math.min(t,ka.length-1)];return new Date(Date.now()+e).toISOString()},iy=t=>t.submissionStatus==="failed"||t.retryCount>=t.maxRetries?!1:new Date(t.nextRetry)<=new Date,Aa=async()=>(await mt()).filter(iy),ly=async t=>{const n=(await mt()).find(s=>s.id===t);if(n){const s=n.retryCount+1;await Ac(t,{retryCount:s,lastAttempt:new Date().toISOString(),nextRetry:ay(s),submissionStatus:s>=n.maxRetries?"failed":"retrying"})}},cy=async()=>{const t=await mt(),e=new Date(Date.now()-7*24*60*60*1e3),n=t.filter(s=>s.submissionStatus==="failed"?new Date(s.createdAt)>e:!0);n.length!==t.length&&(await qs(n),console.log(`Cleaned up ${t.length-n.length} old failed submissions`))},dy=({onRetrySubmissions:t,isEnabled:e=!0})=>{const{isOnline:n}=so(),{toast:s}=gt(),r=g.useRef(),o=g.useRef(!n);return g.useEffect(()=>{n&&o.current&&e&&(console.log("Device came online, checking for pending submissions..."),setTimeout(async()=>{try{const l=await Aa();l.length>0&&(s({title:"Back Online",description:`Retrying ${l.length} pending submission${l.length>1?"s":""}...`}),await t())}catch(l){console.error("Auto-retry failed:",l)}},2e3)),o.current=!n},[n,t,e,s]),g.useEffect(()=>{if(!e)return;const i=async()=>{if(n)try{const l=await Aa();l.length>0&&(console.log(`Found ${l.length} submissions ready for retry`),await t())}catch(l){console.error("Periodic retry check failed:",l)}};return r.current=setInterval(i,3e4),()=>{r.current&&clearInterval(r.current)}},[n,t,e]),{isOnline:n,wasOffline:o.current}},uy=({isOpen:t,onDraftsChanged:e})=>{const n=nn(),{toast:s}=gt(),[r,o]=g.useState([]),[i,l]=g.useState(!1),{getForms:c,deleteForm:u}=Hn(),{drafts:d,isLoading:h,error:m,isBulkDeleting:f,loadDrafts:p,handleDeleteDraft:y,handleBulkDeleteDrafts:v,handleDoctorChange:w,handleEmergencyCleanup:x,formatDate:b,getDoctorOptions:S}=ny(t),{manualCleanup:_}=sy({getForms:c,deleteForm:u,onCleanupComplete:()=>{p(),e&&e()}}),j=async()=>{l(!0);try{const C=await mt();o(C)}catch(C){console.error("Failed to load pending submissions:",C)}finally{l(!1)}};return dy({onRetrySubmissions:async()=>{await j()},isEnabled:t}),{pendingSubmissions:r,loadingPending:i,drafts:d,isLoading:h,error:m,isBulkDeleting:f,formatDate:b,getDoctorOptions:S,handleContinue:C=>{n(`/consent-form/${C}`)},handleDelete:async(C,N)=>{await y(C,N),e&&e()},handleBulkDelete:async C=>{await v(C),e&&e()},handleEmergencyCleanupWithCallback:async()=>{await x(),e&&e()},handleRetrySubmission:async C=>{try{await ly(C),await j(),s({title:"Retry Scheduled",description:"Submission will be retried according to schedule."})}catch(N){console.error("Failed to retry submission:",N),s({title:"Retry Failed",description:"Could not schedule retry. Please try again.",variant:"destructive"})}},handleForceRetry:async C=>{try{await Ac(C,{nextRetry:new Date().toISOString(),submissionStatus:"retrying",lastAttempt:new Date().toISOString()}),await j(),s({title:"Force Retry Started",description:"Submission is being retried immediately."})}catch(N){console.error("Failed to force retry submission:",N),s({title:"Force Retry Failed",description:"Could not force retry. Please try again.",variant:"destructive"})}},handleDeleteSubmission:async C=>{try{await Pa(C),await j(),s({title:"Submission Deleted",description:"Failed submission has been removed from queue."})}catch(N){console.error("Failed to delete submission:",N),s({title:"Delete Failed",description:"Could not delete submission. Please try again.",variant:"destructive"})}},handleClearFailedSubmissions:async()=>{try{const N=(await mt()).filter(F=>F.submissionStatus==="failed"||F.retryCount>=F.maxRetries);for(const F of N)await Pa(F.id);await j(),s({title:"Failed Submissions Cleared",description:`Removed ${N.length} failed submission${N.length>1?"s":""} from queue.`})}catch(C){console.error("Failed to clear failed submissions:",C),s({title:"Clear Failed",description:"Could not clear failed submissions. Please try again.",variant:"destructive"})}},handleCacheRefresh:async()=>{await p(),await j(),e&&e()},manualCleanup:_,loadDrafts:p,loadPendingSubmissions:j}},hy=({onDraftsChanged:t})=>{const[e,n]=g.useState(!1),{pendingSubmissions:s,loadingPending:r,drafts:o,isLoading:i,error:l,isBulkDeleting:c,formatDate:u,getDoctorOptions:d,handleContinue:h,handleDelete:m,handleBulkDelete:f,handleEmergencyCleanupWithCallback:p,handleRetrySubmission:y,handleForceRetry:v,handleDeleteSubmission:w,handleClearFailedSubmissions:x,handleCacheRefresh:b,manualCleanup:S,loadDrafts:_,loadPendingSubmissions:j}=uy({isOpen:e,onDraftsChanged:t}),k=A=>{n(A),A&&j(),!A&&t&&t()};return a.jsxs(Un,{open:e,onOpenChange:k,children:[a.jsx(Am,{asChild:!0,children:a.jsxs(U,{variant:"outline",size:"lg",className:"inline-flex items-center px-6 py-3 bg-white text-[#ef4805] font-semibold rounded-lg border-2 border-[#ef4805] hover:bg-orange-50 transition-colors",children:[a.jsx(Et,{className:"w-5 h-5 mr-2"}),"Resume Draft"]})}),a.jsxs(cn,{className:"max-w-7xl max-h-[90vh]",children:[a.jsx(Tm,{onRefresh:b}),a.jsx(ty,{drafts:o,isLoading:i,error:l,isBulkDeleting:c,onRetryDrafts:_,onDeleteDraft:m,onBulkDeleteDrafts:f,onDoctorChange:()=>{},onEmergencyCleanup:p,onManualCleanup:S,onContinue:h,formatDate:u,getDoctorOptions:d,pendingSubmissions:s,loadingPending:r,onRetrySubmission:y,onDeleteSubmission:w,onForceRetry:v,onClearFailedSubmissions:x,onRefreshPending:j})]})]})},fy=({onRefresh:t})=>a.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-blue-800",children:"Pending Forms"}),a.jsx("p",{className:"text-sm text-blue-600",children:"Forms waiting to be synced to cloud"})]}),a.jsxs(U,{onClick:t,variant:"outline",size:"sm",children:[a.jsx(lt,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})}),my=t=>{const e="/mia-consent-offline-form/",n=t.startsWith("/")?t.slice(1):t;return`${e.endsWith("/")?e:`${e}/`}${n}`},Ec=()=>my("assets/mia-logo.png"),py=()=>{console.log("Index: Component rendering started");const t=nn(),[e,n]=g.useState([]),[s,r]=g.useState(!1),[o,i]=g.useState(0),[l,c]=g.useState(!1),{isOnline:u}=so(),{getForms:d,capabilities:h,isInitialized:m}=Hn();console.log("Index: Hooks initialized successfully",{isOnline:u,capabilities:h,isInitialized:m}),g.useEffect(()=>{m&&!l&&f()},[m,o,l]);const f=async()=>{if(m){r(!0);try{console.log("Index: Loading drafts");const w=await d(!0);n(w||[]),console.log(`Index: Loaded ${(w||[]).length} draft forms`)}catch(w){console.error("Index: Failed to load drafts:",w),c(!0)}finally{r(!1)}}},p=()=>{console.log("Index: Refreshing drafts"),i(w=>w+1)},y=()=>{console.log("Index: Starting new form");try{t("/consent-form")}catch(w){console.error("Index: Navigation error:",w),c(!0)}};if(l)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center p-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"There was an error loading the application."}),a.jsx(U,{onClick:()=>window.location.reload(),children:"Reload Page"})]})});const v=()=>a.jsx("div",{className:"flex items-center gap-2 text-sm",children:u?a.jsxs(a.Fragment,{children:[a.jsx(Jr,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-green-600",children:"Online"})]}):a.jsxs(a.Fragment,{children:[a.jsx(ci,{className:"w-4 h-4 text-orange-600"}),a.jsx("span",{className:"text-orange-600",children:"Offline"})]})});return console.log("Index: Rendering component"),a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-[#ef4805] p-4",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsx("div",{className:"bg-white p-3 inline-block rounded-lg",children:a.jsx("img",{src:Ec(),alt:"Mia Healthcare",className:"h-16 w-auto",onError:w=>{console.error("Index: Mia logo failed to load:",w),console.log("Index: Attempted path:",w.currentTarget.src)},onLoad:()=>{console.log("Index: Mia logo loaded successfully")}})})})}),a.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[a.jsxs("div",{className:"text-center mb-8 mt-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Mia Healthcare."}),a.jsx("p",{className:"text-xl text-gray-600",children:"Dental Consent Form"})]}),a.jsxs("div",{className:"flex justify-between items-center mb-8 p-4 bg-white rounded-lg shadow-sm",children:[a.jsx(v,{}),a.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:a.jsx("span",{children:"Select your region when starting a new form"})})]}),!l&&a.jsx(fy,{onRefresh:p}),((e==null?void 0:e.length)||0)>0&&a.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsxs("p",{className:"text-blue-800 font-medium",children:["You have ",(e==null?void 0:e.length)||0," unfinished form",((e==null?void 0:e.length)||0)!==1?"s":""," saved as drafts"]}),a.jsx("p",{className:"text-blue-600 text-sm mt-1",children:'Use "Resume Draft" below to continue where you left off'})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[a.jsxs(Ge,{className:"hover:shadow-lg transition-shadow",children:[a.jsxs(Ke,{children:[a.jsxs(Je,{className:"flex items-center gap-2",children:[a.jsx(iu,{className:"w-6 h-6 text-[#ef4805]"}),"Start New Form"]}),a.jsx(hs,{children:"Begin a new dental consent form for a patient"})]}),a.jsx(Xe,{children:a.jsx(U,{onClick:y,className:"w-full h-14 text-lg bg-[#ef4805] hover:bg-[#d63d04] text-white font-semibold",size:"lg",children:"Start New Form"})})]}),a.jsxs(Ge,{className:"hover:shadow-lg transition-shadow",children:[a.jsxs(Ke,{children:[a.jsxs(Je,{className:"flex items-center gap-2",children:[a.jsx(lt,{className:"w-6 h-6 text-blue-600"}),"Resume Draft (",(e==null?void 0:e.length)||0,")"]}),a.jsx(hs,{children:"Continue working on a previously saved draft form"})]}),a.jsx(Xe,{children:a.jsx("div",{className:"w-full h-14 flex items-center",children:!l&&a.jsx(hy,{onDraftsChanged:p})})})]})]}),m&&!l&&a.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500",children:["Storage: ",h.supabase?"Cloud + Local":h.indexedDB?"Local (IndexedDB)":"None",a.jsx("br",{}),a.jsx("span",{className:"text-xs",children:"Drafts saved locally • Completed forms go to cloud database"})]})]})]})},gy=()=>{const[t,e]=g.useState(null),[n,s]=g.useState(!1),[r,o]=g.useState(!1),[i,l]=g.useState(!1),[c,u]=g.useState(!1),[d,h]=g.useState(!1),{toast:m}=gt();g.useEffect(()=>{new URLSearchParams(window.location.search).get("draft")||f()},[]);const f=async w=>{if(w)return e(w),s(!0),o(!0),l(!1),u(!0),h(!1),m({title:"Region Loaded from Draft",description:`Form will be submitted for ${w.name} (${w.code}) - ${w.doctor}`}),w;if(r&&t)return t;try{const x=await vp();return e(x),s(!0),o(!0),l(!1),u(!1),h(!0),m({title:"Region Detected",description:`Form will be submitted for ${x.name} (${x.code}) - ${x.doctor}`}),x}catch(x){return console.error("Region detection failed:",x),e(null),s(!1),o(!1),l(!0),u(!1),h(!1),m({title:"Region Detection Failed",description:"Please select your region manually below",variant:"destructive"}),Kt.PTA}};return{currentRegion:t,regionDetected:n,regionDetectionComplete:r,showManualSelector:i,isRegionFromDraft:c,isRegionDetected:d,detectAndSetRegion:f,setRegionManually:w=>{e(w),s(!0),o(!0),l(!1),u(!1),h(!1),m({title:"Region Selected",description:`Form will be submitted for ${w.name} (${w.code}) - ${w.doctor}`})},showRegionSelector:()=>{l(!0)},hideRegionSelector:()=>{l(!1)}}},yy=()=>{const[t,e]=g.useState(!1),[n,s]=g.useState("draft");return{submitting:t,submissionStatus:n,startSubmission:()=>t?!1:(e(!0),s("pending"),!0),completeSubmission:l=>{e(!1),s(l)},failSubmission:()=>{e(!1),s("draft")},setSubmissionStatus:s}},ir=typeof localStorage<"u",vy=()=>{const[t,e]=g.useState(()=>ir?localStorage.getItem("formSessionId")||`session-${Date.now()}`:`session-${Date.now()}`);return g.useEffect(()=>{ir&&localStorage.setItem("formSessionId",t)},[t]),{sessionId:t,clearSession:()=>{ir&&localStorage.removeItem("formSessionId"),e(`session-${Date.now()}`)}}},rs="mia_submission_logs",xy=1e3,by=7,kt=class kt{static getInstance(){return kt.instance||(kt.instance=new kt),kt.instance}async logEvent(e,n,s,r,o){const i={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,event:e,formId:n,timestamp:new Date().toISOString(),status:s,message:r,metadata:o};try{const l=await this.getLogs(),c=[i,...l].slice(0,xy);localStorage.setItem(rs,JSON.stringify(c)),console[s==="error"?"error":s==="warning"?"warn":"info"](`[${e}] ${r}`,o)}catch(l){console.error("Failed to log submission event:",l)}}async getLogs(){try{const e=localStorage.getItem(rs);if(!e)return[];const n=JSON.parse(e);return this.cleanupOldLogs(n)}catch(e){return console.error("Failed to retrieve submission logs:",e),[]}}async getLogsByFormId(e){return(await this.getLogs()).filter(s=>s.formId===e)}async getLogsByEvent(e){return(await this.getLogs()).filter(s=>s.event===e)}async clearLogs(){try{localStorage.removeItem(rs),console.info("Submission logs cleared")}catch(e){console.error("Failed to clear submission logs:",e)}}async exportLogs(){const e=await this.getLogs();return JSON.stringify(e,null,2)}cleanupOldLogs(e){const n=new Date;n.setDate(n.getDate()-by);const s=e.filter(r=>new Date(r.timestamp)>n);return s.length!==e.length&&(localStorage.setItem(rs,JSON.stringify(s)),console.info(`Cleaned up ${e.length-s.length} old submission logs`)),s}async logSubmissionStart(e,n){await this.logEvent("submit.started",e,"info","Form submission started",n)}async logSubmissionSuccess(e,n){await this.logEvent("submit.success",e,"success","Form submitted successfully",n)}async logSubmissionFailed(e,n,s){await this.logEvent("submit.failed",e,"error",`Form submission failed: ${n}`,s)}async logSubmissionQueued(e,n){await this.logEvent("submit.queued",e,"info","Form queued for offline submission",n)}async logValidationFailed(e,n,s){await this.logEvent("validation.failed",e,"warning",`Validation failed: ${n.join(", ")}`,{...s,validationErrors:n})}async logSaveSuccess(e,n,s){await this.logEvent("save.success",e,"success",`${n?"Draft":"Form"} saved successfully`,s)}async logSaveFailed(e,n,s){await this.logEvent("save.failed",e,"error",`Save failed: ${n}`,s)}};wt(kt,"instance");let Tr=kt;const Ne=Tr.getInstance(),Oc=(t,e)=>{var o,i,l,c,u,d,h,m,f,p,y,v,w,x,b,S,_,j,k;const n=[];console.log("Validating comprehensive form data:",{patientName:t.patientName,age:t.age,idNumber:t.idNumber,cellPhone:t.cellPhone,email:t.email,address:t.address,terms:t.terms,consentFreeWill:t.consentFreeWill,rates:t.rates,paymentResponsibility:t.paymentResponsibility,cancellationPolicy:t.cancellationPolicy}),(o=t.patientName)!=null&&o.trim()||n.push("Patient name is required"),(i=t.age)!=null&&i.trim()||n.push("Age is required"),(l=t.birthDate)!=null&&l.trim()||n.push("Birth date is required"),(c=t.idNumber)!=null&&c.trim()||n.push("ID number is required"),(u=t.gender)!=null&&u.trim()||n.push("Gender is required"),(d=t.cellPhone)!=null&&d.trim()||n.push("Contact number is required"),(h=t.whatsappNumber)!=null&&h.trim()||n.push("WhatsApp number is required"),(m=t.email)!=null&&m.trim()||n.push("Personal email is required"),(f=t.address)!=null&&f.trim()||n.push("Address is required"),(p=t.responsibleForPayment)!=null&&p.trim()||n.push("Person responsible for payment is required"),t.paymentPreference==="Medical Aid"&&((y=t.medicalAidName)!=null&&y.trim()||n.push("Medical Aid name is required when Medical Aid is selected"),(v=t.medicalAidNo)!=null&&v.trim()||n.push("Medical Aid number is required when Medical Aid is selected"),(w=t.medicalAidPlan)!=null&&w.trim()||n.push("Medical Aid plan is required when Medical Aid is selected"),(x=t.mainMember)!=null&&x.trim()||n.push("Main member is required when Medical Aid is selected")),(b=t.emergencyName)!=null&&b.trim()||n.push("Emergency contact name is required"),(S=t.emergencyRelationship)!=null&&S.trim()||n.push("Emergency contact relationship is required"),(_=t.emergencyPhone)!=null&&_.trim()||n.push("Emergency WhatsApp number is required"),(j=t.allergies)!=null&&j.trim()||n.push("Allergies field is required (enter 'Nil' if none)"),(k=t.medication)!=null&&k.trim()||n.push("Medication field is required (enter 'Nil' if none)");const s=t.habits;return s&&(typeof s=="string"&&s.trim()!==""||Array.isArray(s)&&s.length>0)||n.push("Please select at least one option for habits/substance abuse"),(!t.terms||t.terms!=="Agree")&&n.push("You must agree to the terms and conditions"),(!t.consentFreeWill||t.consentFreeWill!=="Agree")&&n.push("You must confirm that consent is given of your own free will"),(!t.rates||t.rates!=="Agree")&&n.push("You must acknowledge the practice's billing rates"),(!t.paymentResponsibility||t.paymentResponsibility!=="Agree")&&n.push("You must accept responsibility for payment"),(!t.cancellationPolicy||t.cancellationPolicy!=="Acknowledge cancellation policy")&&n.push("You must acknowledge the cancellation policy"),console.log("Comprehensive validation result:",{isValid:n.length===0,errors:n}),{isValid:n.length===0,errors:n}},Re=2,wy=[{fromVersion:1,toVersion:2,description:"Added enhanced tracking fields and normalized field names",migrate:t=>({...t,birthDate:t.birthDate||t.dateOfBirth,createdAt:t.createdAt||t.timestamp||new Date().toISOString(),lastModified:t.lastModified||new Date().toISOString(),formSchemaVersion:2,submissionStatus:t.submissionStatus||(t.status==="completed"?"submitted":"draft")})}],Tc=t=>{const e=[];let n={...t};const s=n.formSchemaVersion||1;if(s===Re)return{migrated:n,warnings:e};if(s>Re)return e.push(`Form was created with a newer version (${s}). Some features may not work correctly.`),{migrated:n,warnings:e};for(const r of wy)n.formSchemaVersion===r.fromVersion&&(console.log(`Migrating form from v${r.fromVersion} to v${r.toVersion}: ${r.description}`),n=r.migrate(n),e.push(`Form updated from version ${r.fromVersion} to ${r.toVersion}: ${r.description}`));return{migrated:n,warnings:e}},Sy=t=>t!==Re,_y=t=>t>Re?`This form was created with a newer version (v${t}). Please update the app or some features may not work correctly.`:t<Re?`This form was created with an older version (v${t}). It will be automatically updated when you save.`:"",Pt=class Pt{static simpleFallbackEncrypt(e){try{return this.ENCRYPTION_PREFIX+btoa(encodeURIComponent(e))}catch{return e}}static simpleFallbackDecrypt(e){try{if(!e.startsWith(this.ENCRYPTION_PREFIX))return e;const n=e.slice(this.ENCRYPTION_PREFIX.length);return decodeURIComponent(atob(n))}catch{return e}}static encryptSensitiveFields(e){const n={...e};return this.SENSITIVE_FIELDS.forEach(s=>{const r=n[s];r&&typeof r=="string"&&r.trim()&&(n[s]=this.simpleFallbackEncrypt(r))}),n._encrypted=!0,n}static decryptSensitiveFields(e){if(!e._encrypted)return e;const n={...e};return this.SENSITIVE_FIELDS.forEach(s=>{const r=n[s];r&&typeof r=="string"&&(n[s]=this.simpleFallbackDecrypt(r))}),delete n._encrypted,n}static isFieldSensitive(e){return this.SENSITIVE_FIELDS.includes(e)}static getSensitiveFields(){return[...this.SENSITIVE_FIELDS]}static decryptDatabaseFields(e){const n={...e};return this.DB_SENSITIVE_FIELDS.forEach(s=>{const r=n[s];r&&typeof r=="string"&&(n[s]=this.simpleFallbackDecrypt(r))}),delete n.encrypted,n}static convertToDbFormat(e){const n={...e};return Object.entries(this.DB_FIELD_MAPPING).forEach(([s,r])=>{n[s]!==void 0&&(n[r]=n[s],delete n[s])}),n}static convertFromDbFormat(e){const n={...e};return Object.entries(this.DB_FIELD_MAPPING).forEach(([s,r])=>{n[r]!==void 0&&(n[s]=n[r],delete n[r])}),n}static isDbFieldSensitive(e){return this.DB_SENSITIVE_FIELDS.includes(e)}static getPrivacyNotice(){return"Sensitive information (like ID numbers and contact details) is encrypted when stored locally for your privacy and security."}};wt(Pt,"SENSITIVE_FIELDS",["patientName","idNumber","cellPhone","email","address","emergencyContactName","emergencyContactNumber","accountHolderName","accountHolderIdNumber"]),wt(Pt,"DB_FIELD_MAPPING",{patientName:"patient_name",idNumber:"id_number",cellPhone:"cell_phone",email:"email",address:"address",emergencyContactName:"emergency_name",emergencyContactNumber:"emergency_phone",accountHolderName:"account_holder_name",accountHolderIdNumber:"account_holder_id_number"}),wt(Pt,"DB_SENSITIVE_FIELDS",Object.values(Pt.DB_FIELD_MAPPING)),wt(Pt,"ENCRYPTION_PREFIX","enc:");let Fn=Pt;const jy=(t,e,n)=>{const{migrated:s,warnings:r}=Tc(t),o=Fn.encryptSensitiveFields(s);return{preparedData:{...o,timestamp:new Date().toISOString(),createdAt:o.createdAt||new Date().toISOString(),synced:n,submissionId:`${o.regionCode||(e==null?void 0:e.code)||"UNK"}-${Date.now()}`,submissionStatus:"pending",status:"completed",formSchemaVersion:Re},warnings:r}},Ny=async(t,e,n,s,r,o,i)=>{const l=String(e.id||"new"),{saveForm:c,deleteForm:u,syncData:d,getForms:h,clearSession:m,capabilities:f,toast:p}=i,{completeSubmission:y,failSubmission:v,onOfflineSubmission:w,onOnlineSubmission:x}=o;try{console.log("Saving completed form...",{id:t.id,status:t.status,submissionStatus:t.submissionStatus,actuallyOnline:r,supabaseCapability:f.supabase});const b=await c(t,!1);if(console.log("Form saved successfully:",b),await Ne.logSaveSuccess(l,!1,{formVersion:t.formSchemaVersion,encrypted:!0}),e.id&&s)try{console.log("Deleting draft form after successful submission...",e.id),await u(e.id,!0),console.log("Draft deleted successfully after submission")}catch(j){console.error("Draft deletion failed after submission (may not exist):",j)}m(),console.log("Form session cleared after successful submission");const{checkServerConnectivity:S}=await rn(async()=>{const{checkServerConnectivity:j}=await Promise.resolve().then(()=>dm);return{checkServerConnectivity:j}},void 0);return await S()&&f.supabase?await Cy(t,l,n,y,f,d,p,x):await ky(t,l,n,y,h,p,w)}catch(b){return console.error("Form submission error:",b),await Ne.logSubmissionFailed(l,String(b),{formVersion:e.formSchemaVersion||1,region:n==null?void 0:n.code}),v&&v(),p({title:"Submission Error",description:"Failed to submit form. Please try again.",variant:"destructive"}),{success:!1,message:"Form submission failed"}}},Cy=async(t,e,n,s,r,o,i,l)=>{if(console.log("Processing ONLINE submission...",{supabaseCapability:r.supabase}),s&&s("submitted"),r.supabase)try{await o(),console.log("Post-submission sync completed"),await Ne.logSubmissionSuccess(e,{formVersion:t.formSchemaVersion,region:n==null?void 0:n.code,synced:!0}),s&&s("synced")}catch(c){console.error("Post-submission sync failed:",c),await Ne.logSubmissionFailed(e,`Sync failed: ${c}`,{formVersion:t.formSchemaVersion,submitted:!0,syncFailed:!0})}else await Ne.logSubmissionSuccess(e,{formVersion:t.formSchemaVersion,region:n==null?void 0:n.code,synced:!1});return console.log("Triggering ONLINE success dialog..."),i({title:"Form Submitted",description:"Form submitted successfully to cloud database.",variant:"default"}),l&&setTimeout(()=>{l(t)},100),{success:!0,message:"Form submitted successfully"}},ky=async(t,e,n,s,r,o,i)=>{console.log("Processing OFFLINE submission..."),await Ne.logSubmissionQueued(e,{formVersion:t.formSchemaVersion,region:n==null?void 0:n.code}),s&&s("submitted");const c=(await r(!1)).filter(u=>u.submissionStatus==="pending"&&u.status==="completed");return console.log("Triggering OFFLINE submission dialog...",{pendingCount:c.length,currentForm:t.patientName}),o({title:"Form Queued",description:"Form queued for submission when online.",variant:"default"}),i&&setTimeout(()=>{i(t,c)},100),{success:!0,message:"Form queued for submission"}},Py=({isOnline:t,onOfflineSubmission:e,onOnlineSubmission:n,onValidationErrors:s})=>{nn();const{toast:r}=gt(),{saveForm:o,deleteForm:i,syncData:l,capabilities:c,getForms:u}=Hn(),{clearSession:d}=vy();return{submitForm:async(m,f,p,y,v,w)=>{const x=String(m.id||"new");try{console.log("Processing form submission...",{formData:{patientName:m.patientName,idNumber:m.idNumber,cellPhone:m.cellPhone,consentAgreement:m.consentAgreement},isResuming:p,draftId:m.id}),await Ne.logSubmissionStart(x,{formVersion:m.formSchemaVersion||1,region:f==null?void 0:f.code,isResuming:p});const{preparedData:b,warnings:S}=jy(m,f,!1);S.length>0&&S.forEach(A=>{r({title:"Form Updated",description:A,variant:"default"})});const _=Oc(b);if(!_.isValid)return console.log("Validation failed:",_.errors),await Ne.logValidationFailed(x,_.errors,{formVersion:b.formSchemaVersion}),w&&w(),s&&s(_.errors),r({title:"Validation Error",description:"Please complete all required fields before submitting.",variant:"destructive"}),{success:!1,message:"Please fix validation errors before submitting"};console.log("Form validation passed, proceeding with submission..."),console.log("Checking real-time server connectivity...");const j=await Yt();console.log("Server connectivity result:",j);const k={...b,synced:j};return await Ny(k,m,f,p,j,{startSubmission:y,completeSubmission:v,failSubmission:w,onOfflineSubmission:e,onOnlineSubmission:n},{saveForm:o,deleteForm:i,syncData:l,getForms:u,clearSession:d,capabilities:c,toast:r})}catch(b){return console.error("Form submission error:",b),await Ne.logSubmissionFailed(x,String(b),{formVersion:m.formSchemaVersion||1,region:f==null?void 0:f.code}),w&&w(),r({title:"Submission Error",description:"Failed to submit form. Please try again.",variant:"destructive"}),{success:!1,message:"Form submission failed"}}}}},Ay=t=>["patientName","idNumber","cellPhone","email","dateOfBirth","birthDate","address","emergencyContactName","emergencyContactNumber"].some(n=>{const s=t[n];return s&&typeof s=="string"&&s.trim().length>0}),Ey=()=>{const[t,e]=g.useState({}),[n,s]=g.useState(!1),[r,o]=g.useState("patientDetails"),[i,l]=g.useState([]),[c,u]=g.useState(0),d=g.useRef(!0),h=(x,b)=>{console.log(`Form field changed: ${x} = ${b}`),e(S=>{const _={...S,[x]:b,lastModified:new Date().toISOString(),formSchemaVersion:Re};return Fn.isFieldSensitive(x)&&Ne.logEvent("save.success",String(S.id||"new"),"info",`Updated sensitive field: ${x}`,{fieldName:x,fieldType:"sensitive"}),_}),d.current||s(!0)},m=(x,b,S)=>{console.log(`Checkbox changed: ${x} = ${S} (value: ${b})`);const _=S;e(j=>({...j,[x]:_,lastModified:new Date().toISOString(),formSchemaVersion:Re})),d.current||s(!0)},f=g.useCallback(x=>{e(b=>({...b,regionCode:(x==null?void 0:x.code)||b.regionCode,region:(x==null?void 0:x.name)||b.region,doctor:(x==null?void 0:x.doctor)||b.doctor,practiceNumber:(x==null?void 0:x.practiceNumber)||b.practiceNumber,lastModified:new Date().toISOString(),formSchemaVersion:Re}))},[]),p=g.useCallback(x=>{console.log("Setting form data:",{patientName:x.patientName,consentAgreement:x.consentAgreement,hasId:!!x.id});const b=Fn.decryptSensitiveFields(x),{migrated:S,warnings:_}=Tc(b);if(Sy(x.formSchemaVersion||1)){const j=_y(x.formSchemaVersion||1);console.warn("Form version warning:",j)}_.length>0&&Ne.logEvent("save.success",String(x.id||"unknown"),"warning",`Form migrated: ${_.join(", ")}`,{fromVersion:x.formSchemaVersion||1,toVersion:Re,warnings:_}),e(S),d.current&&(d.current=!1)},[]),y=g.useCallback(()=>{},[]),v=g.useCallback(()=>"Just now",[]),w=g.useCallback((x=t)=>(console.log("Using comprehensive validation for form data"),Oc(x)),[t]);return{formData:t,setFormData:p,isDirty:n,setIsDirty:s,activeSection:r,setActiveSection:o,validationErrors:i,setValidationErrors:l,retryCount:c,setRetryCount:u,handleInputChange:h,handleCheckboxChange:m,updateFormDataWithRegion:f,hasMeaningfulContent:Ay,resetJustSaved:y,formatLastSaved:v,validateForm:w}},Ic=()=>{const[t,e]=g.useState(!1),[n,s]=g.useState(""),[r,o]=g.useState(!1),[i,l]=g.useState(!1),[c,u]=g.useState(!1),[d,h]=g.useState(!1),[m,f]=g.useState(void 0),[p,y]=g.useState(void 0),[v,w]=g.useState([]),[x,b]=g.useState([]),[S,_]=g.useState({success:0,failed:0});return{showSaveConfirmation:t,setShowSaveConfirmation:e,saveMessage:n,setSaveMessage:s,showOfflineDialog:r,setShowOfflineDialog:o,showOnlineSuccessDialog:i,setShowOnlineSuccessDialog:l,showOfflineSummaryDialog:c,setShowOfflineSummaryDialog:u,showSyncSuccessDialog:d,setShowSyncSuccessDialog:h,offlineFormData:m,setOfflineFormData:f,onlineFormData:p,setOnlineFormData:y,pendingForms:v,setPendingForms:w,syncedForms:x,setSyncedForms:b,syncStats:S,setSyncStats:_}},Oy=({isInitialized:t,getForms:e,setFormData:n,setSubmissionStatus:s,detectAndSetRegion:r})=>{const{draftId:o}=ei(),i=g.useRef(!1),l=g.useRef(null),c=g.useCallback(async()=>{if(!(!o||!t)){if(i.current&&l.current===o){console.log(`Draft ${o} already loaded, skipping reload`);return}try{console.log(`Loading draft ID: ${o}`);const d=(await e(!0)||[]).find(h=>String(h.id)===o);if(d){const h={...d,createdAt:d.createdAt||d.timestamp||new Date().toISOString(),submissionStatus:d.submissionStatus||"draft",formSchemaVersion:d.formSchemaVersion||1};if(n(h),s(h.submissionStatus),i.current=!0,l.current=o,console.log(`Successfully loaded draft ID ${o}`),d.regionCode){const m={code:d.regionCode,name:d.region||"Unknown",doctor:d.doctor||"Unknown",practiceNumber:d.practiceNumber||"Unknown"};await r(m)}}else console.warn(`Draft with ID ${o} not found`)}catch(u){console.error("Failed to load draft:",u)}}},[o,t,e,r,n,s]);return g.useEffect(()=>{c()},[c]),{isResuming:!!o,loadDraftById:c}};console.log("📌 useDraftLoader executing");const Ty=({formData:t,currentRegion:e,draftId:n,saveForm:s,deleteForm:r,submitForm:o,hasMeaningfulContent:i,updateFormDataWithRegion:l,setIsDirty:c,setJustSaved:u,setRetryCount:d,startSubmission:h,completeSubmission:m,failSubmission:f,validateForm:p,setValidationErrors:y})=>({handleSave:async(b=!0)=>{try{if(!i(t)){console.log("Form has no meaningful content, skipping save");return}l(e);const S={...t,regionCode:(e==null?void 0:e.code)||t.regionCode,region:(e==null?void 0:e.name)||t.region,doctor:(e==null?void 0:e.doctor)||t.doctor,practiceNumber:(e==null?void 0:e.practiceNumber)||t.practiceNumber,createdAt:t.createdAt||new Date().toISOString(),lastModified:new Date().toISOString(),formSchemaVersion:1},_=await s(S,b);console.log("Form saved successfully:",_),c(!1),u(!0),setTimeout(()=>u(!1),2e3)}catch(S){console.error("Save failed:",S),d(_=>_+1)}},handleSubmit:async()=>{let b=!1;try{if(console.log("Starting form submission process..."),p&&y){const j=p(t);if(!j.isValid){console.log("Form validation failed:",j.errors),y(j.errors);return}y([])}if(b=h(),!b){console.log("Submission already in progress, aborting");return}const S=await Yt();console.log("Connectivity check result:",S),l(e);const _={...t,regionCode:(e==null?void 0:e.code)||t.regionCode,region:(e==null?void 0:e.name)||t.region,doctor:(e==null?void 0:e.doctor)||t.doctor,practiceNumber:(e==null?void 0:e.practiceNumber)||t.practiceNumber,createdAt:t.createdAt||new Date().toISOString(),lastModified:new Date().toISOString(),formSchemaVersion:1};if(S)console.log("Online submission attempt"),await o(_,e,!!n,()=>!0,m,f);else{console.log("Offline - adding to submission queue");const j=await oy(_);console.log("Added to queue with ID:",j),m("submitted")}}catch(S){console.error("Form submission error:",S),b&&f()}},handleDiscard:async()=>{t.id&&await r(t.id,!0)}}),Iy=({isOnline:t,syncData:e})=>{const n=g.useRef(!t),{setShowSyncSuccessDialog:s,setSyncedForms:r,setSyncStats:o}=Ic();return g.useEffect(()=>{(async()=>{if(n.current&&t)try{const l=await e();l.success>0&&(r(l.syncedForms),o({success:l.success,failed:l.failed}),s(!0))}catch(l){console.error("Auto-sync failed:",l)}n.current=!t})()},[t,e,r,o,s]),null},My=()=>{const[t,e]=g.useState(!1),{saveForm:n,getForms:s,deleteForm:r,syncData:o,isInitialized:i,isOnline:l}=Hn();g.useEffect(()=>{Wi(),cy()},[]),Iy({isOnline:l,syncData:o});const{currentRegion:c,regionDetected:u,showManualSelector:d,isRegionFromDraft:h,isRegionDetected:m,detectAndSetRegion:f,setRegionManually:p}=gy(),{submitting:y,submissionStatus:v,startSubmission:w,completeSubmission:x,failSubmission:b,setSubmissionStatus:S}=yy(),{formData:_,setFormData:j,isDirty:k,setIsDirty:A,activeSection:P,setActiveSection:I,validationErrors:O,setValidationErrors:E,retryCount:W,setRetryCount:$,handleInputChange:Y,handleCheckboxChange:T,updateFormDataWithRegion:C,hasMeaningfulContent:N,resetJustSaved:F,formatLastSaved:oe,validateForm:ee}=Ey(),xe=Ic(),{isResuming:Te}=Oy({isInitialized:i,getForms:s,setFormData:j,setSubmissionStatus:S,detectAndSetRegion:f}),{submitForm:Ie}=Py({isOnline:l,onOfflineSubmission:(ae,X)=>{xe.setOfflineFormData(ae),xe.setPendingForms(X),xe.setShowOfflineSummaryDialog(!0)},onOnlineSubmission:ae=>{xe.setOnlineFormData(ae),xe.setShowOnlineSuccessDialog(!0)},onValidationErrors:ae=>{E(ae)}}),{handleSave:tt,handleSubmit:We,handleDiscard:R}=Ty({formData:_,currentRegion:c,draftId:Te?"draft":void 0,saveForm:n,deleteForm:r,submitForm:Ie,hasMeaningfulContent:N,updateFormDataWithRegion:C,setIsDirty:A,setJustSaved:e,setRetryCount:$,startSubmission:w,completeSubmission:x,failSubmission:b,validateForm:ee,setValidationErrors:E}),te=g.useCallback(()=>ee(_).isValid,[_,ee]);return g.useEffect(()=>{!Te&&i&&!c&&f()},[Te,i,c,f]),{formData:_,handleInputChange:Y,handleCheckboxChange:T,handleSave:tt,handleSubmit:We,handleDiscard:R,isDirty:k,justSaved:t,activeSection:P,setActiveSection:I,validationErrors:O||[],showValidationErrors:((O==null?void 0:O.length)||0)>0,isOnline:l,lastSaved:null,dbInitialized:i,retryCount:W,showManualSelector:d,setRegionManually:p,isRegionFromDraft:h,isRegionDetected:m,currentRegion:c,regionDetected:u,isResuming:Te,resetJustSaved:F,formatLastSaved:oe,submitting:y,submissionStatus:v,isFormComplete:te(),...xe}},Ry=({currentRegion:t,regionDetected:e,isResuming:n})=>{const s=Ec();return console.log("ConsentFormHeader - Using dynamic icon path:",s),a.jsx("div",{className:"bg-[#ef4805] p-4",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsx("div",{className:"bg-white p-3 inline-block rounded-lg",children:a.jsx("img",{src:s,alt:"Mia Healthcare",className:"h-16 w-auto",onError:r=>{console.error("ConsentFormHeader - Mia logo failed to load:",r),console.log("ConsentFormHeader - Attempted path:",r.currentTarget.src)},onLoad:()=>{console.log("ConsentFormHeader - Mia logo loaded successfully")}})})})})},Dy=({sections:t=[],currentSection:e})=>{const n=()=>t.length?(t.findIndex(r=>r.id===e)+1)/t.length*100:0;return a.jsx("div",{className:"w-full max-w-md mx-auto mt-4",children:a.jsx(Us,{value:n(),className:"w-full"})})},Fy=()=>{const{isOnline:t}=so();return a.jsx(Ye,{variant:t?"default":"destructive",className:"flex items-center gap-1",children:t?a.jsxs(a.Fragment,{children:[a.jsx(Jr,{className:"h-3 w-3"}),"Online"]}):a.jsxs(a.Fragment,{children:[a.jsx(ci,{className:"h-3 w-3"}),"Offline"]})})},$y=({isOnline:t,currentRegion:e,isDirty:n,lastSaved:s,formatLastSaved:r,onSave:o,dbInitialized:i=!0,retryCount:l=0,onRegionSelect:c,isRegionFromDraft:u=!1,isRegionDetected:d=!1,showSaveConfirmation:h=!1,setSaveMessage:m,setShowSaveConfirmation:f})=>{const[p,y]=g.useState(!1),[v,w]=g.useState(!1),x=()=>t&&i?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(ks,{className:"w-3 h-3 mr-1"}),"Cloud Storage Active"]}):i?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[a.jsx(ai,{className:"w-3 h-3 mr-1"}),"Local Storage Only"]}):a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[a.jsx(oi,{className:"w-3 h-3 mr-1"}),"Browser Storage Only"]}),b=async()=>{y(!0),w(!1);try{await o(),m&&m(t?"Draft saved to cloud":"Draft saved locally"),f&&f(!0),w(!0),setTimeout(()=>{w(!1),f&&f(!1)},3e3)}catch(S){console.error("Save failed:",S)}finally{y(!1)}};return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 mb-6 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center space-x-4 flex-wrap gap-y-2",children:[a.jsx(Fy,{}),x(),e&&c&&a.jsx(Sc,{currentRegion:e,onRegionSelect:c,isFromDraft:u,isDetected:d}),n&&!v&&a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[a.jsx(Cs,{className:"w-3 h-3 mr-1"}),"Unsaved changes"]}),v&&a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(ke,{className:"w-3 h-3 mr-1"}),"Saved successfully"]}),s&&a.jsxs("span",{className:"text-xs text-gray-500",children:["Last saved: ",r()]})]}),a.jsx("div",{className:"flex space-x-2",children:a.jsx("button",{onClick:b,disabled:p,className:`flex items-center px-4 py-2 text-sm rounded-lg transition-colors ${p?"bg-gray-100 text-gray-400 cursor-not-allowed":v?"bg-green-100 text-green-700 hover:bg-green-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:p?a.jsxs(a.Fragment,{children:[a.jsx(zo,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):v?a.jsxs(a.Fragment,{children:[a.jsx(ke,{className:"w-4 h-4 mr-2"}),"Saved"]}):a.jsxs(a.Fragment,{children:[a.jsx(zo,{className:"w-4 h-4 mr-2"}),"Save Progress"]})})})]})},Ly=({currentRegion:t,regionDetected:e,isResuming:n,children:s})=>a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-2xl font-bold text-[#ef4805] mb-2",children:[(t==null?void 0:t.code)==="NAM"?"MIA Healthcare Mobile Clinic":"Mia Information and Consent Form"," ",(t==null?void 0:t.code)||"PTA",n&&a.jsx("span",{className:"text-lg text-gray-600 ml-2",children:"(Resumed)"})]}),a.jsxs("p",{className:"text-gray-600",children:[(t==null?void 0:t.code)==="NAM"?`${t.doctor} - Operated by Digi Dental`:(t==null?void 0:t.doctor)||"Dr. Vorster"," Practice Number: ",(t==null?void 0:t.practiceNumber)||"1227831"]}),e&&t&&a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Region: ",t.name," (",t.code,")"]})]}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 mb-6",children:a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx(Cs,{className:"w-4 h-4 inline mr-1"}),"Your progress is automatically saved every 30 seconds. You can safely close and resume later."]})}),s]}),By=({sections:t,activeSection:e,setActiveSection:n,onSave:s,onSubmit:r,submitting:o=!1,isFormComplete:i=!1})=>{const l=t.findIndex(m=>m.id===e),c=l===0,u=l===t.length-1,d=()=>{u||n(t[l+1].id)},h=()=>{c||n(t[l-1].id)};return a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center p-6 bg-white border-t",children:[a.jsx("div",{className:"w-full sm:w-auto",children:!c&&a.jsx(U,{onClick:h,variant:"outline",size:"lg",className:"w-full sm:w-auto",children:"Previous"})}),a.jsx("div",{className:"flex justify-center w-full sm:w-auto",children:(i||u)&&a.jsx(U,{onClick:r,disabled:o||!i,size:"lg",className:"bg-[#ef4805] hover:bg-[#d63d04] text-white flex items-center gap-2",children:o?a.jsxs(a.Fragment,{children:[a.jsx(lu,{className:"w-4 h-4 animate-spin"}),"Submitting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(du,{className:"w-4 h-4"}),"Submit Form"]})})}),a.jsx("div",{className:"w-full sm:w-auto",children:!u&&a.jsx(U,{onClick:d,size:"lg",className:"w-full sm:w-auto bg-[#ef4805] hover:bg-[#d63d04] text-white",children:"Next"})})]})},Wy=t=>["patientName","idNumber","cellPhone","email","dateOfBirth","birthDate","address","emergencyContactName","emergencyContactNumber"].some(n=>{const s=t[n];return s&&typeof s=="string"&&s.trim().length>0}),Hy=({isDirty:t,justSaved:e,formData:n,onSave:s,onDiscard:r,onResetJustSaved:o})=>{const i=nn(),l=()=>{const c=Wy(n);t&&!e&&c?s().then(()=>{i("/")}):i("/"),o()};return a.jsx(U,{onClick:l,variant:"outline",className:"mb-4",children:"← Back to Start"})},Uy=({onRegionSelect:t,currentRegion:e,isVisible:n})=>n?a.jsxs("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Select Your Region"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2",children:Object.values(Kt).map(s=>a.jsxs("button",{onClick:()=>t(s),className:`p-3 rounded border text-left ${(e==null?void 0:e.code)===s.code?"bg-blue-100 border-blue-500":"bg-white border-gray-300 hover:bg-gray-50"}`,children:[a.jsx("div",{className:"font-medium",children:s.name}),a.jsx("div",{className:"text-sm text-gray-600",children:s.doctor})]},s.code))})]}):null,qy=({errors:t,isVisible:e})=>!e||t.length===0?null:a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Wt,{className:"w-5 h-5 text-red-600"}),a.jsx("h3",{className:"text-sm font-semibold text-red-800",children:"Please fix the following errors before submitting:"})]}),a.jsx("ul",{className:"list-disc list-inside space-y-1",children:t.map((n,s)=>a.jsx("li",{className:"text-sm text-red-700",children:n},s))})]}),Vy=({id:t,title:e,isActive:n,onToggle:s,children:r})=>{const o=g.useRef(null);return g.useEffect(()=>{n&&o.current&&o.current.scrollIntoView({behavior:"smooth",block:"start"})},[n]),a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",ref:o,onClick:()=>s(t),className:`w-full text-left p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors ${n?"bg-[#ef4805] text-white":"text-gray-700"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:e}),n?a.jsx(nu,{className:"w-4 h-4"}):a.jsx(tu,{className:"w-4 h-4"})]})}),n&&a.jsx("div",{className:"p-6 space-y-6",children:r})]})},Mc=g.forwardRef(({className:t,type:e,...n},s)=>a.jsx("input",{type:e,className:D("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n}));Mc.displayName="Input";var zy="Label",Rc=g.forwardRef((t,e)=>a.jsx(J.label,{...t,ref:e,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=t.onMouseDown)==null||r.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Rc.displayName=zy;var Dc=Rc;const Yy=Ps("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Fc=g.forwardRef(({className:t,...e},n)=>a.jsx(Dc,{ref:n,className:D(Yy(),t),...e}));Fc.displayName=Dc.displayName;const Gy=t=>{if(!t||t.trim()==="")return{isValid:!1,message:"Contact/WhatsApp number is required"};const e=t.replace(/\D/g,"");return e.length<10||e.length>15?{isValid:!1,message:"Contact/WhatsApp number must be 10-15 digits"}:/^[\d\s-()+]+$/.test(t)?{isValid:!0}:{isValid:!1,message:"Contact/WhatsApp number can only contain digits, spaces, dashes, parentheses, and plus sign"}},Ky=t=>!t||t.trim()===""?{isValid:!1,message:"Personal email is required"}:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)?["@company","@corp","@office",".local"].some(r=>t.toLowerCase().includes(r))?{isValid:!1,message:"Please use a personal email (gmail, yahoo, etc.) to avoid firewall restrictions"}:{isValid:!0}:{isValid:!1,message:"Please enter a valid personal email address"},q=({type:t,value:e,onChange:n,placeholder:s,required:r=!1,className:o="",label:i,onValidationChange:l,hasError:c=!1,disabled:u=!1})=>{const[d,h]=g.useState(""),[m,f]=g.useState(!1),p=S=>{if(!r&&!S.trim()){h(""),l==null||l(!0);return}let _;switch(t){case"phone":case"tel":_=Gy(S);break;case"email":_=Ky(S);break;default:_={isValid:!0}}_.isValid?(h(""),l==null||l(!0)):(h(_.message||"Invalid input"),l==null||l(!1))};g.useEffect(()=>{m&&p(e)},[e,m]);const y=S=>{let _=S.target.value;(t==="phone"||t==="tel")&&(_=_.replace(/[^\d\s\-\(\)\+]/g,"")),n(_)},v=()=>{f(!0),p(e)},w=t==="phone"||t==="tel"?"tel":t==="email"?"email":t==="date"?"date":"text",x=d&&m||c&&r&&!e.trim(),b=d||(c&&r&&!e.trim()?"This field is required.":"");return a.jsxs("div",{className:"space-y-2",children:[i&&a.jsx(Fc,{htmlFor:i,className:"block text-sm font-medium text-gray-700",children:i}),a.jsx(Mc,{id:i,type:w,value:e,onChange:y,onBlur:v,placeholder:s,disabled:u,className:`${o} ${x?"border-red-500 focus-visible:ring-red-500":""} ${u?"opacity-60 cursor-not-allowed":""}`}),x&&a.jsx("p",{className:"text-sm text-red-600",children:b})]})};function z(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ve(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function de(t,e){const n=z(t);return isNaN(e)?ve(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Ee(t,e){const n=z(t);if(isNaN(e))return ve(t,NaN);if(!e)return n;const s=n.getDate(),r=ve(t,n.getTime());r.setMonth(n.getMonth()+e+1,0);const o=r.getDate();return s>=o?r:(n.setFullYear(r.getFullYear(),r.getMonth(),s),n)}const Oo=6048e5,Jy=864e5;let Xy={};function zn(){return Xy}function Le(t,e){var l,c,u,d;const n=zn(),s=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,r=z(t),o=r.getDay(),i=(o<s?7:0)+o-s;return r.setDate(r.getDate()-i),r.setHours(0,0,0,0),r}function Tt(t){return Le(t,{weekStartsOn:1})}function $c(t){const e=z(t),n=e.getFullYear(),s=ve(t,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const r=Tt(s),o=ve(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const i=Tt(o);return e.getTime()>=r.getTime()?n+1:e.getTime()>=i.getTime()?n:n-1}function en(t){const e=z(t);return e.setHours(0,0,0,0),e}function bs(t){const e=z(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function De(t,e){const n=en(t),s=en(e),r=+n-bs(n),o=+s-bs(s);return Math.round((r-o)/Jy)}function Qy(t){const e=$c(t),n=ve(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Tt(n)}function Ir(t,e){const n=e*7;return de(t,n)}function Zy(t,e){return Ee(t,e*12)}function ev(t){let e;return t.forEach(function(n){const s=z(n);(e===void 0||e<s||isNaN(Number(s)))&&(e=s)}),e||new Date(NaN)}function tv(t){let e;return t.forEach(n=>{const s=z(n);(!e||e>s||isNaN(+s))&&(e=s)}),e||new Date(NaN)}function fe(t,e){const n=en(t),s=en(e);return+n==+s}function To(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function nv(t){if(!To(t)&&typeof t!="number")return!1;const e=z(t);return!isNaN(Number(e))}function $n(t,e){const n=z(t),s=z(e),r=n.getFullYear()-s.getFullYear(),o=n.getMonth()-s.getMonth();return r*12+o}function sv(t,e,n){const s=Le(t,n),r=Le(e,n),o=+s-bs(s),i=+r-bs(r);return Math.round((o-i)/Oo)}function Io(t){const e=z(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function me(t){const e=z(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Lc(t){const e=z(t),n=ve(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Mo(t,e){var l,c,u,d;const n=zn(),s=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,r=z(t),o=r.getDay(),i=(o<s?-7:0)+6-(o-s);return r.setDate(r.getDate()+i),r.setHours(23,59,59,999),r}function Bc(t){return Mo(t,{weekStartsOn:1})}const rv={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ov=(t,e,n)=>{let s;const r=rv[t];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function lr(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const av={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},iv={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},lv={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cv={date:lr({formats:av,defaultWidth:"full"}),time:lr({formats:iv,defaultWidth:"full"}),dateTime:lr({formats:lv,defaultWidth:"full"})},dv={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},uv=(t,e,n,s)=>dv[t];function wn(t){return(e,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let r;if(s==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):i;r=t.formattingValues[l]||t.formattingValues[i]}else{const i=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;r=t.values[l]||t.values[i]}const o=t.argumentCallback?t.argumentCallback(e):e;return r[o]}}const hv={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},fv={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},mv={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pv={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},gv={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},yv={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vv=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},xv={ordinalNumber:vv,era:wn({values:hv,defaultWidth:"wide"}),quarter:wn({values:fv,defaultWidth:"wide",argumentCallback:t=>t-1}),month:wn({values:mv,defaultWidth:"wide"}),day:wn({values:pv,defaultWidth:"wide"}),dayPeriod:wn({values:gv,defaultWidth:"wide",formattingValues:yv,defaultFormattingWidth:"wide"})};function Sn(t){return(e,n={})=>{const s=n.width,r=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],o=e.match(r);if(!o)return null;const i=o[0],l=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?wv(l,h=>h.test(i)):bv(l,h=>h.test(i));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(i.length);return{value:u,rest:d}}}function bv(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function wv(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Sv(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const r=s[0],o=e.match(t.parsePattern);if(!o)return null;let i=t.valueCallback?t.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;const l=e.slice(r.length);return{value:i,rest:l}}}const _v=/^(\d+)(th|st|nd|rd)?/i,jv=/\d+/i,Nv={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Cv={any:[/^b/i,/^(a|c)/i]},kv={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Pv={any:[/1/i,/2/i,/3/i,/4/i]},Av={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ev={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ov={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Tv={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Iv={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Mv={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Rv={ordinalNumber:Sv({matchPattern:_v,parsePattern:jv,valueCallback:t=>parseInt(t,10)}),era:Sn({matchPatterns:Nv,defaultMatchWidth:"wide",parsePatterns:Cv,defaultParseWidth:"any"}),quarter:Sn({matchPatterns:kv,defaultMatchWidth:"wide",parsePatterns:Pv,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Sn({matchPatterns:Av,defaultMatchWidth:"wide",parsePatterns:Ev,defaultParseWidth:"any"}),day:Sn({matchPatterns:Ov,defaultMatchWidth:"wide",parsePatterns:Tv,defaultParseWidth:"any"}),dayPeriod:Sn({matchPatterns:Iv,defaultMatchWidth:"any",parsePatterns:Mv,defaultParseWidth:"any"})},Wc={code:"en-US",formatDistance:ov,formatLong:cv,formatRelative:uv,localize:xv,match:Rv,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Dv(t){const e=z(t);return De(e,Lc(e))+1}function Hc(t){const e=z(t),n=+Tt(e)-+Qy(e);return Math.round(n/Oo)+1}function Uc(t,e){var d,h,m,f;const n=z(t),s=n.getFullYear(),r=zn(),o=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(m=r.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,i=ve(t,0);i.setFullYear(s+1,0,o),i.setHours(0,0,0,0);const l=Le(i,e),c=ve(t,0);c.setFullYear(s,0,o),c.setHours(0,0,0,0);const u=Le(c,e);return n.getTime()>=l.getTime()?s+1:n.getTime()>=u.getTime()?s:s-1}function Fv(t,e){var l,c,u,d;const n=zn(),s=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,r=Uc(t,e),o=ve(t,0);return o.setFullYear(r,0,s),o.setHours(0,0,0,0),Le(o,e)}function qc(t,e){const n=z(t),s=+Le(n,e)-+Fv(n,e);return Math.round(s/Oo)+1}function K(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const rt={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return K(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):K(n+1,2)},d(t,e){return K(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return K(t.getHours()%12||12,e.length)},H(t,e){return K(t.getHours(),e.length)},m(t,e){return K(t.getMinutes(),e.length)},s(t,e){return K(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),r=Math.trunc(s*Math.pow(10,n-3));return K(r,e.length)}},Lt={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ea={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),r=s>0?s:1-s;return n.ordinalNumber(r,{unit:"year"})}return rt.y(t,e)},Y:function(t,e,n,s){const r=Uc(t,s),o=r>0?r:1-r;if(e==="YY"){const i=o%100;return K(i,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):K(o,e.length)},R:function(t,e){const n=$c(t);return K(n,e.length)},u:function(t,e){const n=t.getFullYear();return K(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return K(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return K(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return rt.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return K(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const r=qc(t,s);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):K(r,e.length)},I:function(t,e,n){const s=Hc(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):K(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):rt.d(t,e)},D:function(t,e,n){const s=Dv(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):K(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const r=t.getDay(),o=(r-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return K(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const r=t.getDay(),o=(r-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return K(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),r=s===0?7:s;switch(e){case"i":return String(r);case"ii":return K(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let r;switch(s===12?r=Lt.noon:s===0?r=Lt.midnight:r=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let r;switch(s>=17?r=Lt.evening:s>=12?r=Lt.afternoon:s>=4?r=Lt.morning:r=Lt.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return rt.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):rt.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):K(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):K(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):rt.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):rt.s(t,e)},S:function(t,e){return rt.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return Ta(s);case"XXXX":case"XX":return Nt(s);case"XXXXX":case"XXX":default:return Nt(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return Ta(s);case"xxxx":case"xx":return Nt(s);case"xxxxx":case"xxx":default:return Nt(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Oa(s,":");case"OOOO":default:return"GMT"+Nt(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Oa(s,":");case"zzzz":default:return"GMT"+Nt(s,":")}},t:function(t,e,n){const s=Math.trunc(t.getTime()/1e3);return K(s,e.length)},T:function(t,e,n){const s=t.getTime();return K(s,e.length)}};function Oa(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=Math.trunc(s/60),o=s%60;return o===0?n+String(r):n+String(r)+e+K(o,2)}function Ta(t,e){return t%60===0?(t>0?"-":"+")+K(Math.abs(t)/60,2):Nt(t,e)}function Nt(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=K(Math.trunc(s/60),2),o=K(s%60,2);return n+r+e+o}const Ia=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Vc=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},$v=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],r=n[2];if(!r)return Ia(t,e);let o;switch(s){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Ia(s,e)).replace("{{time}}",Vc(r,e))},Lv={p:Vc,P:$v},Bv=/^D+$/,Wv=/^Y+$/,Hv=["D","DD","YY","YYYY"];function Uv(t){return Bv.test(t)}function qv(t){return Wv.test(t)}function Vv(t,e,n){const s=zv(t,e,n);if(console.warn(s),Hv.includes(t))throw new RangeError(s)}function zv(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Yv=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Gv=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Kv=/^'([^]*?)'?$/,Jv=/''/g,Xv=/[a-zA-Z]/;function vt(t,e,n){var d,h,m,f,p,y,v,w;const s=zn(),r=(n==null?void 0:n.locale)??s.locale??Wc,o=(n==null?void 0:n.firstWeekContainsDate)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((f=(m=s.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((y=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:y.weekStartsOn)??s.weekStartsOn??((w=(v=s.locale)==null?void 0:v.options)==null?void 0:w.weekStartsOn)??0,l=z(t);if(!nv(l))throw new RangeError("Invalid time value");let c=e.match(Gv).map(x=>{const b=x[0];if(b==="p"||b==="P"){const S=Lv[b];return S(x,r.formatLong)}return x}).join("").match(Yv).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const b=x[0];if(b==="'")return{isToken:!1,value:Qv(x)};if(Ea[b])return{isToken:!0,value:x};if(b.match(Xv))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:x}});r.localize.preprocessor&&(c=r.localize.preprocessor(l,c));const u={firstWeekContainsDate:o,weekStartsOn:i,locale:r};return c.map(x=>{if(!x.isToken)return x.value;const b=x.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&qv(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Uv(b))&&Vv(b,e,String(t));const S=Ea[b[0]];return S(l,b,r.localize,u)}).join("")}function Qv(t){const e=t.match(Kv);return e?e[1].replace(Jv,"'"):t}function Zv(t){const e=z(t),n=e.getFullYear(),s=e.getMonth(),r=ve(t,0);return r.setFullYear(n,s+1,0),r.setHours(0,0,0,0),r.getDate()}function ex(t){return Math.trunc(+z(t)/1e3)}function tx(t){const e=z(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function nx(t,e){return sv(tx(t),me(t),e)+1}function Mr(t,e){const n=z(t),s=z(e);return n.getTime()>s.getTime()}function zc(t,e){const n=z(t),s=z(e);return+n<+s}function Ro(t,e){const n=z(t),s=z(e);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function sx(t,e){const n=z(t),s=z(e);return n.getFullYear()===s.getFullYear()}function cr(t,e){return de(t,-e)}function dr(t,e){const n=z(t),s=n.getFullYear(),r=n.getDate(),o=ve(t,0);o.setFullYear(s,e,15),o.setHours(0,0,0,0);const i=Zv(o);return n.setMonth(e,Math.min(r,i)),n}function Ma(t,e){const n=z(t);return isNaN(+n)?ve(t,NaN):(n.setFullYear(e),n)}var M=function(){return M=Object.assign||function(e){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},M.apply(this,arguments)};function rx(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function Yc(t,e,n){for(var s=0,r=e.length,o;s<r;s++)(o||!(s in e))&&(o||(o=Array.prototype.slice.call(e,0,s)),o[s]=e[s]);return t.concat(o||Array.prototype.slice.call(e))}function Yn(t){return t.mode==="multiple"}function Gn(t){return t.mode==="range"}function Vs(t){return t.mode==="single"}var ox={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function ax(t,e){return vt(t,"LLLL y",e)}function ix(t,e){return vt(t,"d",e)}function lx(t,e){return vt(t,"LLLL",e)}function cx(t){return"".concat(t)}function dx(t,e){return vt(t,"cccccc",e)}function ux(t,e){return vt(t,"yyyy",e)}var hx=Object.freeze({__proto__:null,formatCaption:ax,formatDay:ix,formatMonthCaption:lx,formatWeekNumber:cx,formatWeekdayName:dx,formatYearCaption:ux}),fx=function(t,e,n){return vt(t,"do MMMM (EEEE)",n)},mx=function(){return"Month: "},px=function(){return"Go to next month"},gx=function(){return"Go to previous month"},yx=function(t,e){return vt(t,"cccc",e)},vx=function(t){return"Week n. ".concat(t)},xx=function(){return"Year: "},bx=Object.freeze({__proto__:null,labelDay:fx,labelMonthDropdown:mx,labelNext:px,labelPrevious:gx,labelWeekNumber:vx,labelWeekday:yx,labelYearDropdown:xx});function wx(){var t="buttons",e=ox,n=Wc,s={},r={},o=1,i={},l=new Date;return{captionLayout:t,classNames:e,formatters:hx,labels:bx,locale:n,modifiersClassNames:s,modifiers:r,numberOfMonths:o,styles:i,today:l,mode:"default"}}function Sx(t){var e=t.fromYear,n=t.toYear,s=t.fromMonth,r=t.toMonth,o=t.fromDate,i=t.toDate;return s?o=me(s):e&&(o=new Date(e,0,1)),r?i=Io(r):n&&(i=new Date(n,11,31)),{fromDate:o?en(o):void 0,toDate:i?en(i):void 0}}var Gc=g.createContext(void 0);function _x(t){var e,n=t.initialProps,s=wx(),r=Sx(n),o=r.fromDate,i=r.toDate,l=(e=n.captionLayout)!==null&&e!==void 0?e:s.captionLayout;l!=="buttons"&&(!o||!i)&&(l="buttons");var c;(Vs(n)||Yn(n)||Gn(n))&&(c=n.onSelect);var u=M(M(M({},s),n),{captionLayout:l,classNames:M(M({},s.classNames),n.classNames),components:M({},n.components),formatters:M(M({},s.formatters),n.formatters),fromDate:o,labels:M(M({},s.labels),n.labels),mode:n.mode||s.mode,modifiers:M(M({},s.modifiers),n.modifiers),modifiersClassNames:M(M({},s.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:M(M({},s.styles),n.styles),toDate:i});return a.jsx(Gc.Provider,{value:u,children:t.children})}function se(){var t=g.useContext(Gc);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function Kc(t){var e=se(),n=e.locale,s=e.classNames,r=e.styles,o=e.formatters.formatCaption;return a.jsx("div",{className:s.caption_label,style:r.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:o(t.displayMonth,{locale:n})})}function jx(t){return a.jsx("svg",M({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:a.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Jc(t){var e,n,s=t.onChange,r=t.value,o=t.children,i=t.caption,l=t.className,c=t.style,u=se(),d=(n=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:jx;return a.jsxs("div",{className:l,style:c,children:[a.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),a.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:r,onChange:s,children:o}),a.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[i,a.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function Nx(t){var e,n=se(),s=n.fromDate,r=n.toDate,o=n.styles,i=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!s)return a.jsx(a.Fragment,{});if(!r)return a.jsx(a.Fragment,{});var h=[];if(sx(s,r))for(var m=me(s),f=s.getMonth();f<=r.getMonth();f++)h.push(dr(m,f));else for(var m=me(new Date),f=0;f<=11;f++)h.push(dr(m,f));var p=function(v){var w=Number(v.target.value),x=dr(me(t.displayMonth),w);t.onChange(x)},y=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:Jc;return a.jsx(y,{name:"months","aria-label":d(),className:c.dropdown_month,style:o.dropdown_month,onChange:p,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:i}),children:h.map(function(v){return a.jsx("option",{value:v.getMonth(),children:l(v,{locale:i})},v.getMonth())})})}function Cx(t){var e,n=t.displayMonth,s=se(),r=s.fromDate,o=s.toDate,i=s.locale,l=s.styles,c=s.classNames,u=s.components,d=s.formatters.formatYearCaption,h=s.labels.labelYearDropdown,m=[];if(!r)return a.jsx(a.Fragment,{});if(!o)return a.jsx(a.Fragment,{});for(var f=r.getFullYear(),p=o.getFullYear(),y=f;y<=p;y++)m.push(Ma(Lc(new Date),y));var v=function(x){var b=Ma(me(n),Number(x.target.value));t.onChange(b)},w=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:Jc;return a.jsx(w,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:v,value:n.getFullYear(),caption:d(n,{locale:i}),children:m.map(function(x){return a.jsx("option",{value:x.getFullYear(),children:d(x,{locale:i})},x.getFullYear())})})}function kx(t,e){var n=g.useState(t),s=n[0],r=n[1],o=e===void 0?s:e;return[o,r]}function Px(t){var e=t.month,n=t.defaultMonth,s=t.today,r=e||n||s||new Date,o=t.toDate,i=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(o&&$n(o,r)<0){var u=-1*(c-1);r=Ee(o,u)}return i&&$n(r,i)<0&&(r=i),me(r)}function Ax(){var t=se(),e=Px(t),n=kx(e,t.month),s=n[0],r=n[1],o=function(i){var l;if(!t.disableNavigation){var c=me(i);r(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[s,o]}function Ex(t,e){for(var n=e.reverseMonths,s=e.numberOfMonths,r=me(t),o=me(Ee(r,s)),i=$n(o,r),l=[],c=0;c<i;c++){var u=Ee(r,c);l.push(u)}return n&&(l=l.reverse()),l}function Ox(t,e){if(!e.disableNavigation){var n=e.toDate,s=e.pagedNavigation,r=e.numberOfMonths,o=r===void 0?1:r,i=s?o:1,l=me(t);if(!n)return Ee(l,i);var c=$n(n,t);if(!(c<o))return Ee(l,i)}}function Tx(t,e){if(!e.disableNavigation){var n=e.fromDate,s=e.pagedNavigation,r=e.numberOfMonths,o=r===void 0?1:r,i=s?o:1,l=me(t);if(!n)return Ee(l,-i);var c=$n(l,n);if(!(c<=0))return Ee(l,-i)}}var Xc=g.createContext(void 0);function Ix(t){var e=se(),n=Ax(),s=n[0],r=n[1],o=Ex(s,e),i=Ox(s,e),l=Tx(s,e),c=function(h){return o.some(function(m){return Ro(h,m)})},u=function(h,m){c(h)||(m&&zc(h,m)?r(Ee(h,1+e.numberOfMonths*-1)):r(h))},d={currentMonth:s,displayMonths:o,goToMonth:r,goToDate:u,previousMonth:l,nextMonth:i,isDateDisplayed:c};return a.jsx(Xc.Provider,{value:d,children:t.children})}function Kn(){var t=g.useContext(Xc);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function Ra(t){var e,n=se(),s=n.classNames,r=n.styles,o=n.components,i=Kn().goToMonth,l=function(d){i(Ee(d,t.displayIndex?-t.displayIndex:0))},c=(e=o==null?void 0:o.CaptionLabel)!==null&&e!==void 0?e:Kc,u=a.jsx(c,{id:t.id,displayMonth:t.displayMonth});return a.jsxs("div",{className:s.caption_dropdowns,style:r.caption_dropdowns,children:[a.jsx("div",{className:s.vhidden,children:u}),a.jsx(Nx,{onChange:l,displayMonth:t.displayMonth}),a.jsx(Cx,{onChange:l,displayMonth:t.displayMonth})]})}function Mx(t){return a.jsx("svg",M({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:a.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Rx(t){return a.jsx("svg",M({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:a.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var ws=g.forwardRef(function(t,e){var n=se(),s=n.classNames,r=n.styles,o=[s.button_reset,s.button];t.className&&o.push(t.className);var i=o.join(" "),l=M(M({},r.button_reset),r.button);return t.style&&Object.assign(l,t.style),a.jsx("button",M({},t,{ref:e,type:"button",className:i,style:l}))});function Dx(t){var e,n,s=se(),r=s.dir,o=s.locale,i=s.classNames,l=s.styles,c=s.labels,u=c.labelPrevious,d=c.labelNext,h=s.components;if(!t.nextMonth&&!t.previousMonth)return a.jsx(a.Fragment,{});var m=u(t.previousMonth,{locale:o}),f=[i.nav_button,i.nav_button_previous].join(" "),p=d(t.nextMonth,{locale:o}),y=[i.nav_button,i.nav_button_next].join(" "),v=(e=h==null?void 0:h.IconRight)!==null&&e!==void 0?e:Rx,w=(n=h==null?void 0:h.IconLeft)!==null&&n!==void 0?n:Mx;return a.jsxs("div",{className:i.nav,style:l.nav,children:[!t.hidePrevious&&a.jsx(ws,{name:"previous-month","aria-label":m,className:f,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:r==="rtl"?a.jsx(v,{className:i.nav_icon,style:l.nav_icon}):a.jsx(w,{className:i.nav_icon,style:l.nav_icon})}),!t.hideNext&&a.jsx(ws,{name:"next-month","aria-label":p,className:y,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:r==="rtl"?a.jsx(w,{className:i.nav_icon,style:l.nav_icon}):a.jsx(v,{className:i.nav_icon,style:l.nav_icon})})]})}function Da(t){var e=se().numberOfMonths,n=Kn(),s=n.previousMonth,r=n.nextMonth,o=n.goToMonth,i=n.displayMonths,l=i.findIndex(function(p){return Ro(t.displayMonth,p)}),c=l===0,u=l===i.length-1,d=e>1&&(c||!u),h=e>1&&(u||!c),m=function(){s&&o(s)},f=function(){r&&o(r)};return a.jsx(Dx,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:h,nextMonth:r,previousMonth:s,onPreviousClick:m,onNextClick:f})}function Fx(t){var e,n=se(),s=n.classNames,r=n.disableNavigation,o=n.styles,i=n.captionLayout,l=n.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:Kc,u;return r?u=a.jsx(c,{id:t.id,displayMonth:t.displayMonth}):i==="dropdown"?u=a.jsx(Ra,{displayMonth:t.displayMonth,id:t.id}):i==="dropdown-buttons"?u=a.jsxs(a.Fragment,{children:[a.jsx(Ra,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),a.jsx(Da,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=a.jsxs(a.Fragment,{children:[a.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),a.jsx(Da,{displayMonth:t.displayMonth,id:t.id})]}),a.jsx("div",{className:s.caption,style:o.caption,children:u})}function $x(t){var e=se(),n=e.footer,s=e.styles,r=e.classNames.tfoot;return n?a.jsx("tfoot",{className:r,style:s.tfoot,children:a.jsx("tr",{children:a.jsx("td",{colSpan:8,children:n})})}):a.jsx(a.Fragment,{})}function Lx(t,e,n){for(var s=n?Tt(new Date):Le(new Date,{locale:t,weekStartsOn:e}),r=[],o=0;o<7;o++){var i=de(s,o);r.push(i)}return r}function Bx(){var t=se(),e=t.classNames,n=t.styles,s=t.showWeekNumber,r=t.locale,o=t.weekStartsOn,i=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=Lx(r,o,i);return a.jsxs("tr",{style:n.head_row,className:e.head_row,children:[s&&a.jsx("td",{style:n.head_cell,className:e.head_cell}),u.map(function(d,h){return a.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":c(d,{locale:r}),children:l(d,{locale:r})},h)})]})}function Wx(){var t,e=se(),n=e.classNames,s=e.styles,r=e.components,o=(t=r==null?void 0:r.HeadRow)!==null&&t!==void 0?t:Bx;return a.jsx("thead",{style:s.head,className:n.head,children:a.jsx(o,{})})}function Hx(t){var e=se(),n=e.locale,s=e.formatters.formatDay;return a.jsx(a.Fragment,{children:s(t.date,{locale:n})})}var Do=g.createContext(void 0);function Ux(t){if(!Yn(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return a.jsx(Do.Provider,{value:e,children:t.children})}return a.jsx(qx,{initialProps:t.initialProps,children:t.children})}function qx(t){var e=t.initialProps,n=t.children,s=e.selected,r=e.min,o=e.max,i=function(u,d,h){var m,f;(m=e.onDayClick)===null||m===void 0||m.call(e,u,d,h);var p=!!(d.selected&&r&&(s==null?void 0:s.length)===r);if(!p){var y=!!(!d.selected&&o&&(s==null?void 0:s.length)===o);if(!y){var v=s?Yc([],s):[];if(d.selected){var w=v.findIndex(function(x){return fe(u,x)});v.splice(w,1)}else v.push(u);(f=e.onSelect)===null||f===void 0||f.call(e,v,u,d,h)}}},l={disabled:[]};s&&l.disabled.push(function(u){var d=o&&s.length>o-1,h=s.some(function(m){return fe(m,u)});return!!(d&&!h)});var c={selected:s,onDayClick:i,modifiers:l};return a.jsx(Do.Provider,{value:c,children:n})}function Fo(){var t=g.useContext(Do);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function Vx(t,e){var n=e||{},s=n.from,r=n.to;return s&&r?fe(r,t)&&fe(s,t)?void 0:fe(r,t)?{from:r,to:void 0}:fe(s,t)?void 0:Mr(s,t)?{from:t,to:r}:{from:s,to:t}:r?Mr(t,r)?{from:r,to:t}:{from:t,to:r}:s?zc(t,s)?{from:t,to:s}:{from:s,to:t}:{from:t,to:void 0}}var $o=g.createContext(void 0);function zx(t){if(!Gn(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return a.jsx($o.Provider,{value:e,children:t.children})}return a.jsx(Yx,{initialProps:t.initialProps,children:t.children})}function Yx(t){var e=t.initialProps,n=t.children,s=e.selected,r=s||{},o=r.from,i=r.to,l=e.min,c=e.max,u=function(f,p,y){var v,w;(v=e.onDayClick)===null||v===void 0||v.call(e,f,p,y);var x=Vx(f,s);(w=e.onSelect)===null||w===void 0||w.call(e,x,f,p,y)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(d.range_start=[o],i?(d.range_end=[i],fe(o,i)||(d.range_middle=[{after:o,before:i}])):d.range_end=[o]):i&&(d.range_start=[i],d.range_end=[i]),l&&(o&&!i&&d.disabled.push({after:cr(o,l-1),before:de(o,l-1)}),o&&i&&d.disabled.push({after:o,before:de(o,l-1)}),!o&&i&&d.disabled.push({after:cr(i,l-1),before:de(i,l-1)})),c){if(o&&!i&&(d.disabled.push({before:de(o,-c+1)}),d.disabled.push({after:de(o,c-1)})),o&&i){var h=De(i,o)+1,m=c-h;d.disabled.push({before:cr(o,m)}),d.disabled.push({after:de(i,m)})}!o&&i&&(d.disabled.push({before:de(i,-c+1)}),d.disabled.push({after:de(i,c-1)}))}return a.jsx($o.Provider,{value:{selected:s,onDayClick:u,modifiers:d},children:n})}function Lo(){var t=g.useContext($o);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function us(t){return Array.isArray(t)?Yc([],t):t!==void 0?[t]:[]}function Gx(t){var e={};return Object.entries(t).forEach(function(n){var s=n[0],r=n[1];e[s]=us(r)}),e}var Oe;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Oe||(Oe={}));var Kx=Oe.Selected,Ue=Oe.Disabled,Jx=Oe.Hidden,Xx=Oe.Today,ur=Oe.RangeEnd,hr=Oe.RangeMiddle,fr=Oe.RangeStart,Qx=Oe.Outside;function Zx(t,e,n){var s,r=(s={},s[Kx]=us(t.selected),s[Ue]=us(t.disabled),s[Jx]=us(t.hidden),s[Xx]=[t.today],s[ur]=[],s[hr]=[],s[fr]=[],s[Qx]=[],s);return t.fromDate&&r[Ue].push({before:t.fromDate}),t.toDate&&r[Ue].push({after:t.toDate}),Yn(t)?r[Ue]=r[Ue].concat(e.modifiers[Ue]):Gn(t)&&(r[Ue]=r[Ue].concat(n.modifiers[Ue]),r[fr]=n.modifiers[fr],r[hr]=n.modifiers[hr],r[ur]=n.modifiers[ur]),r}var Qc=g.createContext(void 0);function eb(t){var e=se(),n=Fo(),s=Lo(),r=Zx(e,n,s),o=Gx(e.modifiers),i=M(M({},r),o);return a.jsx(Qc.Provider,{value:i,children:t.children})}function Zc(){var t=g.useContext(Qc);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function tb(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function nb(t){return!!(t&&typeof t=="object"&&"from"in t)}function sb(t){return!!(t&&typeof t=="object"&&"after"in t)}function rb(t){return!!(t&&typeof t=="object"&&"before"in t)}function ob(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function ab(t,e){var n,s=e.from,r=e.to;if(s&&r){var o=De(r,s)<0;o&&(n=[r,s],s=n[0],r=n[1]);var i=De(t,s)>=0&&De(r,t)>=0;return i}return r?fe(r,t):s?fe(s,t):!1}function ib(t){return To(t)}function lb(t){return Array.isArray(t)&&t.every(To)}function cb(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(ib(n))return fe(t,n);if(lb(n))return n.includes(t);if(nb(n))return ab(t,n);if(ob(n))return n.dayOfWeek.includes(t.getDay());if(tb(n)){var s=De(n.before,t),r=De(n.after,t),o=s>0,i=r<0,l=Mr(n.before,n.after);return l?i&&o:o||i}return sb(n)?De(t,n.after)>0:rb(n)?De(n.before,t)>0:typeof n=="function"?n(t):!1})}function Bo(t,e,n){var s=Object.keys(e).reduce(function(o,i){var l=e[i];return cb(t,l)&&o.push(i),o},[]),r={};return s.forEach(function(o){return r[o]=!0}),n&&!Ro(t,n)&&(r.outside=!0),r}function db(t,e){for(var n=me(t[0]),s=Io(t[t.length-1]),r,o,i=n;i<=s;){var l=Bo(i,e),c=!l.disabled&&!l.hidden;if(!c){i=de(i,1);continue}if(l.selected)return i;l.today&&!o&&(o=i),r||(r=i),i=de(i,1)}return o||r}var ub=365;function ed(t,e){var n=e.moveBy,s=e.direction,r=e.context,o=e.modifiers,i=e.retry,l=i===void 0?{count:0,lastFocused:t}:i,c=r.weekStartsOn,u=r.fromDate,d=r.toDate,h=r.locale,m={day:de,week:Ir,month:Ee,year:Zy,startOfWeek:function(v){return r.ISOWeek?Tt(v):Le(v,{locale:h,weekStartsOn:c})},endOfWeek:function(v){return r.ISOWeek?Bc(v):Mo(v,{locale:h,weekStartsOn:c})}},f=m[n](t,s==="after"?1:-1);s==="before"&&u?f=ev([u,f]):s==="after"&&d&&(f=tv([d,f]));var p=!0;if(o){var y=Bo(f,o);p=!y.disabled&&!y.hidden}return p?f:l.count>ub?l.lastFocused:ed(f,{moveBy:n,direction:s,context:r,modifiers:o,retry:M(M({},l),{count:l.count+1})})}var td=g.createContext(void 0);function hb(t){var e=Kn(),n=Zc(),s=g.useState(),r=s[0],o=s[1],i=g.useState(),l=i[0],c=i[1],u=db(e.displayMonths,n),d=r??(l&&e.isDateDisplayed(l))?l:u,h=function(){c(r),o(void 0)},m=function(v){o(v)},f=se(),p=function(v,w){if(r){var x=ed(r,{moveBy:v,direction:w,context:f,modifiers:n});fe(r,x)||(e.goToDate(x,r),m(x))}},y={focusedDay:r,focusTarget:d,blur:h,focus:m,focusDayAfter:function(){return p("day","after")},focusDayBefore:function(){return p("day","before")},focusWeekAfter:function(){return p("week","after")},focusWeekBefore:function(){return p("week","before")},focusMonthBefore:function(){return p("month","before")},focusMonthAfter:function(){return p("month","after")},focusYearBefore:function(){return p("year","before")},focusYearAfter:function(){return p("year","after")},focusStartOfWeek:function(){return p("startOfWeek","before")},focusEndOfWeek:function(){return p("endOfWeek","after")}};return a.jsx(td.Provider,{value:y,children:t.children})}function Wo(){var t=g.useContext(td);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function fb(t,e){var n=Zc(),s=Bo(t,n,e);return s}var Ho=g.createContext(void 0);function mb(t){if(!Vs(t.initialProps)){var e={selected:void 0};return a.jsx(Ho.Provider,{value:e,children:t.children})}return a.jsx(pb,{initialProps:t.initialProps,children:t.children})}function pb(t){var e=t.initialProps,n=t.children,s=function(o,i,l){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,o,i,l),i.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,o,i,l);return}(d=e.onSelect)===null||d===void 0||d.call(e,o,o,i,l)},r={selected:e.selected,onDayClick:s};return a.jsx(Ho.Provider,{value:r,children:n})}function nd(){var t=g.useContext(Ho);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function gb(t,e){var n=se(),s=nd(),r=Fo(),o=Lo(),i=Wo(),l=i.focusDayAfter,c=i.focusDayBefore,u=i.focusWeekAfter,d=i.focusWeekBefore,h=i.blur,m=i.focus,f=i.focusMonthBefore,p=i.focusMonthAfter,y=i.focusYearBefore,v=i.focusYearAfter,w=i.focusStartOfWeek,x=i.focusEndOfWeek,b=function(C){var N,F,oe,ee;Vs(n)?(N=s.onDayClick)===null||N===void 0||N.call(s,t,e,C):Yn(n)?(F=r.onDayClick)===null||F===void 0||F.call(r,t,e,C):Gn(n)?(oe=o.onDayClick)===null||oe===void 0||oe.call(o,t,e,C):(ee=n.onDayClick)===null||ee===void 0||ee.call(n,t,e,C)},S=function(C){var N;m(t),(N=n.onDayFocus)===null||N===void 0||N.call(n,t,e,C)},_=function(C){var N;h(),(N=n.onDayBlur)===null||N===void 0||N.call(n,t,e,C)},j=function(C){var N;(N=n.onDayMouseEnter)===null||N===void 0||N.call(n,t,e,C)},k=function(C){var N;(N=n.onDayMouseLeave)===null||N===void 0||N.call(n,t,e,C)},A=function(C){var N;(N=n.onDayPointerEnter)===null||N===void 0||N.call(n,t,e,C)},P=function(C){var N;(N=n.onDayPointerLeave)===null||N===void 0||N.call(n,t,e,C)},I=function(C){var N;(N=n.onDayTouchCancel)===null||N===void 0||N.call(n,t,e,C)},O=function(C){var N;(N=n.onDayTouchEnd)===null||N===void 0||N.call(n,t,e,C)},E=function(C){var N;(N=n.onDayTouchMove)===null||N===void 0||N.call(n,t,e,C)},W=function(C){var N;(N=n.onDayTouchStart)===null||N===void 0||N.call(n,t,e,C)},$=function(C){var N;(N=n.onDayKeyUp)===null||N===void 0||N.call(n,t,e,C)},Y=function(C){var N;switch(C.key){case"ArrowLeft":C.preventDefault(),C.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":C.preventDefault(),C.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":C.preventDefault(),C.stopPropagation(),u();break;case"ArrowUp":C.preventDefault(),C.stopPropagation(),d();break;case"PageUp":C.preventDefault(),C.stopPropagation(),C.shiftKey?y():f();break;case"PageDown":C.preventDefault(),C.stopPropagation(),C.shiftKey?v():p();break;case"Home":C.preventDefault(),C.stopPropagation(),w();break;case"End":C.preventDefault(),C.stopPropagation(),x();break}(N=n.onDayKeyDown)===null||N===void 0||N.call(n,t,e,C)},T={onClick:b,onFocus:S,onBlur:_,onKeyDown:Y,onKeyUp:$,onMouseEnter:j,onMouseLeave:k,onPointerEnter:A,onPointerLeave:P,onTouchCancel:I,onTouchEnd:O,onTouchMove:E,onTouchStart:W};return T}function yb(){var t=se(),e=nd(),n=Fo(),s=Lo(),r=Vs(t)?e.selected:Yn(t)?n.selected:Gn(t)?s.selected:void 0;return r}function vb(t){return Object.values(Oe).includes(t)}function xb(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(s){var r=t.modifiersClassNames[s];if(r)n.push(r);else if(vb(s)){var o=t.classNames["day_".concat(s)];o&&n.push(o)}}),n}function bb(t,e){var n=M({},t.styles.day);return Object.keys(e).forEach(function(s){var r;n=M(M({},n),(r=t.modifiersStyles)===null||r===void 0?void 0:r[s])}),n}function wb(t,e,n){var s,r,o,i=se(),l=Wo(),c=fb(t,e),u=gb(t,c),d=yb(),h=!!(i.onDayClick||i.mode!=="default");g.useEffect(function(){var j;c.outside||l.focusedDay&&h&&fe(l.focusedDay,t)&&((j=n.current)===null||j===void 0||j.focus())},[l.focusedDay,t,n,h,c.outside]);var m=xb(i,c).join(" "),f=bb(i,c),p=!!(c.outside&&!i.showOutsideDays||c.hidden),y=(o=(r=i.components)===null||r===void 0?void 0:r.DayContent)!==null&&o!==void 0?o:Hx,v=a.jsx(y,{date:t,displayMonth:e,activeModifiers:c}),w={style:f,className:m,children:v,role:"gridcell"},x=l.focusTarget&&fe(l.focusTarget,t)&&!c.outside,b=l.focusedDay&&fe(l.focusedDay,t),S=M(M(M({},w),(s={disabled:c.disabled,role:"gridcell"},s["aria-selected"]=c.selected,s.tabIndex=b||x?0:-1,s)),u),_={isButton:h,isHidden:p,activeModifiers:c,selectedDays:d,buttonProps:S,divProps:w};return _}function Sb(t){var e=g.useRef(null),n=wb(t.date,t.displayMonth,e);return n.isHidden?a.jsx("div",{role:"gridcell"}):n.isButton?a.jsx(ws,M({name:"day",ref:e},n.buttonProps)):a.jsx("div",M({},n.divProps))}function _b(t){var e=t.number,n=t.dates,s=se(),r=s.onWeekNumberClick,o=s.styles,i=s.classNames,l=s.locale,c=s.labels.labelWeekNumber,u=s.formatters.formatWeekNumber,d=u(Number(e),{locale:l});if(!r)return a.jsx("span",{className:i.weeknumber,style:o.weeknumber,children:d});var h=c(Number(e),{locale:l}),m=function(f){r(e,n,f)};return a.jsx(ws,{name:"week-number","aria-label":h,className:i.weeknumber,style:o.weeknumber,onClick:m,children:d})}function jb(t){var e,n,s=se(),r=s.styles,o=s.classNames,i=s.showWeekNumber,l=s.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:Sb,u=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:_b,d;return i&&(d=a.jsx("td",{className:o.cell,style:r.cell,children:a.jsx(u,{number:t.weekNumber,dates:t.dates})})),a.jsxs("tr",{className:o.row,style:r.row,children:[d,t.dates.map(function(h){return a.jsx("td",{className:o.cell,style:r.cell,role:"presentation",children:a.jsx(c,{displayMonth:t.displayMonth,date:h})},ex(h))})]})}function Fa(t,e,n){for(var s=n!=null&&n.ISOWeek?Bc(e):Mo(e,n),r=n!=null&&n.ISOWeek?Tt(t):Le(t,n),o=De(s,r),i=[],l=0;l<=o;l++)i.push(de(r,l));var c=i.reduce(function(u,d){var h=n!=null&&n.ISOWeek?Hc(d):qc(d,n),m=u.find(function(f){return f.weekNumber===h});return m?(m.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function Nb(t,e){var n=Fa(me(t),Io(t),e);if(e!=null&&e.useFixedWeeks){var s=nx(t,e);if(s<6){var r=n[n.length-1],o=r.dates[r.dates.length-1],i=Ir(o,6-s),l=Fa(Ir(o,1),i,e);n.push.apply(n,l)}}return n}function Cb(t){var e,n,s,r=se(),o=r.locale,i=r.classNames,l=r.styles,c=r.hideHead,u=r.fixedWeeks,d=r.components,h=r.weekStartsOn,m=r.firstWeekContainsDate,f=r.ISOWeek,p=Nb(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:f,locale:o,weekStartsOn:h,firstWeekContainsDate:m}),y=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:Wx,v=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:jb,w=(s=d==null?void 0:d.Footer)!==null&&s!==void 0?s:$x;return a.jsxs("table",{id:t.id,className:i.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&a.jsx(y,{}),a.jsx("tbody",{className:i.tbody,style:l.tbody,children:p.map(function(x){return a.jsx(v,{displayMonth:t.displayMonth,dates:x.dates,weekNumber:x.weekNumber},x.weekNumber)})}),a.jsx(w,{displayMonth:t.displayMonth})]})}function kb(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Pb=kb()?g.useLayoutEffect:g.useEffect,mr=!1,Ab=0;function $a(){return"react-day-picker-".concat(++Ab)}function Eb(t){var e,n=t??(mr?$a():null),s=g.useState(n),r=s[0],o=s[1];return Pb(function(){r===null&&o($a())},[]),g.useEffect(function(){mr===!1&&(mr=!0)},[]),(e=t??r)!==null&&e!==void 0?e:void 0}function Ob(t){var e,n,s=se(),r=s.dir,o=s.classNames,i=s.styles,l=s.components,c=Kn().displayMonths,u=Eb(s.id?"".concat(s.id,"-").concat(t.displayIndex):void 0),d=s.id?"".concat(s.id,"-grid-").concat(t.displayIndex):void 0,h=[o.month],m=i.month,f=t.displayIndex===0,p=t.displayIndex===c.length-1,y=!f&&!p;r==="rtl"&&(e=[f,p],p=e[0],f=e[1]),f&&(h.push(o.caption_start),m=M(M({},m),i.caption_start)),p&&(h.push(o.caption_end),m=M(M({},m),i.caption_end)),y&&(h.push(o.caption_between),m=M(M({},m),i.caption_between));var v=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:Fx;return a.jsxs("div",{className:h.join(" "),style:m,children:[a.jsx(v,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),a.jsx(Cb,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function Tb(t){var e=se(),n=e.classNames,s=e.styles;return a.jsx("div",{className:n.months,style:s.months,children:t.children})}function Ib(t){var e,n,s=t.initialProps,r=se(),o=Wo(),i=Kn(),l=g.useState(!1),c=l[0],u=l[1];g.useEffect(function(){r.initialFocus&&o.focusTarget&&(c||(o.focus(o.focusTarget),u(!0)))},[r.initialFocus,c,o.focus,o.focusTarget,o]);var d=[r.classNames.root,r.className];r.numberOfMonths>1&&d.push(r.classNames.multiple_months),r.showWeekNumber&&d.push(r.classNames.with_weeknumber);var h=M(M({},r.styles.root),r.style),m=Object.keys(s).filter(function(p){return p.startsWith("data-")}).reduce(function(p,y){var v;return M(M({},p),(v={},v[y]=s[y],v))},{}),f=(n=(e=s.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:Tb;return a.jsx("div",M({className:d.join(" "),style:h,dir:r.dir,id:r.id,nonce:s.nonce,title:s.title,lang:s.lang},m,{children:a.jsx(f,{children:i.displayMonths.map(function(p,y){return a.jsx(Ob,{displayIndex:y,displayMonth:p},y)})})}))}function Mb(t){var e=t.children,n=rx(t,["children"]);return a.jsx(_x,{initialProps:n,children:a.jsx(Ix,{children:a.jsx(mb,{initialProps:n,children:a.jsx(Ux,{initialProps:n,children:a.jsx(zx,{initialProps:n,children:a.jsx(eb,{children:a.jsx(hb,{children:e})})})})})})})}function Rb(t){return a.jsx(Mb,M({},t,{children:a.jsx(Ib,{initialProps:t})}))}function sd({className:t,classNames:e,showOutsideDays:n=!0,...s}){return a.jsx(Rb,{showOutsideDays:n,className:D("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:D(In({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:D(In({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...r})=>a.jsx(su,{className:"h-4 w-4"}),IconRight:({...r})=>a.jsx(ru,{className:"h-4 w-4"})},...s})}sd.displayName="Calendar";function La(t,[e,n]){return Math.min(n,Math.max(e,t))}var Db="VisuallyHidden",rd=g.forwardRef((t,e)=>a.jsx(J.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));rd.displayName=Db;var Fb=[" ","Enter","ArrowUp","ArrowDown"],$b=[" ","Enter"],Jn="Select",[zs,Ys,Lb]=zi(Jn),[mn,e0]=Ln(Jn,[Lb,Hs]),Gs=Hs(),[Bb,xt]=mn(Jn),[Wb,Hb]=mn(Jn),od=t=>{const{__scopeSelect:e,children:n,open:s,defaultOpen:r,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:f,form:p}=t,y=Gs(e),[v,w]=g.useState(null),[x,b]=g.useState(null),[S,_]=g.useState(!1),j=oo(u),[k=!1,A]=Vt({prop:s,defaultProp:r,onChange:o}),[P,I]=Vt({prop:i,defaultProp:l,onChange:c}),O=g.useRef(null),E=v?p||!!v.closest("form"):!0,[W,$]=g.useState(new Set),Y=Array.from(W).map(T=>T.props.value).join(";");return a.jsx(ac,{...y,children:a.jsxs(Bb,{required:f,scope:e,trigger:v,onTriggerChange:w,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:_,contentId:tn(),value:P,onValueChange:I,open:k,onOpenChange:A,dir:j,triggerPointerDownPosRef:O,disabled:m,children:[a.jsx(zs.Provider,{scope:e,children:a.jsx(Wb,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(T=>{$(C=>new Set(C).add(T))},[]),onNativeOptionRemove:g.useCallback(T=>{$(C=>{const N=new Set(C);return N.delete(T),N})},[]),children:n})}),E?a.jsxs(Ed,{"aria-hidden":!0,required:f,tabIndex:-1,name:d,autoComplete:h,value:P,onChange:T=>I(T.target.value),disabled:m,form:p,children:[P===void 0?a.jsx("option",{value:""}):null,Array.from(W)]},Y):null]})})};od.displayName=Jn;var ad="SelectTrigger",id=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:s=!1,...r}=t,o=Gs(n),i=xt(ad,n),l=i.disabled||s,c=ie(e,i.onTriggerChange),u=Ys(n),d=g.useRef("touch"),[h,m,f]=Od(y=>{const v=u().filter(b=>!b.disabled),w=v.find(b=>b.value===i.value),x=Td(v,y,w);x!==void 0&&i.onValueChange(x.value)}),p=y=>{l||(i.onOpenChange(!0),f()),y&&(i.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return a.jsx(No,{asChild:!0,...o,children:a.jsx(J.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Ad(i.value)?"":void 0,...r,ref:c,onClick:V(r.onClick,y=>{y.currentTarget.focus(),d.current!=="mouse"&&p(y)}),onPointerDown:V(r.onPointerDown,y=>{d.current=y.pointerType;const v=y.target;v.hasPointerCapture(y.pointerId)&&v.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(p(y),y.preventDefault())}),onKeyDown:V(r.onKeyDown,y=>{const v=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&m(y.key),!(v&&y.key===" ")&&Fb.includes(y.key)&&(p(),y.preventDefault())})})})});id.displayName=ad;var ld="SelectValue",cd=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:s,style:r,children:o,placeholder:i="",...l}=t,c=xt(ld,n),{onValueNodeHasChildrenChange:u}=c,d=o!==void 0,h=ie(e,c.onValueNodeChange);return Ce(()=>{u(d)},[u,d]),a.jsx(J.span,{...l,ref:h,style:{pointerEvents:"none"},children:Ad(c.value)?a.jsx(a.Fragment,{children:i}):o})});cd.displayName=ld;var Ub="SelectIcon",dd=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:s,...r}=t;return a.jsx(J.span,{"aria-hidden":!0,...r,ref:e,children:s||"▼"})});dd.displayName=Ub;var qb="SelectPortal",ud=t=>a.jsx(Za,{asChild:!0,...t});ud.displayName=qb;var It="SelectContent",hd=g.forwardRef((t,e)=>{const n=xt(It,t.__scopeSelect),[s,r]=g.useState();if(Ce(()=>{r(new DocumentFragment)},[]),!n.open){const o=s;return o?js.createPortal(a.jsx(fd,{scope:t.__scopeSelect,children:a.jsx(zs.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),o):null}return a.jsx(md,{...t,ref:e})});hd.displayName=It;var Se=10,[fd,bt]=mn(It),Vb="SelectContentImpl",md=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:p,hideWhenDetached:y,avoidCollisions:v,...w}=t,x=xt(It,n),[b,S]=g.useState(null),[_,j]=g.useState(null),k=ie(e,R=>S(R)),[A,P]=g.useState(null),[I,O]=g.useState(null),E=Ys(n),[W,$]=g.useState(!1),Y=g.useRef(!1);g.useEffect(()=>{if(b)return Ga(b)},[b]),Ja();const T=g.useCallback(R=>{const[te,...ae]=E().map(Z=>Z.ref.current),[X]=ae.slice(-1),Q=document.activeElement;for(const Z of R)if(Z===Q||(Z==null||Z.scrollIntoView({block:"nearest"}),Z===te&&_&&(_.scrollTop=0),Z===X&&_&&(_.scrollTop=_.scrollHeight),Z==null||Z.focus(),document.activeElement!==Q))return},[E,_]),C=g.useCallback(()=>T([A,b]),[T,A,b]);g.useEffect(()=>{W&&C()},[W,C]);const{onOpenChange:N,triggerPointerDownPosRef:F}=x;g.useEffect(()=>{if(b){let R={x:0,y:0};const te=X=>{var Q,Z;R={x:Math.abs(Math.round(X.pageX)-(((Q=F.current)==null?void 0:Q.x)??0)),y:Math.abs(Math.round(X.pageY)-(((Z=F.current)==null?void 0:Z.y)??0))}},ae=X=>{R.x<=10&&R.y<=10?X.preventDefault():b.contains(X.target)||N(!1),document.removeEventListener("pointermove",te),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",te),document.addEventListener("pointerup",ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",te),document.removeEventListener("pointerup",ae,{capture:!0})}}},[b,N,F]),g.useEffect(()=>{const R=()=>N(!1);return window.addEventListener("blur",R),window.addEventListener("resize",R),()=>{window.removeEventListener("blur",R),window.removeEventListener("resize",R)}},[N]);const[oe,ee]=Od(R=>{const te=E().filter(Q=>!Q.disabled),ae=te.find(Q=>Q.ref.current===document.activeElement),X=Td(te,R,ae);X&&setTimeout(()=>X.ref.current.focus())}),xe=g.useCallback((R,te,ae)=>{const X=!Y.current&&!ae;(x.value!==void 0&&x.value===te||X)&&(P(R),X&&(Y.current=!0))},[x.value]),Te=g.useCallback(()=>b==null?void 0:b.focus(),[b]),Ie=g.useCallback((R,te,ae)=>{const X=!Y.current&&!ae;(x.value!==void 0&&x.value===te||X)&&O(R)},[x.value]),tt=s==="popper"?Rr:pd,We=tt===Rr?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:p,hideWhenDetached:y,avoidCollisions:v}:{};return a.jsx(fd,{scope:n,content:b,viewport:_,onViewportChange:j,itemRefCallback:xe,selectedItem:A,onItemLeave:Te,itemTextRefCallback:Ie,focusSelectedItem:C,selectedItemText:I,position:s,isPositioned:W,searchRef:oe,children:a.jsx(Ka,{as:Tn,allowPinchZoom:!0,children:a.jsx(Xa,{asChild:!0,trapped:x.open,onMountAutoFocus:R=>{R.preventDefault()},onUnmountAutoFocus:V(r,R=>{var te;(te=x.trigger)==null||te.focus({preventScroll:!0}),R.preventDefault()}),children:a.jsx(Qa,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:R=>R.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:a.jsx(tt,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:R=>R.preventDefault(),...w,...We,onPlaced:()=>$(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:V(w.onKeyDown,R=>{const te=R.ctrlKey||R.altKey||R.metaKey;if(R.key==="Tab"&&R.preventDefault(),!te&&R.key.length===1&&ee(R.key),["ArrowUp","ArrowDown","Home","End"].includes(R.key)){let X=E().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);if(["ArrowUp","End"].includes(R.key)&&(X=X.slice().reverse()),["ArrowUp","ArrowDown"].includes(R.key)){const Q=R.target,Z=X.indexOf(Q);X=X.slice(Z+1)}setTimeout(()=>T(X)),R.preventDefault()}})})})})})})});md.displayName=Vb;var zb="SelectItemAlignedPosition",pd=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:s,...r}=t,o=xt(It,n),i=bt(It,n),[l,c]=g.useState(null),[u,d]=g.useState(null),h=ie(e,k=>d(k)),m=Ys(n),f=g.useRef(!1),p=g.useRef(!0),{viewport:y,selectedItem:v,selectedItemText:w,focusSelectedItem:x}=i,b=g.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&y&&v&&w){const k=o.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),P=o.valueNode.getBoundingClientRect(),I=w.getBoundingClientRect();if(o.dir!=="rtl"){const Q=I.left-A.left,Z=P.left-Q,pe=k.left-Z,Me=k.width+pe,pn=Math.max(Me,A.width),gn=window.innerWidth-Se,yn=La(Z,[Se,Math.max(Se,gn-pn)]);l.style.minWidth=Me+"px",l.style.left=yn+"px"}else{const Q=A.right-I.right,Z=window.innerWidth-P.right-Q,pe=window.innerWidth-k.right-Z,Me=k.width+pe,pn=Math.max(Me,A.width),gn=window.innerWidth-Se,yn=La(Z,[Se,Math.max(Se,gn-pn)]);l.style.minWidth=Me+"px",l.style.right=yn+"px"}const O=m(),E=window.innerHeight-Se*2,W=y.scrollHeight,$=window.getComputedStyle(u),Y=parseInt($.borderTopWidth,10),T=parseInt($.paddingTop,10),C=parseInt($.borderBottomWidth,10),N=parseInt($.paddingBottom,10),F=Y+T+W+N+C,oe=Math.min(v.offsetHeight*5,F),ee=window.getComputedStyle(y),xe=parseInt(ee.paddingTop,10),Te=parseInt(ee.paddingBottom,10),Ie=k.top+k.height/2-Se,tt=E-Ie,We=v.offsetHeight/2,R=v.offsetTop+We,te=Y+T+R,ae=F-te;if(te<=Ie){const Q=O.length>0&&v===O[O.length-1].ref.current;l.style.bottom="0px";const Z=u.clientHeight-y.offsetTop-y.offsetHeight,pe=Math.max(tt,We+(Q?Te:0)+Z+C),Me=te+pe;l.style.height=Me+"px"}else{const Q=O.length>0&&v===O[0].ref.current;l.style.top="0px";const pe=Math.max(Ie,Y+y.offsetTop+(Q?xe:0)+We)+ae;l.style.height=pe+"px",y.scrollTop=te-Ie+y.offsetTop}l.style.margin=`${Se}px 0`,l.style.minHeight=oe+"px",l.style.maxHeight=E+"px",s==null||s(),requestAnimationFrame(()=>f.current=!0)}},[m,o.trigger,o.valueNode,l,u,y,v,w,o.dir,s]);Ce(()=>b(),[b]);const[S,_]=g.useState();Ce(()=>{u&&_(window.getComputedStyle(u).zIndex)},[u]);const j=g.useCallback(k=>{k&&p.current===!0&&(b(),x==null||x(),p.current=!1)},[b,x]);return a.jsx(Gb,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:j,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:a.jsx(J.div,{...r,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});pd.displayName=zb;var Yb="SelectPopperPosition",Rr=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:s="start",collisionPadding:r=Se,...o}=t,i=Gs(n);return a.jsx(ic,{...i,...o,ref:e,align:s,collisionPadding:r,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Rr.displayName=Yb;var[Gb,Uo]=mn(It,{}),Dr="SelectViewport",gd=g.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:s,...r}=t,o=bt(Dr,n),i=Uo(Dr,n),l=ie(e,o.onViewportChange),c=g.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(zs.Slot,{scope:n,children:a.jsx(J.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:V(r.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&h){const f=Math.abs(c.current-d.scrollTop);if(f>0){const p=window.innerHeight-Se*2,y=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),w=Math.max(y,v);if(w<p){const x=w+f,b=Math.min(p,x),S=x-b;h.style.height=b+"px",h.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});gd.displayName=Dr;var yd="SelectGroup",[Kb,Jb]=mn(yd),Xb=g.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,r=tn();return a.jsx(Kb,{scope:n,id:r,children:a.jsx(J.div,{role:"group","aria-labelledby":r,...s,ref:e})})});Xb.displayName=yd;var vd="SelectLabel",xd=g.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,r=Jb(vd,n);return a.jsx(J.div,{id:r.id,...s,ref:e})});xd.displayName=vd;var Ss="SelectItem",[Qb,bd]=mn(Ss),wd=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:s,disabled:r=!1,textValue:o,...i}=t,l=xt(Ss,n),c=bt(Ss,n),u=l.value===s,[d,h]=g.useState(o??""),[m,f]=g.useState(!1),p=ie(e,x=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,x,s,r)}),y=tn(),v=g.useRef("touch"),w=()=>{r||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(Qb,{scope:n,value:s,disabled:r,textId:y,isSelected:u,onItemTextChange:g.useCallback(x=>{h(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:a.jsx(zs.ItemSlot,{scope:n,value:s,disabled:r,textValue:d,children:a.jsx(J.div,{role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...i,ref:p,onFocus:V(i.onFocus,()=>f(!0)),onBlur:V(i.onBlur,()=>f(!1)),onClick:V(i.onClick,()=>{v.current!=="mouse"&&w()}),onPointerUp:V(i.onPointerUp,()=>{v.current==="mouse"&&w()}),onPointerDown:V(i.onPointerDown,x=>{v.current=x.pointerType}),onPointerMove:V(i.onPointerMove,x=>{var b;v.current=x.pointerType,r?(b=c.onItemLeave)==null||b.call(c):v.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:V(i.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:V(i.onKeyDown,x=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&x.key===" "||($b.includes(x.key)&&w(),x.key===" "&&x.preventDefault())})})})})});wd.displayName=Ss;var jn="SelectItemText",Sd=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:s,style:r,...o}=t,i=xt(jn,n),l=bt(jn,n),c=bd(jn,n),u=Hb(jn,n),[d,h]=g.useState(null),m=ie(e,w=>h(w),c.onItemTextChange,w=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,w,c.value,c.disabled)}),f=d==null?void 0:d.textContent,p=g.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:y,onNativeOptionRemove:v}=u;return Ce(()=>(y(p),()=>v(p)),[y,v,p]),a.jsxs(a.Fragment,{children:[a.jsx(J.span,{id:c.textId,...o,ref:m}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?js.createPortal(o.children,i.valueNode):null]})});Sd.displayName=jn;var _d="SelectItemIndicator",jd=g.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t;return bd(_d,n).isSelected?a.jsx(J.span,{"aria-hidden":!0,...s,ref:e}):null});jd.displayName=_d;var Fr="SelectScrollUpButton",Nd=g.forwardRef((t,e)=>{const n=bt(Fr,t.__scopeSelect),s=Uo(Fr,t.__scopeSelect),[r,o]=g.useState(!1),i=ie(e,s.onScrollButtonChange);return Ce(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),r?a.jsx(kd,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Nd.displayName=Fr;var $r="SelectScrollDownButton",Cd=g.forwardRef((t,e)=>{const n=bt($r,t.__scopeSelect),s=Uo($r,t.__scopeSelect),[r,o]=g.useState(!1),i=ie(e,s.onScrollButtonChange);return Ce(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;o(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),r?a.jsx(kd,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Cd.displayName=$r;var kd=g.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:s,...r}=t,o=bt("SelectScrollButton",n),i=g.useRef(null),l=Ys(n),c=g.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),Ce(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),a.jsx(J.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:V(r.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(s,50))}),onPointerMove:V(r.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),i.current===null&&(i.current=window.setInterval(s,50))}),onPointerLeave:V(r.onPointerLeave,()=>{c()})})}),Zb="SelectSeparator",Pd=g.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t;return a.jsx(J.div,{"aria-hidden":!0,...s,ref:e})});Pd.displayName=Zb;var Lr="SelectArrow",ew=g.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,r=Gs(n),o=xt(Lr,n),i=bt(Lr,n);return o.open&&i.position==="popper"?a.jsx(lc,{...r,...s,ref:e}):null});ew.displayName=Lr;function Ad(t){return t===""||t===void 0}var Ed=g.forwardRef((t,e)=>{const{value:n,...s}=t,r=g.useRef(null),o=ie(e,r),i=fl(n);return g.useEffect(()=>{const l=r.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==n&&d){const h=new Event("change",{bubbles:!0});d.call(l,n),l.dispatchEvent(h)}},[i,n]),a.jsx(rd,{asChild:!0,children:a.jsx("select",{...s,ref:o,defaultValue:n})})});Ed.displayName="BubbleSelect";function Od(t){const e=Gr(t),n=g.useRef(""),s=g.useRef(0),r=g.useCallback(i=>{const l=n.current+i;e(l),function c(u){n.current=u,window.clearTimeout(s.current),u!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),o=g.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,r,o]}function Td(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let i=tw(t,Math.max(o,0));r.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return c!==n?c:void 0}function tw(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var nw=od,Id=id,sw=cd,rw=dd,ow=ud,Md=hd,aw=gd,Rd=xd,Dd=wd,iw=Sd,lw=jd,Fd=Nd,$d=Cd,Ld=Pd;const Ba=nw,Wa=sw,Br=g.forwardRef(({className:t,children:e,...n},s)=>a.jsxs(Id,{ref:s,className:D("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(rw,{asChild:!0,children:a.jsx(Ns,{className:"h-4 w-4 opacity-50"})})]}));Br.displayName=Id.displayName;const Bd=g.forwardRef(({className:t,...e},n)=>a.jsx(Fd,{ref:n,className:D("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(ou,{className:"h-4 w-4"})}));Bd.displayName=Fd.displayName;const Wd=g.forwardRef(({className:t,...e},n)=>a.jsx($d,{ref:n,className:D("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(Ns,{className:"h-4 w-4"})}));Wd.displayName=$d.displayName;const Wr=g.forwardRef(({className:t,children:e,position:n="popper",...s},r)=>a.jsx(ow,{children:a.jsxs(Md,{ref:r,className:D("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...s,children:[a.jsx(Bd,{}),a.jsx(aw,{className:D("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(Wd,{})]})}));Wr.displayName=Md.displayName;const cw=g.forwardRef(({className:t,...e},n)=>a.jsx(Rd,{ref:n,className:D("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));cw.displayName=Rd.displayName;const Hr=g.forwardRef(({className:t,children:e,...n},s)=>a.jsxs(Dd,{ref:s,className:D("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(lw,{children:a.jsx(ri,{className:"h-4 w-4"})})}),a.jsx(iw,{children:e})]}));Hr.displayName=Dd.displayName;const dw=g.forwardRef(({className:t,...e},n)=>a.jsx(Ld,{ref:n,className:D("-mx-1 my-1 h-px bg-muted",t),...e}));dw.displayName=Ld.displayName;const uw=({value:t,onChange:e,placeholder:n="Select date",className:s,maxDate:r=new Date,minDate:o=new Date(1940,0,1)})=>{const[i,l]=g.useState(!1),[c,u]=g.useState(t||new Date),d=new Date().getFullYear(),h=Array.from({length:d-1940+1},(y,v)=>1940+v),m=["January","February","March","April","May","June","July","August","September","October","November","December"],f=y=>{const v=new Date(c);v.setFullYear(parseInt(y)),u(v)},p=y=>{const v=new Date(c);v.setMonth(parseInt(y)),u(v)};return a.jsxs(bc,{open:i,onOpenChange:l,children:[a.jsx(wc,{asChild:!0,children:a.jsxs(U,{variant:"outline",className:D("w-full justify-start text-left font-normal h-12 text-base",!t&&"text-muted-foreground",s),children:[a.jsx(si,{className:"mr-2 h-5 w-5"}),t?vt(t,"dd/MM/yyyy"):n,a.jsx(Ns,{className:"ml-auto h-4 w-4 opacity-50"})]})}),a.jsxs(Po,{className:"w-auto p-0 max-w-[95vw]",align:"start",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[a.jsxs(Ba,{value:c.getMonth().toString(),onValueChange:p,children:[a.jsx(Br,{className:"w-[120px] h-11 text-base",children:a.jsx(Wa,{})}),a.jsx(Wr,{children:m.map((y,v)=>a.jsx(Hr,{value:v.toString(),className:"text-base py-3",children:y},y))})]}),a.jsxs(Ba,{value:c.getFullYear().toString(),onValueChange:f,children:[a.jsx(Br,{className:"w-[100px] h-11 text-base",children:a.jsx(Wa,{})}),a.jsx(Wr,{className:"max-h-80 overflow-y-auto",style:{WebkitOverflowScrolling:"touch"},children:h.map(y=>a.jsx(Hr,{value:y.toString(),className:"text-base py-3 min-h-[44px] flex items-center",children:y},y))})]})]}),a.jsx(sd,{mode:"single",selected:t,onSelect:y=>{e(y),l(!1)},month:c,onMonthChange:u,disabled:y=>y>r||y<o,initialFocus:!0,className:"p-3 pointer-events-auto",classNames:{day:"h-9 w-9 text-base",day_selected:"bg-[#ef4805] text-white hover:bg-[#ef4805] hover:text-white focus:bg-[#ef4805] focus:text-white"}})]})]})},hw=({formData:t,updateFormData:e,validationErrors:n,onInputChange:s})=>{const r=c=>n.some(u=>u.toLowerCase().includes(c.toLowerCase())),o=c=>{e({gender:c}),c!=="Other"&&e({otherGenderText:""})},i=c=>{e({sameAsContactNumber:c}),e(c?{whatsappNumber:t.cellPhone||""}:{whatsappNumber:""})},l=c=>{e({cellPhone:c}),t.sameAsContactNumber&&e({whatsappNumber:c})};return a.jsxs("div",{className:"space-y-6 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#ef4805] border-b pb-2",children:"1. Patient Details (Fields 1-12)"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(q,{type:"text",label:"1. Patient Name & Surname *",value:t.patientName||"",onChange:c=>e({patientName:c}),placeholder:"Enter patient's full name and surname",required:!0,hasError:r("patient name")}),a.jsx(q,{type:"text",label:"2. Age *",value:t.age||"",onChange:c=>e({age:c}),placeholder:"Enter age",required:!0,hasError:r("age")}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"3. Birth Date *"}),a.jsx(uw,{value:t.birthDate?new Date(t.birthDate):void 0,onChange:c=>e({birthDate:c?c.toISOString().split("T")[0]:""}),placeholder:"Select birth date",className:r("birth date")?"border-red-500":"",maxDate:new Date,minDate:new Date(1940,0,1)}),r("birth date")&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:"This field is required."})]}),a.jsx(q,{type:"text",label:"4. ID No. *",value:t.idNumber||"",onChange:c=>e({idNumber:c}),placeholder:"Enter ID number",required:!0,hasError:r("id number")}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"5. Marital Status"}),a.jsx("div",{className:"space-y-2",children:["Single","Married","Divorced","Widowed"].map(c=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"maritalStatus",value:c,checked:t.maritalStatus===c,onChange:u=>e({maritalStatus:u.target.value}),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:c})]},c))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"6. Gender *"}),a.jsx("div",{className:"space-y-2",children:["Male","Female","Prefer not to say","Other"].map(c=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"gender",value:c,checked:t.gender===c,onChange:u=>o(u.target.value),className:"mr-2",required:!0}),a.jsx("span",{className:"text-sm",children:c})]},c))}),t.gender==="Other"&&a.jsx(q,{type:"text",label:"",value:t.otherGenderText||"",onChange:c=>e({otherGenderText:c}),placeholder:"Please specify",className:"mt-2"}),r("gender")&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:"This field is required."})]}),a.jsx(q,{type:"text",label:"7. Employer/School",value:t.employerSchool||"",onChange:c=>e({employerSchool:c}),placeholder:"Enter employer or school name"}),a.jsx(q,{type:"text",label:"8. Occupation (Adult Patients) / Grade (Patients Under 18)",value:t.occupationGrade||"",onChange:c=>e({occupationGrade:c}),placeholder:"Enter occupation (adults) or school grade (under 18)"}),a.jsx(q,{type:"tel",label:"9. Contact Number *",value:t.cellPhone||"",onChange:l,placeholder:"Enter contact number",required:!0,hasError:r("contact number")||r("cell phone")}),a.jsxs("div",{children:[a.jsx(q,{type:"tel",label:"9b. WhatsApp Number *",value:t.whatsappNumber||"",onChange:c=>e({whatsappNumber:c}),placeholder:"Enter WhatsApp number",required:!0,disabled:t.sameAsContactNumber,hasError:r("whatsapp number")}),a.jsxs("label",{className:"flex items-center mt-2",children:[a.jsx("input",{type:"checkbox",checked:t.sameAsContactNumber||!1,onChange:c=>i(c.target.checked),className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Same as Contact Number"})]})]}),a.jsx(q,{type:"email",label:"10. Personal Email (not work email) *",value:t.email||"",onChange:c=>e({email:c}),placeholder:"example@gmail.com, example@yahoo.com (personal only)",required:!0,hasError:r("email")||r("personal email")}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(q,{type:"text",label:"11. Address *",value:t.address||"",onChange:c=>e({address:c}),placeholder:"Enter full address",required:!0,hasError:r("address")})}),a.jsx(q,{type:"text",label:"12. Address Postal Code",value:t.postalCode||"",onChange:c=>e({postalCode:c}),placeholder:"Enter postal code"})]})]})},fw=({formData:t,onInputChange:e,updateFormData:n=()=>{},validationErrors:s=[]})=>{const r=c=>{e("responsibleForPayment",c),c==="Myself"&&Object.entries({accountHolderName:"",accountHolderAge:"",accountHolderIdNumber:"",accountHolderMaritalStatus:"",accountHolderGender:"",accountHolderOtherGenderText:"",accountHolderEmployer:"",accountHolderOccupation:"",accountHolderCellPhone:"",accountHolderEmail:"",sameAddress:"",accountHolderAddress:"",accountHolderPostalCode:""}).forEach(([d,h])=>{e(d,h)})},o=c=>{e("accountHolderGender",c),c!=="Other"&&e("accountHolderOtherGenderText","")},i=c=>{e("sameAddress",c),c==="Yes"?(e("accountHolderAddress",t.address||""),e("accountHolderPostalCode",t.postalCode||"")):c==="No"&&(e("accountHolderAddress",""),e("accountHolderPostalCode",""))},l=t.responsibleForPayment==="Parent/Main member/Someone else";return a.jsxs("div",{className:"space-y-6 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#ef4805] border-b pb-2",children:"2. Account Holder Details"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"13. Person Responsible for Account Payment *"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"responsibleForPayment",value:"Parent/Main member/Someone else",checked:t.responsibleForPayment==="Parent/Main member/Someone else",onChange:c=>r(c.target.value),className:"mr-2",required:!0}),a.jsx("span",{className:"text-sm",children:"Parent/Main member/Someone else"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"responsibleForPayment",value:"Myself",checked:t.responsibleForPayment==="Myself",onChange:c=>r(c.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Myself"})]})]})]}),l&&a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsx(q,{type:"text",label:"14. Name and Surname",value:t.accountHolderName||"",onChange:c=>e("accountHolderName",c),placeholder:"Enter full name"}),a.jsx(q,{type:"text",label:"15. Age",value:t.accountHolderAge||"",onChange:c=>e("accountHolderAge",c),placeholder:"Enter age"}),a.jsx(q,{type:"text",label:"16. ID No.",value:t.accountHolderIdNumber||"",onChange:c=>e("accountHolderIdNumber",c),placeholder:"Enter ID number"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"17. Marital Status"}),a.jsx("div",{className:"space-y-2",children:["Single","Married","Divorced","Widowed"].map(c=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"accountHolderMaritalStatus",value:c,checked:t.accountHolderMaritalStatus===c,onChange:u=>e("accountHolderMaritalStatus",u.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:c})]},c))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"18. Gender"}),a.jsx("div",{className:"space-y-2",children:["Male","Female","Prefer not to say","Other"].map(c=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"accountHolderGender",value:c,checked:t.accountHolderGender===c,onChange:u=>o(u.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:c})]},c))}),t.accountHolderGender==="Other"&&a.jsx(q,{type:"text",label:"",value:t.accountHolderOtherGenderText||"",onChange:c=>e("accountHolderOtherGenderText",c),placeholder:"Please specify",className:"mt-2"})]}),a.jsx(q,{type:"text",label:"19. Employer",value:t.accountHolderEmployer||"",onChange:c=>e("accountHolderEmployer",c),placeholder:"Enter employer"}),a.jsx(q,{type:"text",label:"20. Occupation",value:t.accountHolderOccupation||"",onChange:c=>e("accountHolderOccupation",c),placeholder:"Enter occupation"}),a.jsx(q,{type:"tel",label:"21. Cell Phone No.",value:t.accountHolderCellPhone||"",onChange:c=>e("accountHolderCellPhone",c),placeholder:"Enter cell phone number"}),a.jsx(q,{type:"email",label:"22. Email",value:t.accountHolderEmail||"",onChange:c=>e("accountHolderEmail",c),placeholder:"Enter email address"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"23. Same Address as Patient?"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"sameAddress",value:"Yes",checked:t.sameAddress==="Yes",onChange:c=>i(c.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Yes"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"sameAddress",value:"No",checked:t.sameAddress==="No",onChange:c=>i(c.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"No"})]})]})]}),a.jsx("div",{})," ",a.jsx("div",{className:"md:col-span-2",children:a.jsx(q,{type:"text",label:"23. Address",value:t.accountHolderAddress||"",onChange:c=>e("accountHolderAddress",c),placeholder:"Enter full address"})}),a.jsx(q,{type:"text",label:"24. Address Postal Code",value:t.accountHolderPostalCode||"",onChange:c=>e("accountHolderPostalCode",c),placeholder:"Enter postal code"})]})})]})},mw=({formData:t,onInputChange:e,currentRegion:n})=>{const s=l=>{e("paymentPreference",l),l!=="Medical Aid"&&["medicalAidName","medicalAidNo","medicalAidPlan","mainMember","dependantCode"].forEach(u=>e(u,""))},r=t.paymentPreference==="Medical Aid",o=(n==null?void 0:n.code)==="NAM",i=()=>o?[{value:"EFT",label:"EFT"},{value:"Medical Aid",label:"Medical Aid (NAMAF rates)"}]:[{value:"Card/EFT/Snapcan",label:"Card/EFT/Snapcan"},{value:"Medical Aid",label:"Medical Aid"}];return a.jsxs("div",{className:"space-y-6 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#ef4805] border-b pb-2",children:"3. Payment and Emergency Contact"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"25. Payment Preference"}),a.jsx("div",{className:"space-y-2",children:i().map(l=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"paymentPreference",value:l.value,checked:t.paymentPreference===l.value,onChange:c=>s(c.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:l.label})]},l.value))}),o&&a.jsx("div",{className:"mt-2 p-3 bg-blue-50 rounded-md",children:a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("strong",{children:"Note:"})," We only accept EFT payments and Medical Aid claims in line with NAMAF rates. No on-site card payments are currently available in Namibia."]})})]}),r&&a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[o&&a.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:a.jsxs("p",{className:"text-sm text-green-700",children:[a.jsx("strong",{children:"NAMAF Compliance:"})," Medical aid claims will be processed in accordance with Namibian Medical Aid Fund (NAMAF) approved rates and procedures."]})}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsx(q,{type:"text",label:"26. Medical Aid Name *",value:t.medicalAidName||"",onChange:l=>e("medicalAidName",l),placeholder:"Enter medical aid name",required:!0}),a.jsx(q,{type:"text",label:"27. Medical Aid No. *",value:t.medicalAidNo||"",onChange:l=>e("medicalAidNo",l),placeholder:"Enter medical aid number",required:!0}),a.jsx(q,{type:"text",label:"28. Plan *",value:t.medicalAidPlan||"",onChange:l=>e("medicalAidPlan",l),placeholder:"Enter plan name",required:!0}),a.jsx(q,{type:"text",label:"29. Main Member *",value:t.mainMember||"",onChange:l=>e("mainMember",l),placeholder:"Enter main member name",required:!0}),a.jsx(q,{type:"text",label:"30. Dependant Code (if applicable)",value:t.dependantCode||"",onChange:l=>e("dependantCode",l),placeholder:"Enter dependant code"})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsx(q,{type:"text",label:"31. Emergency Contact Name and Surname *",value:t.emergencyName||"",onChange:l=>e("emergencyName",l),placeholder:"Enter emergency contact name",required:!0}),a.jsx(q,{type:"text",label:"32. Relationship to Patient *",value:t.emergencyRelationship||"",onChange:l=>e("emergencyRelationship",l),placeholder:"Enter relationship to patient (e.g., Mother, Father, Spouse, Friend)",required:!0}),a.jsx(q,{type:"tel",label:"33. Emergency WhatsApp Number *",value:t.emergencyPhone||"",onChange:l=>e("emergencyPhone",l),placeholder:"Enter WhatsApp number",required:!0})]})]})},pw=({formData:t,onInputChange:e,onCheckboxChange:n})=>{const s=(f,p)=>{p?e(f,"Nil"):e(f,"")},r=(f,p)=>{let y=[];t.chronicConditions&&(typeof t.chronicConditions=="string"?y=t.chronicConditions.split(", ").filter(v=>v.trim()):Array.isArray(t.chronicConditions)&&(y=[...t.chronicConditions])),p?f==="None"?e("chronicConditions","None"):(y=y.filter(v=>v!=="None"),y.includes(f)||y.push(f),e("chronicConditions",y.join(", "))):f==="None"?e("chronicConditions",""):(y=y.filter(v=>v!==f),e("chronicConditions",y.length>0?y.join(", "):""))},o=(f,p)=>{let y=[];t.habits&&(typeof t.habits=="string"?y=t.habits.split(", ").filter(v=>v.trim()):Array.isArray(t.habits)&&(y=[...t.habits])),p?f==="Nil"?e("habits","Nil"):(y=y.filter(v=>v!=="Nil"),y.includes(f)||y.push(f),e("habits",y.join(", "))):f==="Nil"?e("habits",""):(y=y.filter(v=>v!==f),e("habits",y.length>0?y.join(", "):""))},i=(f,p)=>{let y=[];t.femalePatients&&(typeof t.femalePatients=="string"?y=t.femalePatients.split(", ").filter(v=>v.trim()):Array.isArray(t.femalePatients)&&(y=[...t.femalePatients])),p?f==="N/A"?e("femalePatients","N/A"):(y=y.filter(v=>v!=="N/A"),y.includes(f)||y.push(f),e("femalePatients",y.join(", "))):f==="N/A"?e("femalePatients",""):(y=y.filter(v=>v!==f),e("femalePatients",y.length>0?y.join(", "):""))},l=["Alzheimers","Anaemia","Arthritis","Asthma/Lung Disease","Bleeding Disorders","On warfarin/Aspirin or anticoagulants","Cancer Treatment","Diabetes","Dizziness/Fainting Spells","Epilepsy","Rheumatic Fever","Heart Disease","High/low Blood Pressure","Hepatitis/Liver Disease","HIV/Aids","Sinusitis","Ulcers","Other"],c=["Smoking","Alcohol","Recreational Drugs","Other"],u=["Pregnant","Nursing","On Birth Control","On Hormone Replacement Therapy"],d=typeof t.chronicConditions=="string"?t.chronicConditions.split(", ").filter(f=>f):Array.isArray(t.chronicConditions)?t.chronicConditions:[],h=typeof t.habits=="string"?t.habits.split(", ").filter(f=>f):Array.isArray(t.habits)?t.habits:[],m=typeof t.femalePatients=="string"?t.femalePatients.split(", ").filter(f=>f):Array.isArray(t.femalePatients)?t.femalePatients:[];return a.jsxs("div",{className:"space-y-6 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#ef4805] border-b pb-2",children:"4. Medical History"}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsx(q,{type:"text",label:"34. GP's Name (optional)",value:t.gpName||"",onChange:f=>e("gpName",f),placeholder:"Enter GP's name"}),a.jsx(q,{type:"tel",label:"35. GP's Contact No. (optional)",value:t.gpContact||"",onChange:f=>e("gpContact",f),placeholder:"Enter GP's contact number"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"36. Chronic Conditions"}),a.jsx("div",{className:"grid md:grid-cols-2 gap-2 mb-2",children:l.map(f=>a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx(_e,{id:`chronic-${f}`,checked:d.includes(f),onCheckedChange:p=>r(f,p===!0)}),a.jsx("span",{className:"text-sm",children:f})]},f))}),a.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[a.jsx(_e,{id:"noChronicConditions",checked:t.chronicConditions==="None",onCheckedChange:f=>r("None",f===!0)}),a.jsx("label",{htmlFor:"noChronicConditions",className:"text-sm text-gray-600",children:"No chronic conditions"})]})]}),a.jsxs("div",{children:[a.jsx(q,{type:"text",label:"37. Allergies *",value:t.allergies||"",onChange:f=>e("allergies",f),placeholder:"Please answer 'Nil' if you have no allergies",required:!0}),a.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[a.jsx(_e,{id:"nilAllergies",checked:t.allergies==="Nil",onCheckedChange:f=>s("allergies",f===!0)}),a.jsx("label",{htmlFor:"nilAllergies",className:"text-sm text-gray-600",children:"No allergies (Nil)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"38. Habits *"}),a.jsx("div",{className:"grid md:grid-cols-2 gap-2 mb-2",children:c.map(f=>a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx(_e,{id:`habit-${f}`,checked:h.includes(f),onCheckedChange:p=>o(f,p===!0)}),a.jsx("span",{className:"text-sm",children:f})]},f))}),a.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[a.jsx(_e,{id:"nilHabits",checked:t.habits==="Nil",onCheckedChange:f=>o("Nil",f===!0)}),a.jsx("label",{htmlFor:"nilHabits",className:"text-sm text-gray-600",children:"Nil"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"39. Under Specialist Care"}),a.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ef4805] focus:border-transparent",value:t.specialistCare||"",onChange:f=>e("specialistCare",f.target.value),placeholder:"If yes, please add a short description",rows:3})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"40. Hospitalised This Year"}),a.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ef4805] focus:border-transparent",value:t.hospitalised||"",onChange:f=>e("hospitalised",f.target.value),placeholder:"If yes, please add a short description",rows:3})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"41. Psychiatric History"}),a.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ef4805] focus:border-transparent",value:t.psychiatricHistory||"",onChange:f=>e("psychiatricHistory",f.target.value),placeholder:"Please provide details if applicable",rows:3})]}),a.jsxs("div",{children:[a.jsx(q,{type:"text",label:"42. Medication *",value:t.medication||"",onChange:f=>e("medication",f),placeholder:"Please answer 'Nil' if you are not on any medication",required:!0}),a.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[a.jsx(_e,{id:"nilMedication",checked:t.medication==="Nil",onCheckedChange:f=>s("medication",f===!0)}),a.jsx("label",{htmlFor:"nilMedication",className:"text-sm text-gray-600",children:"No medication (Nil)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"43. Female Patients"}),a.jsx("div",{className:"grid md:grid-cols-2 gap-2 mb-2",children:u.map(f=>a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx(_e,{id:`female-${f}`,checked:m.includes(f),onCheckedChange:p=>i(f,p===!0)}),a.jsx("span",{className:"text-sm",children:f})]},f))}),a.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[a.jsx(_e,{id:"naFemale",checked:t.femalePatients==="N/A",onCheckedChange:f=>i("N/A",f===!0)}),a.jsx("label",{htmlFor:"naFemale",className:"text-sm text-gray-600",children:"N/A"})]})]})]})},gw=({formData:t,onInputChange:e,updateFormData:n=()=>{},validationErrors:s,currentRegion:r})=>{const[o,i]=g.useState(!1),l=g.useRef(null);g.useEffect(()=>{const d=l.current;if(!d)return;const h=()=>{d.scrollTop+d.clientHeight>=d.scrollHeight-5&&i(!0)};return d.addEventListener("scroll",h),setTimeout(()=>{d.scrollHeight<=d.clientHeight+5&&i(!0)},200),()=>d.removeEventListener("scroll",h)},[]);const c=(d,h)=>{e&&e(d,h),d==="terms"&&h==="Agree"&&n({consentAgreement:!0})},u=s&&s.length>0;return a.jsxs("div",{className:"space-y-6 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#ef4805] border-b pb-2",children:"5. Consent"}),u&&a.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[a.jsx("p",{className:"text-red-800 font-medium",children:"Please complete the following:"}),a.jsx("ul",{className:"list-disc list-inside text-red-700 text-sm mt-2",children:s==null?void 0:s.map((d,h)=>a.jsx("li",{children:d},h))})]}),a.jsxs("details",{className:"mb-4 border border-gray-300 rounded",children:[a.jsx("summary",{className:"cursor-pointer p-3 bg-gray-100 font-medium",children:"View MIA Consent Form"}),a.jsx("div",{ref:l,className:"max-h-72 overflow-y-scroll p-4 border-t border-gray-300 text-sm space-y-4",children:(r==null?void 0:r.code)==="NAM"?a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"text-lg font-semibold text-orange-600",children:"MIA Healthcare Mobile Clinic Consent Form"}),a.jsx("p",{children:"I voluntarily consent to receive medical and dental services from MIA Healthcare Mobile Clinic, including examination, diagnosis, and treatment (e.g., cleaning, scaling, polishing, X-rays, or photos) as deemed necessary by the attending dental or medical professional."}),a.jsx("p",{children:"I understand the nature and purpose of the treatment and acknowledge that no guarantees or assurances have been made regarding the results of any procedure."}),a.jsx("p",{children:"I understand that dental and medical treatments may involve risks, including but not limited to sensitivity, discomfort, or allergic reactions."}),a.jsx("p",{children:"I confirm that I have disclosed all relevant medical history, current medications, allergies, and chronic conditions, and I understand that incomplete disclosure may affect treatment outcomes."}),a.jsx("p",{children:"I understand that MIA Healthcare Mobile Clinic operates under Digi Dental for administrative purposes and shares the same practice number (087 5201)."}),a.jsx("p",{children:"I authorize MIA Healthcare Mobile Clinic to share relevant medical and dental information with my medical aid for claim purposes and with other healthcare professionals for further treatment or referral, if necessary."}),a.jsx("p",{children:"I understand that MIA will submit claims to my medical aid where possible, but I remain responsible for any shortfalls or unpaid amounts."}),a.jsx("p",{children:"I understand that MIA is not contracted to all medical aid plans. If my plan is not covered, I am responsible for settling the account in full and claiming back from my medical aid directly."}),a.jsx("p",{children:"I acknowledge that if my account remains unpaid after 90 days, my details may be submitted to ITC for blacklisting and legal recovery action."}),a.jsx("p",{children:"I understand that I may be referred for further treatment, which may incur additional costs not covered during the initial screening."}),a.jsx("p",{children:"I acknowledge my right to ask questions about my treatment and to withdraw consent at any time before or during the procedure."}),a.jsx("p",{children:"I confirm that all information provided in this form is true and accurate to the best of my knowledge."}),a.jsx("p",{children:"I consent to the collection, use, and storage of my personal and medical information for healthcare, administrative, or legal purposes, in accordance with Namibian privacy and patient rights guidelines."}),a.jsx("p",{children:"I understand that MIA Healthcare Mobile Clinic is responsible for protecting my medical records in line with Namibian regulations."}),a.jsxs("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200 rounded",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"LEGAL DISCLAIMER"}),a.jsx("p",{className:"text-xs leading-relaxed",children:"By signing below, I confirm that I have read, understood, and voluntarily agree to the terms above. I consent to receive medical and dental services from MIA Healthcare Mobile Clinic, operated by Digi Dental (Practice Number: 087 5201). I authorize MIA to submit claims to my medical aid where applicable and understand that I am fully responsible for any unpaid amounts. If my medical aid does not cover the costs, I will settle the account and claim back directly. I acknowledge that unpaid accounts after 90 days may be submitted to ITC for listing and further recovery action. My personal and medical information will be kept confidential and secure, used only for healthcare, administrative, or lawful purposes, in accordance with Namibian regulations."})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"text-lg font-semibold text-orange-600",children:"MIA Consent Form Contents"}),a.jsx("p",{children:"1. I, the undersigned, hereby give my voluntary consent for dental examination, diagnosis and treatment as deemed necessary by the dental professional in attendance."}),a.jsx("p",{children:"2. I understand that dental treatment may involve procedures such as cleaning, scaling, polishing, and the use of diagnostic tools including X-rays or photos."}),a.jsx("p",{children:"3. I understand the nature and purpose of the treatment and acknowledge that no guarantees or assurances have been made to me concerning the results of the procedure."}),a.jsx("p",{children:"4. I understand that there may be risks and complications associated with dental treatment, including but not limited to sensitivity, discomfort, and allergic reactions."}),a.jsx("p",{children:"5. I confirm that I have disclosed all relevant medical history and current medications."}),a.jsx("p",{children:"6. I understand that the dental provider may refer me for further treatment if necessary, and that this referral may incur additional costs not covered during the screening."}),a.jsx("p",{children:"7. I acknowledge that I have the right to ask questions and that I may withdraw my consent at any time before or during the treatment."}),a.jsx("p",{children:"8. I give consent for my dental records to be shared with other healthcare professionals if needed for further treatment or referral."}),a.jsx("p",{children:"9. I understand the confidentiality of my health information and consent to the collection and use of this information for medical and administrative purposes."}),a.jsx("p",{children:"10. I confirm that I have read and understood the information above, and that I am signing this consent voluntarily and without coercion."})]})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"44. I have read and agree with terms and conditions provided in the document"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"terms",value:"Agree",checked:(t==null?void 0:t.terms)==="Agree",onChange:d=>c("terms",d.target.value),className:"mr-2",disabled:!o}),a.jsx("span",{className:"text-sm",children:"Agree"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"terms",value:"Disagree",checked:(t==null?void 0:t.terms)==="Disagree",onChange:d=>c("terms",d.target.value),className:"mr-2",disabled:!o}),a.jsx("span",{className:"text-sm",children:"Disagree"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"45. My consent is provided of my own free will without any undue influence from any person whatsoever. I confirm that I have permission of my dependant(s) to give their consent, where such consent has been provided, and I indemnify the practice against this."}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"consentFreeWill",value:"Agree",checked:(t==null?void 0:t.consentFreeWill)==="Agree",onChange:d=>c("consentFreeWill",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Agree"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"consentFreeWill",value:"Disagree",checked:(t==null?void 0:t.consentFreeWill)==="Disagree",onChange:d=>c("consentFreeWill",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Disagree"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"46. I acknowledge that I have been informed that this practice does not charge the rates that the Department of Health has unilaterally determined for dentists"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"rates",value:"Agree",checked:(t==null?void 0:t.rates)==="Agree",onChange:d=>c("rates",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Agree"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"rates",value:"Disagree",checked:(t==null?void 0:t.rates)==="Disagree",onChange:d=>c("rates",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Disagree"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"47. I accept that I am fully responsible for the payment for services rendered and should I not pay timeously, understand that I will be liable for debt recovery cost on an attorney and own client scale."}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"paymentResponsibility",value:"Agree",checked:(t==null?void 0:t.paymentResponsibility)==="Agree",onChange:d=>c("paymentResponsibility",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Agree"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"paymentResponsibility",value:"Disagree",checked:(t==null?void 0:t.paymentResponsibility)==="Disagree",onChange:d=>c("paymentResponsibility",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Disagree"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"48. Do we have your permission to place our positive commentary and non-treatment related photographs on our website/social media? (Optional)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"mediaPermission",value:"Yes",checked:(t==null?void 0:t.mediaPermission)==="Yes",onChange:d=>c("mediaPermission",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Yes"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"mediaPermission",value:"No",checked:(t==null?void 0:t.mediaPermission)==="No",onChange:d=>c("mediaPermission",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"No"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"49. Cancellation Policy Acknowledgment"}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"I confirm that by confirming this appointment, I agree to keep my appointment for the agreed upon date and time. Please note that Mia Healthcare charges R250 per appointment missed or cancelled within 24 hours of the scheduled time. The cancellation policy will be discussed during the appointment booking process."}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"cancellationPolicy",value:"Acknowledge cancellation policy",checked:(t==null?void 0:t.cancellationPolicy)==="Acknowledge cancellation policy",onChange:d=>c("cancellationPolicy",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Acknowledge cancellation policy"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"50. Background Music Preference (Optional)"}),a.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ef4805] focus:border-transparent",value:(t==null?void 0:t.musicPreference)||"",onChange:d=>e&&e("musicPreference",d.target.value),placeholder:"Let us know your favourite artist/song or attach a link to your favourite playlist",rows:3})]}),a.jsx(q,{type:"text",label:"51. Please enter your full name and surname followed by the date",value:(t==null?void 0:t.signature)||"",onChange:d=>e&&e("signature",d),placeholder:"Enter your full name and date"}),(r==null?void 0:r.code)==="NAM"&&a.jsxs("div",{className:"space-y-6 mt-8 border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-medium text-[#ef4805]",children:"Namibian-Specific Consent Requirements"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"I understand that if my account remains unpaid after 90 days, my details may be submitted to ITC for blacklisting and legal recovery action."}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"namItcBlacklistingConsent",value:"Agree",checked:(t==null?void 0:t.namItcBlacklistingConsent)==="Agree",onChange:d=>c("namItcBlacklistingConsent",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Agree"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"namItcBlacklistingConsent",value:"Disagree",checked:(t==null?void 0:t.namItcBlacklistingConsent)==="Disagree",onChange:d=>c("namItcBlacklistingConsent",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Disagree"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"I understand that MIA will submit claims on my behalf where possible, but I remain responsible for any shortfalls or unpaid amounts."}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"namMedicalAidClaimingResponsibility",value:"Agree",checked:(t==null?void 0:t.namMedicalAidClaimingResponsibility)==="Agree",onChange:d=>c("namMedicalAidClaimingResponsibility",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Agree"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"namMedicalAidClaimingResponsibility",value:"Disagree",checked:(t==null?void 0:t.namMedicalAidClaimingResponsibility)==="Disagree",onChange:d=>c("namMedicalAidClaimingResponsibility",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Disagree"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"I authorize MIA to share relevant information with my medical aid for claim purposes."}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"namInformationSharingAuthorization",value:"Agree",checked:(t==null?void 0:t.namInformationSharingAuthorization)==="Agree",onChange:d=>c("namInformationSharingAuthorization",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Agree"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"namInformationSharingAuthorization",value:"Disagree",checked:(t==null?void 0:t.namInformationSharingAuthorization)==="Disagree",onChange:d=>c("namInformationSharingAuthorization",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Disagree"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"I understand that my personal and medical information will be kept confidential and used only for healthcare, administrative, or legal purposes in accordance with Namibian regulations."}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"namPrivacyConfidentialityAcknowledgment",value:"Agree",checked:(t==null?void 0:t.namPrivacyConfidentialityAcknowledgment)==="Agree",onChange:d=>c("namPrivacyConfidentialityAcknowledgment",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Agree"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"namPrivacyConfidentialityAcknowledgment",value:"Disagree",checked:(t==null?void 0:t.namPrivacyConfidentialityAcknowledgment)==="Disagree",onChange:d=>c("namPrivacyConfidentialityAcknowledgment",d.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Disagree"})]})]})]})]})]}),!o&&a.jsx("p",{className:"text-red-500 text-sm mt-2",children:"Please scroll to the bottom of the consent form to enable the agreement options."}),(t==null?void 0:t.terms)==="Agree"&&o&&a.jsx("p",{className:"text-green-600 text-sm mt-2 font-medium",children:"✓ Consent terms accepted! Please complete all other required consent questions."})]})},qo=()=>({sections:g.useMemo(()=>[{id:"patientDetails",title:"1. Patient Details (Fields 1-12)",component:hw},{id:"accountHolder",title:"2. Account Holder Details (Fields 13-24)",component:fw},{id:"paymentEmergency",title:"3. Payment and Emergency Contact (Fields 25-33)",component:mw},{id:"medicalHistory",title:"4. Medical History (Fields 34-43)",component:pw},{id:"consent",title:"5. Consent (Fields 44-51)",component:gw}],[])}),yw=({activeSection:t,formData:e,handleInputChange:n,handleCheckboxChange:s,validationErrors:r,currentRegion:o})=>{const{sections:i}=qo(),l=u=>{Object.keys(u).forEach(d=>{const h=u[d];typeof h=="string"&&n(d,h)})},c=()=>{const u=i.find(h=>h.id===t);if(!u)return null;const d=u.component;return u.id==="patientDetails"?a.jsx(d,{formData:e,updateFormData:l,validationErrors:r,onInputChange:n,onCheckboxChange:s}):a.jsx(d,{formData:e,updateFormData:l,validationErrors:r,onInputChange:n,onCheckboxChange:s,currentRegion:o})};return a.jsx(a.Fragment,{children:c()})},vw=({activeSection:t,setActiveSection:e,formData:n,handleInputChange:s,handleCheckboxChange:r,validationErrors:o,currentRegion:i})=>{const{sections:l}=qo();return a.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:a.jsx("div",{className:"border-b border-gray-200",children:l.map(c=>a.jsx(Vy,{id:c.id,title:c.title,isActive:t===c.id,onToggle:e,children:t===c.id&&a.jsx(yw,{activeSection:t,formData:n,handleInputChange:s,handleCheckboxChange:r,validationErrors:o,currentRegion:i})},c.id))})})},xw=({status:t,isSubmitting:e=!1})=>{if(e)return a.jsxs(Ye,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-300",children:[a.jsx(li,{className:"w-3 h-3 mr-1 animate-spin"}),"Submitting..."]});switch(t){case"draft":return a.jsxs(Ye,{variant:"outline",className:"bg-gray-50 text-gray-700 border-gray-300",children:[a.jsx(Cs,{className:"w-3 h-3 mr-1"}),"Draft"]});case"pending":return a.jsxs(Ye,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-300",children:[a.jsx(Et,{className:"w-3 h-3 mr-1"}),"Pending Sync"]});case"submitted":return a.jsxs(Ye,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300",children:[a.jsx(ke,{className:"w-3 h-3 mr-1"}),"Submitted"]});case"synced":return a.jsxs(Ye,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-300",children:[a.jsx(ke,{className:"w-3 h-3 mr-1"}),"Synced"]});default:return null}},bw=({currentRegion:t,regionDetected:e,isResuming:n,activeSection:s,setActiveSection:r,formData:o,handleInputChange:i,handleCheckboxChange:l,isDirty:c,justSaved:u,onSave:d,onSubmit:h,onDiscard:m,onResetJustSaved:f,isOnline:p,lastSaved:y,formatLastSaved:v,dbInitialized:w,retryCount:x,showManualSelector:b,setRegionManually:S,isRegionFromDraft:_,isRegionDetected:j,validationErrors:k=[],showValidationErrors:A,submitting:P=!1,submissionStatus:I="draft",isFormComplete:O=!1})=>{const{sections:E}=qo();return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(Ry,{currentRegion:t,regionDetected:e,isResuming:n}),a.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[a.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[a.jsx(Hy,{isDirty:c,justSaved:u,formData:o,onSave:d,onDiscard:m,onResetJustSaved:f}),a.jsx(xw,{status:I,isSubmitting:P})]}),a.jsx(Uy,{onRegionSelect:S,currentRegion:t,isVisible:b}),a.jsx(Dy,{currentSection:s,sections:E||[]}),a.jsx($y,{isOnline:p,currentRegion:t,isDirty:c,lastSaved:y,formatLastSaved:v,onSave:d,dbInitialized:w,retryCount:x,onRegionSelect:S,isRegionFromDraft:_,isRegionDetected:j}),a.jsx(qy,{errors:k||[],isVisible:A&&((k==null?void 0:k.length)||0)>0}),a.jsx(vw,{activeSection:s,setActiveSection:r,formData:o,handleInputChange:i,handleCheckboxChange:l,validationErrors:k||[],currentRegion:t}),a.jsx(Ly,{currentRegion:t,regionDetected:e,isResuming:n,children:a.jsx(By,{sections:E||[],activeSection:s,setActiveSection:r,onSave:d,onSubmit:h,submitting:P,isFormComplete:O})})]})]})},ww=({show:t,message:e,duration:n=3e3,isOnline:s=!1})=>{const{toast:r}=gt();if(g.useEffect(()=>{if(t){const u=()=>s?"Draft saved to cloud":"Draft saved locally",d=()=>s?"Your draft has been saved to the cloud database":"Your draft has been saved locally and will sync when online";r({title:u(),description:d(),duration:n})}},[t,e,n,s,r]),!t)return null;const o=()=>s?a.jsx(ks,{className:"w-6 h-6 text-green-600"}):a.jsx(ai,{className:"w-6 h-6 text-blue-600"}),i=()=>s?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200",l=()=>s?"text-green-900":"text-blue-900",c=()=>s?"text-green-700":"text-blue-700";return a.jsx("div",{className:`fixed top-4 right-4 z-50 ${i()} rounded-lg p-4 shadow-lg border-2 animate-fade-in`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:o()}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ke,{className:"w-5 h-5 text-green-500"}),a.jsx("p",{className:`font-semibold ${l()}`,children:"Draft Saved Successfully"})]}),a.jsx("p",{className:`text-sm mt-1 ${c()}`,children:s?"Saved to cloud database":"Saved locally - will sync when online"})]})]})})},Sw=({isOpen:t,onClose:e,formData:n})=>a.jsx(Un,{open:t,onOpenChange:e,children:a.jsxs(cn,{className:"sm:max-w-md",children:[a.jsx(dn,{children:a.jsxs(un,{className:"flex items-center gap-2 text-green-600",children:[a.jsx(ke,{className:"w-6 h-6"}),"Form Captured Successfully"]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[a.jsx(li,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-green-800 font-medium",children:"Your consent form has been saved locally"})]}),(n==null?void 0:n.patientName)&&a.jsxs("p",{className:"text-sm text-gray-600",children:["Patient: ",a.jsx("span",{className:"font-medium",children:n.patientName})]}),(n==null?void 0:n.submissionId)&&a.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",n.submissionId]})]}),a.jsxs("div",{className:"border-t pt-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[a.jsx(Jr,{className:"w-4 h-4"}),a.jsx("span",{children:"Currently offline"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("p",{className:"font-medium mb-1",children:"What happens next:"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:"• Form is safely stored on this device"}),a.jsx("li",{children:"• Will automatically upload when internet connection is restored"}),a.jsx("li",{children:"• You can continue working with other forms"}),a.jsx("li",{children:'• Check "Pending Upload" section for sync status'})]})]})]}),a.jsx(U,{onClick:e,className:"w-full",children:"Continue"})]})]})}),_w=({isOpen:t,onClose:e,formData:n})=>{const s=nn(),r=()=>{console.log("OnlineSuccessDialog: Closing and navigating to home"),e(),s("/")};return a.jsx(Un,{open:t,onOpenChange:r,children:a.jsxs(cn,{className:"sm:max-w-md",children:[a.jsx(dn,{children:a.jsxs(un,{className:"flex items-center gap-2 text-green-600",children:[a.jsx(ke,{className:"w-6 h-6"}),"Form Successfully Uploaded to Cloud"]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[a.jsx(ks,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-green-800 font-medium",children:"Your consent form has been successfully uploaded to the cloud database"})]}),(n==null?void 0:n.patientName)&&a.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:["Patient: ",n.patientName]}),(n==null?void 0:n.submissionId)&&a.jsxs("p",{className:"text-sm text-gray-600",children:["Submission ID: ",n.submissionId]})]}),a.jsx("div",{className:"border-t pt-4 space-y-3",children:a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("p",{className:"font-medium mb-1",children:"What happened:"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:"• Form submitted and saved to cloud database"}),a.jsx("li",{children:"• Data is securely stored and accessible from any device"}),a.jsx("li",{children:"• Form has been removed from local drafts"})]})]})}),a.jsx(U,{onClick:r,className:"w-full bg-green-600 hover:bg-green-700",children:"Return to Start"})]})]})})},jw=({isOpen:t,onClose:e,currentForm:n,pendingForms:s})=>{const r=nn(),o=()=>{console.log("OfflineSummaryDialog: Closing and navigating to home"),e(),r("/")};return a.jsx(Un,{open:t,onOpenChange:o,children:a.jsxs(cn,{className:"sm:max-w-lg max-h-[80vh] overflow-y-auto",children:[a.jsx(dn,{children:a.jsxs(un,{className:"flex items-center gap-2 text-amber-600",children:[a.jsx(ke,{className:"w-6 h-6"}),"Form Captured - Offline Mode"]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsxs("div",{className:"p-4 bg-amber-50 rounded-lg",children:[a.jsx(oi,{className:"w-8 h-8 text-amber-600 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-amber-800 font-medium",children:"Your consent form has been saved locally and will upload when online"})]}),(n==null?void 0:n.patientName)&&a.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:["Latest: ",n.patientName]})]}),a.jsxs("div",{className:"border-t pt-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[a.jsx(Et,{className:"w-4 h-4"}),a.jsxs("span",{children:["All Pending Offline Submissions (",s.length,")"]})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-3 max-h-48 overflow-y-auto",children:s.length>0?a.jsx("ul",{className:"space-y-2",children:s.map((i,l)=>a.jsxs("li",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"font-medium",children:i.patientName||"Unknown Patient"}),a.jsx("span",{className:"text-gray-500 text-xs",children:i.timestamp?new Date(i.timestamp).toLocaleString():"Unknown time"})]},i.id||l))}):a.jsx("p",{className:"text-sm text-gray-500 text-center",children:"No pending submissions"})}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("p",{className:"font-medium mb-1",children:"What happens next:"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:"• All forms are safely stored on this device"}),a.jsx("li",{children:"• Will automatically upload when internet connection is restored"}),a.jsx("li",{children:"• You can continue working with new forms"})]})]})]}),a.jsx(U,{onClick:o,className:"w-full",children:"Return to Start"})]})]})})},Nw=({isOpen:t,onClose:e,syncedForms:n,syncStats:s})=>a.jsx(Un,{open:t,onOpenChange:e,children:a.jsxs(cn,{className:"sm:max-w-md",children:[a.jsxs(dn,{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ke,{className:"h-6 w-6 text-green-600"}),a.jsx(un,{children:"Forms Synced Successfully"})]}),a.jsx(ro,{children:"Your offline forms have been uploaded to the cloud."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-lg",children:[a.jsx(ks,{className:"h-5 w-5 text-green-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-green-800",children:[s.success," form",s.success!==1?"s":""," uploaded successfully"]}),s.failed>0&&a.jsxs("p",{className:"text-sm text-orange-600",children:[s.failed," form",s.failed!==1?"s":""," failed to upload"]})]})]}),n.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium text-sm text-gray-700",children:"Uploaded Forms:"}),a.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:n.map((r,o)=>a.jsxs("div",{className:"text-sm p-2 bg-gray-50 rounded border-l-2 border-green-500",children:[a.jsxs("p",{className:"font-medium",children:[r.patientFirstName," ",r.patientLastName]}),a.jsx("p",{className:"text-gray-600",children:new Date(r.submittedAt||"").toLocaleDateString()})]},o))})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(U,{onClick:e,className:"w-full",children:"Continue"})})]})]})}),Cw=({showSaveConfirmation:t,saveMessage:e,isOnline:n,showOfflineDialog:s,setShowOfflineDialog:r,showOnlineSuccessDialog:o,setShowOnlineSuccessDialog:i,showOfflineSummaryDialog:l,setShowOfflineSummaryDialog:c,showSyncSuccessDialog:u,setShowSyncSuccessDialog:d,offlineFormData:h,onlineFormData:m,pendingForms:f,syncedForms:p,syncStats:y})=>a.jsxs(a.Fragment,{children:[a.jsx(ww,{show:t,message:e,isOnline:n}),a.jsx(Sw,{isOpen:s,onClose:()=>r(!1),formData:h}),a.jsx(_w,{isOpen:o,onClose:()=>i(!1),formData:m}),a.jsx(jw,{isOpen:l,onClose:()=>c(!1),currentForm:h,pendingForms:f}),a.jsx(Nw,{isOpen:u,onClose:()=>d(!1),syncedForms:p,syncStats:y})]}),kw=()=>{const t=My();return a.jsxs(a.Fragment,{children:[a.jsx(bw,{currentRegion:t.currentRegion,regionDetected:t.regionDetected,isResuming:t.isResuming,activeSection:t.activeSection,setActiveSection:t.setActiveSection,formData:t.formData,handleInputChange:t.handleInputChange,handleCheckboxChange:t.handleCheckboxChange,isDirty:t.isDirty,justSaved:t.justSaved,onSave:t.handleSave,onSubmit:t.handleSubmit,onDiscard:t.handleDiscard,onResetJustSaved:t.resetJustSaved,isOnline:t.isOnline,lastSaved:t.lastSaved,formatLastSaved:t.formatLastSaved,dbInitialized:t.dbInitialized,retryCount:t.retryCount,showManualSelector:t.showManualSelector,setRegionManually:t.setRegionManually,isRegionFromDraft:t.isRegionFromDraft,isRegionDetected:t.isRegionDetected,validationErrors:t.validationErrors,showValidationErrors:t.showValidationErrors,submitting:t.submitting,submissionStatus:t.submissionStatus,isFormComplete:t.isFormComplete}),a.jsx(Cw,{showSaveConfirmation:t.showSaveConfirmation,saveMessage:t.saveMessage,isOnline:t.isOnline,showOfflineDialog:t.showOfflineDialog,setShowOfflineDialog:t.setShowOfflineDialog,showOnlineSuccessDialog:t.showOnlineSuccessDialog,setShowOnlineSuccessDialog:t.setShowOnlineSuccessDialog,showOfflineSummaryDialog:t.showOfflineSummaryDialog,setShowOfflineSummaryDialog:t.setShowOfflineSummaryDialog,showSyncSuccessDialog:t.showSyncSuccessDialog,setShowSyncSuccessDialog:t.setShowSyncSuccessDialog,offlineFormData:t.offlineFormData,onlineFormData:t.onlineFormData,pendingForms:t.pendingForms,syncedForms:t.syncedForms,syncStats:t.syncStats})]})},Hd=()=>a.jsx(kw,{}),Ha=()=>a.jsx(Hd,{}),Pw=()=>a.jsx(Hd,{}),Aw=()=>{const t=JSON.parse(localStorage.getItem("drafts")||"[]");return a.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Resume Drafts"}),t.length===0?a.jsx("p",{children:"No drafts available"}):a.jsx("ul",{className:"list-disc pl-5",children:t.map(e=>a.jsx("li",{children:a.jsxs(os,{to:`/edit/${e.id}`,className:"text-blue-600 underline",children:["Draft ",e.id]})},e.id))})]})},Ew=()=>{const{id:t}=ei(),[e,n]=g.useState(null);if(g.useEffect(()=>{const o=JSON.parse(localStorage.getItem("drafts")||"[]").find(i=>i.id===t);n((o==null?void 0:o.data)||null)},[t]),!e)return a.jsx("p",{className:"p-4 text-center",children:"❌ Draft not found"});const s=()=>{const o=JSON.parse(localStorage.getItem("drafts")||"[]").map(i=>i.id===t?{id:t,data:e}:i);localStorage.setItem("drafts",JSON.stringify(o)),alert("✅ Draft saved!")};return a.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[a.jsxs("h2",{className:"text-2xl font-semibold mb-4",children:["Edit Draft ",t]}),a.jsx("textarea",{value:JSON.stringify(e,null,2),onChange:r=>n(JSON.parse(r.target.value)),className:"w-full h-64 p-2 border rounded"}),a.jsx("button",{onClick:s,className:"mt-4 px-4 py-2 bg-green-600 text-white rounded",children:"Save Draft"})]})},Ow=()=>{const t=Kd();return g.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:a.jsxs(Ge,{className:"w-full max-w-md",children:[a.jsxs(Ke,{className:"text-center",children:[a.jsx(Je,{className:"text-2xl",children:"Page Not Found"}),a.jsx(hs,{children:"The page you're looking for doesn't exist."})]}),a.jsx(Xe,{className:"space-y-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"You might want to check the URL or return to the home page."}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(os,{to:"/",className:"block",children:a.jsx(U,{className:"w-full",children:"Back to Home"})}),a.jsx(os,{to:"/consent-form",className:"block",children:a.jsx(U,{variant:"outline",className:"w-full",children:"Start New Consent Form"})}),a.jsx(os,{to:"/drafts",className:"block",children:a.jsx(U,{variant:"outline",className:"w-full",children:"View Draft Forms"})})]})]})})]})})},Tw=()=>a.jsx(Jd,{basename:"/mia-consent-offline-form",children:a.jsxs(Xd,{children:[a.jsx(St,{path:"/",element:a.jsx(py,{})}),a.jsx(St,{path:"/consent-form",element:a.jsx(Ha,{})}),a.jsx(St,{path:"/consent-form/:draftId",element:a.jsx(Ha,{})}),a.jsx(St,{path:"/form",element:a.jsx(Pw,{})}),a.jsx(St,{path:"/drafts",element:a.jsx(Aw,{})}),a.jsx(St,{path:"/drafts/:id",element:a.jsx(Ew,{})}),a.jsx(St,{path:"*",element:a.jsx(Ow,{})})]})});class Iw extends Ve.Component{constructor(){super(...arguments);wt(this,"state",{hasError:!1,error:null,info:null})}static getDerivedStateFromError(n){return console.error("ErrorBoundary: getDerivedStateFromError",n),{hasError:!0,error:n,info:null}}componentDidCatch(n,s){console.error("❌ ErrorBoundary caught an error:",n,s),console.error("Error stack:",n==null?void 0:n.stack),console.error("Component stack:",s==null?void 0:s.componentStack),this.setState({hasError:!0,error:n,info:s})}render(){var n,s,r;return this.state.hasError?a.jsxs("div",{style:{padding:24,fontFamily:"monospace",backgroundColor:"#fff0f0",color:"#990000",minHeight:"100vh",overflow:"auto"},children:[a.jsx("h2",{children:"🚨 Something went wrong."}),a.jsxs("p",{children:[a.jsx("strong",{children:"Message:"})," ",((n=this.state.error)==null?void 0:n.message)||String(this.state.error)]}),a.jsxs("details",{style:{marginTop:16},children:[a.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Error Details"}),a.jsxs("div",{style:{marginTop:8},children:[a.jsx("p",{children:a.jsx("strong",{children:"Stack:"})}),a.jsx("pre",{style:{whiteSpace:"pre-wrap",backgroundColor:"#f5f5f5",padding:8,fontSize:"12px",maxHeight:"200px",overflow:"auto"},children:((s=this.state.error)==null?void 0:s.stack)||"(no stack trace)"}),((r=this.state.info)==null?void 0:r.componentStack)&&a.jsxs(a.Fragment,{children:[a.jsx("p",{children:a.jsx("strong",{children:"Component Stack:"})}),a.jsx("pre",{style:{whiteSpace:"pre-wrap",backgroundColor:"#f5f5f5",padding:8,fontSize:"12px",maxHeight:"200px",overflow:"auto"},children:this.state.info.componentStack})]})]})]}),a.jsxs("div",{style:{marginTop:24},children:[a.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"8px 16px",backgroundColor:"#ef4805",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reload Page"}),a.jsx("button",{onClick:()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()},style:{padding:"8px 16px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginLeft:"8px"},children:"Clear Storage & Reload"})]})]}):this.props.children}}class Mw extends Ve.Component{componentDidMount(){console.log("SafeAppWrapper: App mounted successfully")}componentDidCatch(e,n){console.error("SafeAppWrapper: Caught error in app",e,n)}render(){return a.jsx(Iw,{children:a.jsx("div",{id:"app-wrapper",children:this.props.children})})}}const Ua=document.getElementById("root");Ua?(ti(Ua).render(a.jsx(Mw,{children:a.jsx(Tw,{})})),console.log("✅ App rendered successfully with error boundary")):console.error("❌ Root container not found");
//# sourceMappingURL=index-BpmBph_u.js.map
